(this["webpackJsonppapers-game-client"]=this["webpackJsonppapers-game-client"]||[]).push([[0],{112:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(52),o=n.n(c),i=n(9),s=(n(67),n(0)),u=n(12),l=n(2);function b(){var e=Object(l.a)(["\n        html {\n          font-size: 62.5%;\n          letter-spacing: -0.5px;\n          font-family: -apple-system, BlinkMacSystemFont, 'Roboto', 'Helvetica Neue', sans-serif;\n          -webkit-font-smoothing: antialiased;\n          -moz-osx-font-smoothing: grayscale;\n          color: ",";\n        }\n\n        body {\n          box-sizing: border-box;\n          font-size: 1.6rem;\n          line-height: 1.4;\n        }\n\n        body * {\n          box-sizing: inherit;\n        }\n\n        .sr-only {\n          position: absolute;\n          width: 1px;\n          height: 1px;\n          padding: 0;\n          margin: -1px;\n          overflow: hidden;\n          clip: rect(0, 0, 0, 0);\n          border: 0;\n        }\n      "]);return b=function(){return e},e}function d(){var e=Object(l.a)(["\n  background-color: white;\n  color: ",";\n  ",";\n  line-height: 1.4;\n"]);return d=function(){return e},e}function m(){var e=Object(l.a)(["\n    color: ",";\n    font-style: italic;\n  "]);return m=function(){return e},e}function f(){var e=Object(l.a)(["\n    font-size: 1.4rem;\n  "]);return f=function(){return e},e}function j(){var e=Object(l.a)(["\n    color: ",";\n  "]);return j=function(){return e},e}function O(){var e=Object(l.a)(["\n    font-size: 1.6rem;\n  "]);return O=function(){return e},e}function g(){var e=Object(l.a)(["\n    font-size: 1.6rem;\n    font-weight: 700;\n  "]);return g=function(){return e},e}function p(){var e=Object(l.a)(["\n    font-size: 3.2rem;\n    font-weight: 700;\n  "]);return p=function(){return e},e}function h(){var e=Object(l.a)(["\n    font-size: 4rem;\n    font-weight: 700;\n    line-height: 4.8rem;\n    display: block;\n  "]);return h=function(){return e},e}var v={grayDark:"#484F5D",grayMedium:"#7F848E",grayLight:"#E5E6E8",primary:"#0038FF",primaryLight:"#E6EBFF",success:"#4EBD81",danger:"#e51d1d",bg:"#fff"},C={h1:Object(s.b)(h()),h2:Object(s.b)(p()),h3:Object(s.b)(g()),default:Object(s.b)(O()),secondary:Object(s.b)(j(),v.grayMedium),small:Object(s.b)(f()),italic:Object(s.b)(m(),v.grayMedium)},y=(Object(s.b)(d(),v.grayDark,C.default),"@media (max-height: 35.5em)");function w(){return Object(s.c)(s.a,{styles:Object(s.b)(b(),v.grayDark)})}var k=n(8),x=n(3),M=n(53),S=n(54),I=n(60),L=n(55),G=n(6),T=n(61),F=n(56),Z=n.n(F),P=n(4);function E(e,t){var n=new FileReader;n.onload=function(e){return t(e.target.result)},n.readAsDataURL(e)}function W(e){return Math.floor(Math.random()*(e-0+1))+0}function N(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){t.current=e})),t.current}var H=[["conservative","supplementary","wife","inquiry","compensation","able","future","mind","prevent","progressive"],["inject","dark","doubt","constitutional","honor","shine","pause","shot","underline","appoint"],["dance","captivate","runner","thoughtful","compose","dine","mask","admit","favor","advantage"],["finance","guess","reduction","indirect","prosecution","seed","stem","problem","obstacle","explicit"]],A=a.a.createContext({}),R=function(e){function t(e){var n;Object(M.a)(this,t);return(n=Object(I.a)(this,Object(L.a)(t).call(this,e))).URL=window.location.host,n.state={socket:null,profile:{id:window.localStorage.getItem("profile_id")||null,name:window.localStorage.getItem("profile_name")||null,avatar:window.localStorage.getItem("profile_avatar")||null,gameId:window.localStorage.getItem("profile_gameId")||null},game:void 0},n._removeGameFromState=n._removeGameFromState.bind(Object(G.a)(n)),n.PapersAPI={open:n.open.bind(Object(G.a)(n)),recoverPlayer:n.recoverPlayer.bind(Object(G.a)(n)),updateProfile:n.updateProfile.bind(Object(G.a)(n)),accessGame:n.accessGame.bind(Object(G.a)(n)),recoverGame:n.recoverGame.bind(Object(G.a)(n)),leaveGame:n.leaveGame.bind(Object(G.a)(n)),kickoutOfGame:n.kickoutOfGame.bind(Object(G.a)(n)),setTeams:n.setTeams.bind(Object(G.a)(n)),setWords:n.setWords.bind(Object(G.a)(n)),setWordsForEveyone:n.setWordsForEveyone.bind(Object(G.a)(n)),startGame:n.startGame.bind(Object(G.a)(n)),startTurn:n.startTurn.bind(Object(G.a)(n)),finishTurn:n.finishTurn.bind(Object(G.a)(n)),startNextRound:n.startNextRound.bind(Object(G.a)(n))},n}return Object(T.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){var e=this.state.profile,t=e.id,n=e.gameId,r=this.props.location,a=Object(u.f)(r.pathname,{path:"/game/:id"});if(console.log("PapersContext Mounted:",{playedId:t,gameId:n}),a)console.log("PapersContext - on a GameRoom");else if(console.log("PapersContext - on Home"),t&&n){var c=this.PapersAPI.open();this.PapersAPI.recoverGame(c)}}},{key:"open",value:function(e){var t=this.state.socket,n=this.state.profile,r=n.id,a=n.gameId,c=e||a;return t?(t.connected?console.warn("socket already opened!",r):(console.warn("reconnecting socket...",r),t.open()),t):(console.log("creating a socket!",r),(t=Z()(this.URL,{query:{playerId:r,gameId:c},transports:["websocket"]})).on("connect",(function(){console.log("connected!",r)})),this.setState({socket:t}),t)}},{key:"accessGame",value:function(e,t,n){var r=this,a=this.state.socket;if(a||(a=this.PapersAPI.open(t)),console.log("accessGame",e,t),!t)return n(new Error("Missing gameId"));a.emit("".concat(e,"-game"),{gameId:t,player:this.state.profile},n),a.on("set-game",(function(e){console.log("on set-game",e.name),window.localStorage.setItem("profile_gameId",e.name),r.setState((function(t){return{profile:Object(x.a)({},t.profile,{gameId:e.name}),game:e}}))})),a.on("kickouted",(function(){console.log("Global Status: You were quickedout! \ud83d\ude2d"),r._removeGameFromState()})),a.on("leave-game",(function(){console.log("on leave-game"),r._removeGameFromState()})),a.on("game-update",(function(e,t){console.log("game-update:",e,{payload:t});var n={"new-player":function(e){var n=t;return Object(x.a)({},e,{players:Object(x.a)({},e.players,Object(k.a)({},n.id,n))})},"pause-player":function(e){var n=t;return Object(x.a)({},e,{players:Object(x.a)({},e.players,Object(k.a)({},n,Object(x.a)({},e.players[n],{isAfk:!0})))})},"recover-player":function(e){var n=t;return Object(x.a)({},e,{players:Object(x.a)({},e.players,Object(k.a)({},n,Object(x.a)({},e.players[n],{isAfk:!1})))})},"remove-player":function(e){var n,r=t.playerId,a=t.creatorId,c=Object.keys(e.players).reduce((function(t,n){return n===r?t:Object(x.a)({},t,Object(k.a)({},n,e.players[n]))}),{});return n=e.hasStarted?Object(x.a)({},e.players,Object(k.a)({},r,Object(x.a)({},e.players[r],{hasLeft:!0}))):c,Object(x.a)({},e,{creatorId:a,players:n})},"set-words":function(e){var n=t.words,r=t.playerId;return Object(x.a)({},e,{words:Object(x.a)({},e.words,Object(k.a)({},r,n))})},"set-words-for-everyone":function(e){var n=t;return Object(x.a)({},e,{words:n})},"set-teams":function(e){var n=t;return Object(x.a)({},e,{teams:n})},"start-game":function(e){var n=t.round,r=t.hasStarted;return Object(x.a)({},e,{hasStarted:r,round:n})},"start-turn":function(e){var n=t;return Object(x.a)({},e,{round:Object(x.a)({},e.round,{},n)})},"finish-turn":function(e){window.localStorage.removeItem("turn");var n=t.round,r=t.score;return Object(x.a)({},e,{round:n,score:r})},"start-next-round":function(e){var n=t;return Object(x.a)({},e,{round:n})},ups:function(e){return console.log("Ups! game-update",t),e}},a=n[e]||n.ups;r.setState((function(e){return{game:a(e.game)}}))}))}},{key:"recoverPlayer",value:function(){console.log("recoverPlayer"),this.state.socket.open().emit("recover-player")}},{key:"updateProfile",value:function(e){var t,n=e.id||(t="player_".concat(e.name),"".concat(t,"_").concat(Math.random().toString(36).substr(2,9),"_").concat((new Date).getTime()));window.localStorage.setItem("profile_id",n),window.localStorage.setItem("profile_name",e.name),e.avatar&&window.localStorage.setItem("profile_avatar",e.avatar),this.setState((function(t){return{profile:Object(x.a)({},t.profile,{},e,{id:n})}}))}},{key:"setWordsForEveyone",value:function(){console.log("setWordsForEveyone()");var e=Object.keys(this.state.game.players).reduce((function(e,t,n){return Object(x.a)({},e,Object(k.a)({},t,H[n]))}),{});this.state.socket.emit("set-words-for-everyone",{gameId:this.state.game.name,playerId:this.state.profile.id,allWords:e})}},{key:"setWords",value:function(e,t){console.log("setWords()"),this.state.socket.emit("set-words",{gameId:this.state.game.name,playerId:this.state.profile.id,words:e},t)}},{key:"setTeams",value:function(e){console.log("setTeams()"),this.state.socket.emit("set-teams",{gameId:this.state.game.name,playerId:this.state.profile.id,teams:e})}},{key:"startGame",value:function(){console.log("startGame()"),this.state.socket.emit("start-game",{gameId:this.state.game.name,playerId:this.state.profile.id})}},{key:"startTurn",value:function(){console.log("startTurn()"),this.state.socket.emit("start-turn",{gameId:this.state.game.name,playerId:this.state.profile.id})}},{key:"finishTurn",value:function(e){console.log("finishTurn()"),this.state.socket.emit("finish-turn",{gameId:this.state.game.name,playerId:this.state.profile.id,papersTurn:e})}},{key:"startNextRound",value:function(){console.log("startNextRound()"),this.state.socket.emit("start-next-round",{gameId:this.state.game.name,playerId:this.state.profile.id})}},{key:"_removeGameFromState",value:function(){console.log("removing game"),window.localStorage.removeItem("profile_gameId"),window.localStorage.removeItem("turn"),this.state.socket&&this.state.socket.close(),this.setState((function(e){return{profile:Object(x.a)({},e.profile,{gameId:null}),game:null,socket:null}}))}},{key:"recoverGame",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.socket;t.emit("recover-game",(function(t,n){if(t){e._removeGameFromState();var r={notFound:"recover-game: Does not exist",empty:"recover-game: No games stored",ups:"recover-game: Ups!', ".concat(JSON.stringify(t))};console.warn(r[t]||r.ups)}else console.log("recover-game success:",n.game.name),e.setState({game:n.game})}))}},{key:"leaveGame",value:function(e){var t=this;console.log("leaveGame()"),this.state.socket.emit("leave-game",{gameId:this.state.game.name,playerId:this.state.profile.id},(function(e){if(e)return!0;t._removeGameFromState()}))}},{key:"kickoutOfGame",value:function(e){this.state.socket.emit("kickout-of-game",{gameId:this.state.game.name,playerId:e},(function(e){if(e)return!0}))}},{key:"render",value:function(){return a.a.createElement(A.Provider,{value:Object(x.a)({status:this.state.status,state:{profile:this.state.profile,game:this.state.game}},this.PapersAPI)},this.props.children)}}]),t}(r.Component),z=Object(u.h)(R),B=A,_=n(18),D=n.n(_),V=n(26),J=n(13);function U(){var e=Object(l.a)(["\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  grid-area: ctas;\n  align-self: end;\n  padding: 0 "," 5.6rem;\n\n  /* fadeout effect */\n  box-shadow: 0 -"," 3rem white;\n\n  &::before {\n    content: '';\n    display: block;\n    height: 1px;\n    width: calc(100% + ("," * 2));\n    margin-left: -",";\n    margin-top: -",";\n  }\n\n  & > button:not(:last-child),\n  & > a:not(:last-child) {\n    margin-bottom: 1.6rem;\n  }\n"]);return U=function(){return e},e}function Y(){var e=Object(l.a)(["\n  grid-area: main;\n  place-self: stretch;\n  overflow: scroll;\n  padding: "," "," 0;\n\n  /* space for fadeout */\n  &::after {\n    content: '';\n    display: block;\n    height: calc("," + ",");\n    flex-shrink: 0;\n  }\n"]);return Y=function(){return e},e}function K(){var e=Object(l.a)(["\n  /* grid-area: header; */\n  position: absolute;\n  top: 0;\n  width: 100%; /* [1] */\n\n  height: ",";\n  padding: 0 0.4rem 0.8rem ","; /* 0.4 is for icon on the corner */\n  display: flex;\n  justify-content: ",";\n  align-items: center;\n"]);return K=function(){return e},e}function q(){var e=Object(l.a)(["\n  position: relative;\n  width: 100vw;\n  max-width: 50rem;\n  margin: 0 auto;\n  height: 100vh;\n  overflow: hidden;\n  display: grid;\n  /* grid-template-areas: 'header' 'main' 'ctas'; [1] */\n  grid-template-areas: 'main' 'main' 'ctas';\n  grid-template-rows: "," 1fr auto;\n  justify-content: 'space-between';\n"]);return q=function(){return e},e}var X=Object(s.b)(q(),"6.4rem"),$=function(e){var t=e.hasChildren;return Object(s.b)(K(),"6.4rem","1.6rem",t?"space-between":"flex-end")},Q=Object(s.b)(Y(),"6.4rem","1.6rem","4rem","1.6rem"),ee=Object(s.b)(U(),"1.6rem","4rem","1.6rem","1.6rem","4rem");function te(){var e=Object(l.a)(["\n    ","\n    ","\n    box-shadow: ",";\n    border: none;\n    border-radius: 4.2rem;\n    font-size: inherit;\n    background-color: ",";\n    color: ",";\n    width: ",";\n    display: ",";\n    flex-shrink: 0;\n    text-align: center;\n    text-decoration: none;\n\n    &:focus {\n      outline: 0;\n      box-shadow: 0px 4px 16px rgba(0, 56, 255, 0.1), 0 0px 5px rgba(72, 79, 93, 0.4); /* verify with maggie */\n    }\n  "]);return te=function(){return e},e}function ne(){var e=Object(l.a)(["\n        width: 4.4rem;\n        height: 4.4rem;\n        border: none;\n        background: none;\n        border-radius: 50%;\n        font-size: 1.6rem;\n        display: flex;\n        align-items: center;\n        justify-items: center;\n\n        svg {\n          width: 2.4rem;\n        }\n      "]);return ne=function(){return e},e}var re={primary:{bg:v.primary,text:v.bg},success:{bg:v.success,text:v.bg},danger:{bg:v.danger,text:v.bg},light:{bg:v.bg,text:v.primary},flat:{bg:v.bg,text:v.grayDark}},ae=function(e){var t=e.variant,n=e.hasBlock,r=e.size;return"icon"===t?Object(s.b)(ne()):Object(s.b)(te(),"flat"===t?"\n      padding: 0;\n      ":"\n        padding: 1.6rem 2.4rem;\n        ".concat("success"!==t?"box-shadow: 0px 4px 16px rgba(0, 56, 255, 0.3);":"","\n  "),"sm"===r?"\n      padding: 0.5rem 1.5rem;\n      font-size: 1.4rem;\n  ":"",re[t].boxShadow,re[t].bg,re[t].text,n?"100%":"",n?"block":"inline-block")};function ce(e){var t=e.as,n=e.variant,r=e.hasBlock,a=e.size,c=e.children,o=Object(J.a)(e,["as","variant","hasBlock","size","children"]),i=t||"button";return Object(s.c)(i,Object.assign({},o,{css:ae({variant:n,hasBlock:r,size:a})}),c)}ce.defaultProps={variant:"primary"};var oe=Object(r.memo)(ce),ie=a.a.createContext({}),se=function(e){var t=e.children,n=Object(r.useState)({modal:{component:null,props:null}}),c=Object(P.a)(n,2),o=c[0],i=c[1];var s={setModal:function(e){console.debug("Setting Modal:",e.component.name),i((function(t){return Object(x.a)({},t,{modal:e})}))},closeModal:function(){i((function(e){return Object(x.a)({},e,{modal:{}})}))}};return a.a.createElement(ie.Provider,{value:Object(x.a)({},o,{},s)},t)},ue=ie;function le(){var e=Object(l.a)(["\n  position: absolute;\n  top: 0.8rem;\n  right: 0.8rem;\n  z-index: 4;\n  height: 4.4rem;\n  width: 4.4rem;\n  border: none;\n  border-radius: 50%;\n  padding: 0;\n  cursor: pointer;\n  background-color: transparent;\n\n  &::before,\n  &::after {\n    content: '';\n    position: absolute;\n    display: block;\n    left: 50%;\n    top: 50%;\n    width: 1.2rem;\n    height: 0.2rem;\n    background-color: ",";\n    transition: transform 0.15s ease-in;\n    transform: translate(-50%, -50%) rotate(45deg);\n    transform-origin: center center;\n    border-radius: 0.2rem;\n  }\n\n  &::after {\n    transform: translate(-50%, -50%) rotate(-45deg);\n  }\n\n  &:focus,\n  &:hover {\n    outline: none;\n\n    &::before {\n      transform: translate(-50%, -50%) rotate(0);\n    }\n\n    &::after {\n      transform: translate(-50%, -50%) rotate(0);\n    }\n  }\n"]);return le=function(){return e},e}function be(){var e=Object(l.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100%;\n  background-color: white;\n  padding: 1.6rem;\n"]);return be=function(){return e},e}function de(){var e=Object(l.a)(["\n  position: absolute;\n  background: rgba(0, 0, 0, 0.7);\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n"]);return de=function(){return e},e}function me(){var e=Object(l.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 2;\n"]);return me=function(){return e},e}var fe=Object(s.b)(me()),je=Object(s.b)(de()),Oe=Object(s.b)(be()),ge=Object(s.b)(le(),v.grayDark);function pe(e){var t=e.children,n=Object(r.useContext)(ue).closeModal;return Object(s.c)("section",{css:fe},Object(s.c)("div",{css:je,onClick:n,role:"none"}),Object(s.c)("div",{css:Oe},Object(s.c)("button",{css:ge,"aria-label":"Close Modal",onClick:n}),t))}function he(){var e=Object(l.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 0.8rem;\n"]);return he=function(){return e},e}function ve(){var e=Object(l.a)([""]);return ve=function(){return e},e}var Ce=Object(s.b)(ve()),ye=Object(s.b)(he());function we(e){var t=Object(r.useContext)(B),n=t.state.game,a=n&&n.name;return Object(s.c)(pe,null,Object(s.c)("h1",{css:C.h2},"Game Settings"),Object(s.c)("br",null),a?Object(s.c)("div",{css:Ce},Object(s.c)("div",{css:ye},Object(s.c)("h2",{css:C.h3},Object(s.c)("span",{"aria-label":"",role:"img"},"\ud83d\udd0c"," "),"Leave Game"),Object(s.c)(oe,{size:"sm",onClick:function(){window.confirm("Are you sure you wanna leave the game?")&&t.leaveGame()}},"Leave Game")),Object(s.c)("p",{css:C.secondary},"You'll leave the group. If the game starts meanwhile, you won't be able to join again.")):Object(s.c)("p",{css:C.secondary},"Nothing here for now... come back later..."),Object(s.c)("br",null),Object(s.c)("h1",{css:C.h2},"App Settings"),Object(s.c)("br",null),Object(s.c)("div",{css:Ce},Object(s.c)("div",{css:ye},Object(s.c)("h2",{css:C.h3},Object(s.c)("span",{"aria-label":"",role:"img"},"\u267b\ufe0f"," "),"Refresh Page"),Object(s.c)(oe,{size:"sm",onClick:function(){return window.location.reload()}},"Refresh Page")),Object(s.c)("p",{css:C.secondary},"This will simply refresh the page.")),Object(s.c)("br",null),Object(s.c)("div",{css:Ce},Object(s.c)("div",{css:ye},Object(s.c)("h2",{css:C.h3},Object(s.c)("span",{"aria-label":"",role:"img"},"\u2728"," "),"Reset Profile"),Object(s.c)(oe,{size:"sm",onClick:function(){localStorage.clear(),window.location.reload()}},"Reset Profile")),Object(s.c)("p",{css:C.secondary},"This will delete your local profile and you'll have a fresh start. If you are in the middle of a game, you'll leave the game too.")))}function ke(e){var t=Object(r.useContext)(ue).setModal;return Object(s.c)(oe,{variant:"icon","aria-label":"Settings",onClick:function(){t({component:we})}},Object(s.c)("span",{role:"img","aria-label":""},"\u2699\ufe0f"))}var xe=function(e){var t=e.children,n=Object(J.a)(e,["children"]);return Object(s.c)("div",Object.assign({css:X},n),t)},Me=xe;function Se(){var e=Object(l.a)(["\n  width: 20rem;\n  height: 20rem;\n  opacity: 0.8;\n"]);return Se=function(){return e},e}function Ie(){var e=Object(l.a)(["\n  ","\n  background: ",";\n  margin: -0.6rem 0;\n  width: 7rem;\n  height: 7rem;\n  position: absolute;\n  top: 0;\n  left: 50%;\n  transform: translateX(-50%);\n  z-index: 1;\n"]);return Ie=function(){return e},e}function Le(){var e=Object(l.a)(["\n  position: relative;\n  margin-bottom: 4.8rem;\n\n  "," {\n    margin-bottom: 1.4rem;\n  }\n"]);return Le=function(){return e},e}function Ge(){var e=Object(l.a)(["\n  ","\n  border: none;\n  object-fit: cover;\n"]);return Ge=function(){return e},e}function Te(){var e=Object(l.a)(["\n  width: 80vw;\n  height: 80vw;\n  max-width: 28.4rem;\n  max-height: 28.4rem;\n  border-radius: 50%;\n  background-color: ",";\n  color: ",";\n  margin: 2.4rem auto;\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  justify-content: center;\n\n  svg {\n    /* camera */\n    stroke: ",";\n    display: inline-block;\n    margin-bottom: 1.6rem;\n  }\n"]);return Te=function(){return e},e}function Fe(){var e=Object(l.a)(["\n  ","\n  border: none;\n  border-bottom: 1px solid ",";\n  border-radius: 0;\n  width: 100%;\n  text-align: center;\n  margin-top: 4.8rem;\n  margin-bottom: 4.8rem;\n\n  "," {\n    margin-top: 1.6rem;\n    margin-bottom: 1.6rem;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: ",";\n  }\n"]);return Fe=function(){return e},e}function Ze(){var e=Object(l.a)(["\n  margin: 0.8rem auto;\n"]);return Ze=function(){return e},e}function Pe(){var e=Object(l.a)(["\n  font-size: 8rem;\n"]);return Pe=function(){return e},e}function Ee(){var e=Object(l.a)(["\n  display: flex;\n  flex-grow: 1;\n  text-align: center;\n  flex-direction: column;\n  justify-content: ",";\n"]);return Ee=function(){return e},e}xe.Header=function(e){var t=e.children,n=Object(J.a)(e,["children"]);return Object(s.c)("div",Object.assign({css:$({hasChildren:!!t})},n),t,Object(s.c)(ke,null))},xe.Main=function(e){var t=e.children,n=Object(J.a)(e,["children"]);return Object(s.c)("div",Object.assign({css:Q},n),t)},xe.CTAs=function(e){var t=e.children,n=Object(J.a)(e,["children"]);return Object(s.c)("div",Object.assign({css:ee},n),t)};var We=function(e){var t=e.centered;return Object(s.b)(Ee(),t?"center":"flex-start")},Ne=Object(s.b)(Pe()),He=Object(s.b)(Ze()),Ae=Object(s.b)(Fe(),C.h1,v.grayLight,y,v.primaryLight),Re=Object(s.b)(Te(),v.primaryLight,v.primary,v.primary),ze=Object(s.b)(Ge(),Re),Be=Object(s.b)(Le(),y),_e=Object(s.b)(Ie(),ze,v.grayDark),De=Object(s.b)(Se());function Ve(){var e=Object(l.a)(["\n            white-space: nowrap;\n          "]);return Ve=function(){return e},e}function Je(e){var t=Object(r.useContext)(B),n=t.state.profile,a=Object(r.useState)({name:n.name,avatar:n.avatar,step:0,avatarStatus:null}),c=Object(P.a)(a,2),o=c[0],i=c[1];function u(e,t){return{name:function(){var e=t.target.value;i((function(t){return Object(x.a)({},t,{name:e})}))},avatar:function(){var e;return D.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=t.target.files[0],i((function(e){return Object(x.a)({},e,{avatarStatus:"loading"})})),e){n.next=4;break}return n.abrupt("return");case 4:return n.next=6,D.a.awrap(Object(V.a)(e,{maxWidthOrHeight:500}));case 6:E(n.sent,(function(e){console.log("Avatar compressed!"),i((function(t){return Object(x.a)({},t,{avatar:e,avatarStatus:"loaded"})}))}));case 8:case"end":return n.stop()}}))}}[e]()}function l(){i((function(e){return Object(x.a)({},e,{step:e.step+1})}))}var b={0:function(){return Object(s.c)(r.Fragment,null,Object(s.c)("span",{css:Ne,role:"img","aria-label":"logo"},"\ud83c\udfb2"),Object(s.c)("h1",{css:C.h1},"Welcome!"),Object(s.c)("p",{css:[He,C.secondary]},"Papers is the perfect game for your"," ",Object(s.c)("span",{css:Object(s.b)(Ve())},"dinner party"),".",Object(s.c)("br",null),"Made with love by Maggie and Sandy ",Object(s.c)("span",{"aria-hidden":"true"},"\ud83d\ude0e")))},1:function(){return Object(s.c)(r.Fragment,null,Object(s.c)("label",null,Object(s.c)("span",null,"How should we call you?"),Object(s.c)("input",{css:Ae,type:"text",autoFocus:!0,defaultValue:o.name,onChange:function(e){return u("name",e)}})),o.name&&Object(s.c)(oe,{onClick:l},"Next"))},2:function(){return Object(s.c)("label",null,Object(s.c)("span",null,"Add your avatar"),Object(s.c)("input",{type:"file",className:"sr-only",accept:"image/png, image/jpeg",onChange:function(e){return u("avatar",e)}}),o.avatar?Object(s.c)("img",{css:ze,src:o.avatar,alt:"Your avatar"}):Object(s.c)("div",{css:Re},Object(s.c)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object(s.c)("path",{d:"M23 19C23 19.5304 22.7893 20.0391 22.4142 20.4142C22.0391 20.7893 21.5304 21 21 21H3C2.46957 21 1.96086 20.7893 1.58579 20.4142C1.21071 20.0391 1 19.5304 1 19V8C1 7.46957 1.21071 6.96086 1.58579 6.58579C1.96086 6.21071 2.46957 6 3 6H7L9 3H15L17 6H21C21.5304 6 22.0391 6.21071 22.4142 6.58579C22.7893 6.96086 23 7.46957 23 8V19Z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),Object(s.c)("path",{d:"M12 17C14.2091 17 16 15.2091 16 13C16 10.7909 14.2091 9 12 9C9.79086 9 8 10.7909 8 13C8 15.2091 9.79086 17 12 17Z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})),Object(s.c)("span",null,"Upload or take a picture")),Object(s.c)("span",null,"loading"===o.avatarStatus&&"Loading...","loaded"===o.avatarStatus&&"Looking good!"))}}[o.step];return Object(s.c)(Me,null,o.step>0&&Object(s.c)(Me.Header,null,Object(s.c)(oe,{variant:"flat",onClick:function(){i((function(e){return Object(x.a)({},e,{step:e.step-1})}))}},"Back")),Object(s.c)(Me.Main,{css:We({centered:0===o.step})},Object(s.c)(b,null)),Object(s.c)(Me.CTAs,null,0===o.step&&Object(s.c)(oe,{onClick:l},"Next"),2===o.step&&Object(s.c)(oe,{onClick:function(){t.updateProfile({name:o.name,avatar:o.avatar})},variant:o.avatar?"primary":"flat"},o.avatar?"Finish":"Skip this step")))}function Ue(){var e=Object(l.a)(["\n  ","\n  color: #da4040;\n  margin-bottom: 1.6rem;\n  text-align: center;\n"]);return Ue=function(){return e},e}function Ye(){var e=Object(l.a)(["\n  border: none;\n  border-bottom: 1px solid ",";\n  border-radius: 0;\n  width: 100%;\n  text-align: center;\n  ","\n  margin: 0 0 1.6rem;\n  margin-top: 6rem;\n\n  "," {\n    margin-top: 0.8rem;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: ",";\n  }\n"]);return Ye=function(){return e},e}function Ke(){var e=Object(l.a)(["\n  text-align: center;\n  margin: 0.8rem 0 1.6rem;\n"]);return Ke=function(){return e},e}function qe(){var e=Object(l.a)(["\n  text-align: center;\n  margin-top: 4rem;\n"]);return qe=function(){return e},e}function Xe(){var e=Object(l.a)([""]);return Xe=function(){return e},e}function $e(){var e=Object(l.a)([""]);return $e=function(){return e},e}function Qe(){var e=Object(l.a)([""]);return Qe=function(){return e},e}function et(){var e=Object(l.a)([""]);return et=function(){return e},e}Object(s.b)(et()),Object(s.b)(Qe()),Object(s.b)($e()),Object(s.b)(Xe());var tt=Object(s.b)(qe()),nt=Object(s.b)(Ke()),rt=Object(s.b)(Ye(),v.grayLight,C.h1,y,v.grayMedium),at=Object(s.b)(Ue(),C.small);function ct(e){var t=e.variant,n=Object(r.useContext)(B),a=Object(r.useContext)(ue).closeModal,c=Object(r.useState)(!1),o=Object(P.a)(c,2),i=o[0],l=o[1],b=Object(r.useState)({gameName:null,gameToRedirect:null,errorMsg:null}),d=Object(P.a)(b,2),m=d[0],f=d[1],j={join:{title:"What's the party name?",description:"Ask your friend for it!",cta:"Let's go!"},create:{title:"Give this party a name!",description:"Pick a short and sweet name.",cta:"Next: Add Players"}}[t];return m.gameToRedirect?Object(s.c)(u.a,{to:"/game/".concat(m.gameToRedirect)}):Object(s.c)(pe,null,Object(s.c)(r.Fragment,null,Object(s.c)("h1",{css:[tt,C.h3]},j.title),Object(s.c)("label",null,Object(s.c)("p",{css:[nt,C.secondary]},j.description),Object(s.c)("input",{onChange:function(e){var t=e.target.value;f((function(e){return Object(x.a)({},e,{gameName:t})}))},css:rt,autoFocus:!0,type:"text"}),m.errorMsg&&Object(s.c)("p",{css:at},m.errorMsg)),m.gameName&&m.gameName.length>=3&&Object(s.c)(oe,{hasBlock:!0,onClick:function(){l(!0),n.accessGame(t,m.gameName,(function(e){if(e){var t={exists:function(){return"Choose other name."},notFound:function(){return"This game does not exist."},ups:function(){return"Ups, something went wrong! Error: ".concat(JSON.stringify(e))}},n=(t[e]||t.ups)();return console.warn("accessGame() err:",m.gameName,n),l(!1),f((function(e){return Object(x.a)({},e,{errorMsg:n})}))}a()}))}},j.cta,i&&"\u23f3")))}function ot(e){var t=Object(r.useContext)(B),n=Object(r.useContext)(ue).setModal,a=t.state.profile;function c(e){n({component:ct,props:{variant:e}})}return Object(s.c)(Me,null,Object(s.c)(Me.Header,null),Object(s.c)(Me.Main,{css:We},Object(s.c)((function(){return Object(s.c)("div",{css:Be},Object(s.c)("label",null,Object(s.c)("span",{className:"sr-only"},"Edit your avatar"),Object(s.c)("input",{type:"file",className:"sr-only",accept:"image/png, image/jpeg",onChange:function(e){return n=e,{avatar:function(){var e;return D.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e=n.target.files[0]){r.next=3;break}return r.abrupt("return");case 3:return r.next=5,D.a.awrap(Object(V.a)(e,{maxWidthOrHeight:500}));case 5:E(r.sent,(function(e){console.log("Avatar compressed!"),t.updateProfile({name:a.name,avatar:e})}));case 7:case"end":return r.stop()}}))}}["avatar"]();var n}}),a.avatar?Object(s.c)("img",{css:_e,src:a.avatar,alt:"avatar preview"}):Object(s.c)("span",{css:_e})),Object(s.c)("img",{css:De,src:"images/dance.gif","aria-hidden":"true",alt:""}))}),null),Object(s.c)("h1",null,"Welcome",Object(s.c)("span",{css:C.h1},a.name))),Object(s.c)(Me.CTAs,null,Object(s.c)(oe,{onClick:function(){return c("join")}},"Join Game"),Object(s.c)(oe,{variant:"light",onClick:function(){return c("create")}},"Create Game")))}function it(e){var t=Object(r.useContext)(B),n=t.state.game&&t.state.game.name;return n?Object(s.c)(u.a,{push:!0,to:"/game/".concat(n)}):t.state.profile.name?Object(s.c)(ot,null):Object(s.c)(Je,null)}function st(){var e=Object(l.a)(["\n  width: 4.8rem;\n  height: 4.8rem;\n  object-fit: cover;\n  border-radius: 50%;\n  background: ",";\n  margin-right: ",";\n"]);return st=function(){return e},e}ct.defaultProps={variant:"join"};var ut=function(e){var t=e.hasMargin;return Object(s.b)(st(),v.primaryLight,t&&"1.6rem")};function lt(e){var t=e.src,n=e.alt,r=e.hasMargin,a=Object(J.a)(e,["src","alt","hasMargin"]),c=t?"img":"span";return Object(s.c)(c,Object.assign({src:t,alt:n,css:ut({hasMargin:r})},a))}function bt(){var e=Object(l.a)(["\n  max-height: 5.6rem;\n"]);return bt=function(){return e},e}function dt(){var e=Object(l.a)(["\n  display: flex;\n  align-items: center;\n  margin-bottom: 1.6rem; /* 2.4 too big */\n  justify-content: space-between;\n\n  span {\n    display: flex;\n    align-items: center;\n  }\n"]);return dt=function(){return e},e}function mt(){var e=Object(l.a)(["\n  margin-top: 1.6rem;\n"]);return mt=function(){return e},e}var ft=Object(s.b)(mt()),jt=Object(s.b)(dt()),Ot=Object(s.b)(bt());var gt=function(e){var t=e.players,n=e.enableKickout,a=void 0!==n&&n,c=Object(J.a)(e,["players","enableKickout"]),o=Object(r.useContext)(B),i=o.state,u=i.profile,l=i.game,b=u.id,d=l.creatorId===b;return Object(s.c)("ul",Object.assign({css:ft},c),t.map((function(e,t){if(!l.players[e]){var n=e.match("_(.*)_")[1];return Object(s.c)("li",{key:e,css:jt},Object(s.c)("span",null,Object(s.c)(lt,{hasMargin:!0}),Object(s.c)("span",null," ",n," "),"\xa0",Object(s.c)("span",null," (Left) ")))}var r=l.players[e],c=r.avatar,i=r.name,u=r.id,m=r.isAfk,f=u===l.creatorId,j=l.words[u],O=l.teams&&(j?"done":"writting");return Object(s.c)("li",{key:u,css:jt},Object(s.c)("span",null,Object(s.c)(lt,{src:c,hasMargin:!0}),Object(s.c)("span",null,i),Object(s.c)("span",null,"\xa0",f?" (Admin) ":u===b&&" (you) ",m&&" \u26a0\ufe0f ")),Object(s.c)("span",null,O&&Object(s.c)("img",{css:Ot,src:"/images/".concat(O,".gif"),alt:"status: ".concat(O)}),a&&d&&u!==b&&Object(s.c)(oe,{variant:"light",size:"sm",onClick:function(){return function(e){var t=l.players[e].name;window.confirm("You are about to kick ".concat(t,". Are you sure?"))&&o.kickoutOfGame(e)}(u)}},"Kick out")))})))},pt=n(7),ht=n(59),vt=n.n(ht);function Ct(){var e=Object(l.a)(["\n  display: flex;\n"]);return Ct=function(){return e},e}function yt(){var e=Object(l.a)(["\n  display: flex;\n  justify-content: space-between;\n  ","\n  ","\n  margin-top: -0.8rem;\n  margin-bottom: 2.4rem;\n"]);return yt=function(){return e},e}function wt(){var e=Object(l.a)(["\n  font-family: inherit;\n  font-size: inherit;\n  ","\n  color: ",";\n  border: none;\n  border-radius: 0;\n  border-bottom: 1px solid ",";\n  width: 100%;\n  height: 4rem;\n  text-align: center;\n  resize: none;\n\n  &::-moz-placeholder,\n  &::-webkit-input-placeholder {\n    color: ",";\n  }\n\n  &:focus {\n    outline: none;\n    border-color: ",";\n  }\n"]);return wt=function(){return e},e}function kt(){var e=Object(l.a)(["\n  text-align: center;\n  ","\n  ","\n  opacity: 0.5;\n"]);return kt=function(){return e},e}function xt(){var e=Object(l.a)(["\n  opacity: 1;\n"]);return xt=function(){return e},e}function Mt(){var e=Object(l.a)(["\n  width: calc(100vw - (1.6rem * 2));\n  min-height: 24.5rem;\n  "," {\n    min-height: 14.5rem; /* space for 2 lines */\n  }\n  margin: 0 0.4rem;\n  padding: 0.8rem 3.2rem 3.2rem;\n  display: flex;\n  align-items: center;\n  flex-shrink: 0;\n  scroll-snap-align: center;\n  background: ",";\n  box-shadow: 0px 4px 16px rgba(0, 56, 255, 0.2);\n  opacity: 0.8;\n  transition: opacity 250ms;\n\n  &:first-child /* emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason */ {\n    margin-left: 1.6rem;\n  }\n\n  &:last-child {\n    margin-right: 1.6rem;\n  }\n"]);return Mt=function(){return e},e}function St(){var e=Object(l.a)(["\n  width: 100vw;\n  display: flex;\n  overflow-x: auto;\n  scroll-behavior: smooth;\n  scroll-snap-type: x mandatory;\n  padding: 1.6rem 0;\n  margin-left: -1.6rem; /* page padding */\n\n  &::after {\n    /* make margin work on last slide */\n    content: '';\n    width: 1px;\n    display: block;\n    flex-shrink: 0;\n  }\n  /* &::-webkit-scrollbar {\n    width: 10px;\n    height: 10px;\n  }\n  &::-webkit-scrollbar-thumb {\n    background: black;\n    border-radius: 10px;\n  }\n  &::-webkit-scrollbar-track {\n    background: transparent;\n  } */\n"]);return St=function(){return e},e}function It(){var e=Object(l.a)(["\n  width: 2.4rem;\n  height: 2.4rem;\n  margin-right: 0.8rem;\n  flex-shrink: 0;\n"]);return It=function(){return e},e}function Lt(){var e=Object(l.a)(["\n  margin: 1.6rem 2.4rem 0 0;\n  display: flex;\n  align-items: center;\n"]);return Lt=function(){return e},e}var Gt=Object(s.b)(Lt()),Tt=Object(s.b)(It()),Ft=Object(s.b)(St()),Zt=Object(s.b)(Mt(),y,v.bg),Pt=Object(s.b)(xt()),Et=(Object(s.b)(kt(),C.small,C.secondary),Object(s.b)(wt(),C.h2,C.grayDark,v.primaryLight,v.grayMedium,v.primary)),Wt=Object(s.b)(yt(),C.secondary,C.small),Nt=Object(s.b)(Ct());function Ht(){var e=Object(r.useContext)(B),t=e.state,n=t.game,a=t.profile,c=Object(r.useRef)(null),o=Object(r.useRef)(vt()((function(e,t){var n=c.current,r=Math.round(n.scrollLeft/n.scrollWidth*10);t!==r&&S(r)}),250)).current,i=Object(r.useContext)(ue).closeModal,u=Object(r.useState)([]),l=Object(P.a)(u,2),b=l[0],d=l[1],m=Object(r.useState)({}),f=Object(P.a)(m,2),j=f[0],O=f[1],g=Object(r.useState)(null),p=Object(P.a)(g,2),h=p[0],y=p[1],w=Object(r.useState)(0),x=Object(P.a)(w,2),M=x[0],S=x[1],I=n.settings.words,L=b.filter((function(e){return!!e})).length,G=!!n.words[a.id],T=function(e){var t=c.current.childNodes[e].getElementsByTagName("textarea")[0];t?t.focus():console.warn("textarea doesnt exist",c.current,e,t)};Object(r.useEffect)((function(){G&&i()}),[G]),Object(r.useEffect)((function(){c.current.scrollTo(0,0),T(0)}),[c]),Object(r.useEffect)((function(){setTimeout((function(){T(M)}),500)}),[M]);var F=function(e,t){var n=Object(pt.a)(b);n[M]=e.target.value,O(Object(k.a)({},t,e.target.scrollHeight)),d(n)};var Z=v.primary;return Object(s.c)(pe,null,Object(s.c)("p",{css:[C.small,C.secondary,Gt]},Object(s.c)("svg",{css:Tt,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object(s.c)("rect",{width:"24",height:"24",fill:"white"}),Object(s.c)("path",{d:"M7.34851 10.3703C7.26855 11.8112 7.81518 13.2126 8.84837 14.2148C9.66244 15.0045 10.1293 16.0919 10.1293 17.1982V17.8361C10.1293 18.5135 10.6803 19.0645 11.3577 19.0645H13.2522C13.9296 19.0645 14.4805 18.5135 14.4805 17.8361V17.1987C14.4805 16.0783 14.9357 15.002 15.7294 14.2457C16.7224 13.2995 17.2692 12.0233 17.2692 10.6522C17.2692 7.91472 15.0423 5.68775 12.3048 5.68775C12.118 5.68775 11.9283 5.69814 11.741 5.71892C9.36948 5.98117 7.4811 7.9809 7.34851 10.3703ZM11.8404 6.61703C11.9949 6.59986 12.1512 6.59128 12.305 6.59128C14.5442 6.59128 16.3659 8.41279 16.3659 10.6522C16.3659 11.7737 15.9187 12.8175 15.1064 13.5916C14.1347 14.5175 13.5772 15.8321 13.5772 17.1987V17.8361C13.5772 18.0153 13.4313 18.1609 13.2524 18.1609H11.3579C11.1788 18.1609 11.0331 18.015 11.0331 17.8361V17.1982C11.0331 15.849 10.4661 14.5254 9.47767 13.5663C8.63265 12.7466 8.1854 11.5998 8.25091 10.4204C8.35911 8.46632 9.90233 6.83139 11.8404 6.61703Z",fill:Z}),Object(s.c)("path",{d:"M12.3051 7.82685C12.9814 7.82685 13.6363 8.07058 14.149 8.51331C14.2132 8.56865 14.2918 8.59576 14.3704 8.59576C14.4655 8.59576 14.5599 8.556 14.627 8.4783C14.7494 8.33667 14.7336 8.12276 14.592 8.00033C13.9561 7.45144 13.1441 7.14898 12.3051 7.14898C12.1179 7.14898 11.9663 7.30055 11.9663 7.48781C11.9663 7.67506 12.1179 7.82685 12.3051 7.82685Z",fill:Z}),Object(s.c)("path",{d:"M15.1305 10.6522C15.1305 10.8394 15.2821 10.991 15.4693 10.991C15.6566 10.991 15.8082 10.8394 15.8082 10.6522C15.8082 10.2192 15.7295 9.79608 15.5746 9.39447C15.5073 9.22008 15.3114 9.13335 15.1366 9.20043C14.962 9.26775 14.875 9.46404 14.9426 9.63842C15.0673 9.96188 15.1305 10.303 15.1305 10.6522Z",fill:Z}),Object(s.c)("path",{d:"M13.7752 19.5106H10.8347C10.6474 19.5106 10.4958 19.6622 10.4958 19.8494C10.4958 20.0367 10.6474 20.1882 10.8347 20.1882H13.7754C13.9627 20.1882 14.1143 20.0367 14.1143 19.8494C14.1143 19.6622 13.9625 19.5106 13.7752 19.5106Z",fill:Z}),Object(s.c)("path",{d:"M14.114 20.9201C14.114 20.7328 13.9625 20.5813 13.7752 20.5813H10.8347C10.6474 20.5813 10.4958 20.7328 10.4958 20.9201C10.4958 21.1073 10.6474 21.2589 10.8347 21.2589H13.7754C13.9625 21.2589 14.114 21.1071 14.114 20.9201Z",fill:Z}),Object(s.c)("path",{d:"M4.33882 9.96618C4.15157 9.96618 4 10.1177 4 10.305C4 10.4923 4.15157 10.6438 4.33882 10.6438H6.29112C6.47838 10.6438 6.62994 10.4923 6.62994 10.305C6.62994 10.1177 6.47838 9.96618 6.29112 9.96618H4.33882Z",fill:Z}),Object(s.c)("path",{d:"M20.2713 10.6438C20.4586 10.6438 20.6102 10.4923 20.6102 10.305C20.6102 10.1177 20.4586 9.96618 20.2713 9.96618H18.319C18.1318 9.96618 17.9802 10.1177 17.9802 10.305C17.9802 10.4923 18.1318 10.6438 18.319 10.6438H20.2713Z",fill:Z}),Object(s.c)("path",{d:"M11.9663 2.33882V4.29112C11.9663 4.47838 12.1179 4.62994 12.3051 4.62994C12.4924 4.62994 12.644 4.47838 12.644 4.29112V2.33882C12.644 2.15157 12.4924 2 12.3051 2C12.1179 2 11.9663 2.15157 11.9663 2.33882Z",fill:Z}),Object(s.c)("path",{d:"M16.7971 6.29198L18.1775 4.91161C18.3099 4.77947 18.3099 4.56466 18.1775 4.43252C18.0451 4.30015 17.8308 4.30015 17.6984 4.43252L16.318 5.81288C16.1857 5.94502 16.1857 6.15984 16.318 6.29198C16.3842 6.35816 16.4709 6.39114 16.5577 6.39114C16.6444 6.39114 16.7309 6.35816 16.7971 6.29198Z",fill:Z}),Object(s.c)("path",{d:"M7.81289 14.318L6.43253 15.6984C6.30016 15.8305 6.30016 16.0451 6.43253 16.1775C6.49871 16.2437 6.58545 16.2766 6.67219 16.2766C6.75893 16.2766 6.84567 16.2437 6.91185 16.1775L8.29221 14.7971C8.42458 14.665 8.42458 14.4504 8.29221 14.318C8.15985 14.1857 7.94526 14.1857 7.81289 14.318Z",fill:Z}),Object(s.c)("path",{d:"M6.91162 4.43252C6.77926 4.30015 6.56489 4.30015 6.43253 4.43252C6.30016 4.56466 6.30016 4.77947 6.43253 4.91161L7.81289 6.29198C7.87907 6.35816 7.96581 6.39114 8.05255 6.39114C8.13929 6.39114 8.22603 6.35816 8.29221 6.29198C8.42458 6.15984 8.42458 5.94502 8.29221 5.81288L6.91162 4.43252Z",fill:Z}),Object(s.c)("path",{d:"M16.318 14.318C16.1857 14.4504 16.1857 14.665 16.318 14.7971L17.6984 16.1775C17.7646 16.2437 17.8513 16.2766 17.9381 16.2766C18.0248 16.2766 18.1115 16.2437 18.1777 16.1775C18.3101 16.0451 18.3101 15.8305 18.1777 15.6984L16.7973 14.318C16.6648 14.1857 16.4504 14.1857 16.318 14.318Z",fill:Z}),Object(s.c)("path",{d:"M13.3789 21.9905C13.3789 21.8033 13.2273 21.6517 13.04 21.6517H11.5698C11.3825 21.6517 11.231 21.8033 11.231 21.9905C11.231 22.1778 11.3825 22.3294 11.5698 22.3294H13.04C13.2273 22.3294 13.3789 22.1778 13.3789 21.9905Z",fill:Z})),Object(s.c)("span",null,"Write down words or expressions. Make sure everyone knows what you\u2019re talking about!")),Object(s.c)("div",{css:Ft,onScroll:function(e){return o(e,M)},ref:c},function(){for(var e=[],t=function(t){var n=t===M,r=n&&Pt,a=j[t]||"4rem";e.push(Object(s.c)("div",{css:[Zt,r],"data-slide":t+1,key:t},Object(s.c)("textarea",Object.assign({style:{height:a},onChange:function(e){return F(e,t)},placeholder:"Write here..."},n?{autoFocus:"autofocus"}:{},{css:Et}))))},n=0;n<I;n++)t(n);return e}()),h&&Object(s.c)("p",{css:Wt},h),Object(s.c)("div",{css:Wt,"aria-label":"Papers status"},Object(s.c)("p",null,M+1," of ",I),Object(s.c)("p",null,L," papers filled")),Object(s.c)("div",{css:Nt},10!==L?Object(s.c)(oe,{hasBlock:!0,variant:"light",onClick:function(){var e=b.findIndex((function(e){return!e})),t=e>-1?e:9===M?0:M+1;c.current.scrollTo((window.innerWidth-24)*t,0),S(t)}},"Next paper"):Object(s.c)(oe,{hasBlock:!0,onClick:function(){e.setWords(b,(function(e){if(e)return y("Something went wrong. ".concat(JSON.stringify(e)));i()}))}},"All done!! Eheheheh")))}function At(){var e=Object(l.a)(["\n  margin-top: 0.8rem;\n  margin-bottom: 4rem;\n"]);return At=function(){return e},e}function Rt(){var e=Object(l.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-end;\n  margin-bottom: 1.6rem;\n"]);return Rt=function(){return e},e}function zt(){var e=Object(l.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: baseline;\n  "," /* svg space */\n"]);return zt=function(){return e},e}function Bt(){var e=Object(l.a)(["\n  padding-bottom: 0.8rem;\n"]);return Bt=function(){return e},e}function _t(){var e=Object(l.a)(["\n  margin-top: 0.8rem;\n  max-height: 14.7rem;\n"]);return _t=function(){return e},e}function Dt(){var e=Object(l.a)(["\n  text-align: center;\n  margin-bottom: 4rem;\n\n  "," {\n    margin-bottom: 2rem;\n  }\n"]);return Dt=function(){return e},e}var Vt=Object(s.b)(Dt(),y),Jt=Object(s.b)(_t()),Ut=Object(s.b)(Bt()),Yt=function(e){return Object(s.b)(zt(),e&&"padding-left: 3rem;")},Kt=(Object(s.b)(Rt()),Object(s.b)(At()));function qt(e){var t=Object(r.useContext)(B),n=Object(r.useContext)(ue).setModal,a=t.state,c=a.profile,o=a.game,u=c.id,l=o.creatorId===u,b=!!o.teams,d=N(!!o.teams),m=function(e){return o.words[e]&&o.words[e].length===o.settings.words};function f(){n({component:Ht})}function j(){t.setWordsForEveyone()}function O(){t.startGame()}return Object(r.useEffect)((function(){!d&&b&&!m(u)&&f()})),o.teams?function(){var e=Object.keys(o.players).every(m),t=m(u),n=l&&!e;return Object(s.c)(Me,null,Object(s.c)(Me.Header,null),Object(s.c)(Me.Main,null,Object(s.c)("div",{css:Vt},Object(s.c)("h1",{css:C.secondary},e?"Everyone finished!":"Waiting for other players"),Object(s.c)("img",{css:Jt,src:"/images/".concat(e?"done":"waiting",".gif"),alt:""})),Object(s.c)("ul",null,Object.keys(o.teams).map((function(e){var t=o.teams[e],n=t.id,r=t.name,a=t.players;return Object(s.c)("li",{key:n,css:Kt},Object(s.c)("h1",{css:C.h3},r),Object(s.c)(gt,{players:a}))})))),Object(s.c)(Me.CTAs,null,!t&&Object(s.c)(oe,{hasBlock:!0,onClick:f},"Write your papers"),e&&l&&Object(s.c)(oe,{onClick:O},"Start Game!"),n&&Object(s.c)(oe,{variant:"danger",hasBlock:!0,onClick:j},"Write everyone's papers \ud83d\udca5")))}():Object(s.c)(Me,null,Object(s.c)(Me.Header,null),Object(s.c)(Me.Main,null,Object(s.c)("div",{css:Vt},l&&Object(s.c)("p",{css:[C.small,Ut]},"Ask your friends to join!"),Object(s.c)("span",{css:Yt(l)},Object(s.c)("h1",{css:C.h1},o.name),l&&Object(s.c)(oe,{variant:"icon",onClick:function(){return alert('Ask your friends to click "Join Game" and write "'.concat(o.name,'"'))}},Object(s.c)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object(s.c)("path",{d:"M4 12V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V12",stroke:v.primary,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),Object(s.c)("path",{d:"M16 6L12 2L8 6",stroke:v.primary,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),Object(s.c)("path",{d:"M12 2V15",stroke:v.primary,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))))),Object(s.c)("div",null,Object(s.c)("h2",{css:C.h3},"Lobby"),Object(s.c)(gt,{players:Object.keys(o.players),enableKickout:!0}))),Object(s.c)(Me.CTAs,null,Object.keys(o.players).length>=4?l?Object(s.c)(oe,{as:i.b,hasBlock:!0,to:"teams"},"Create teams!"):Object(s.c)("p",null,"Wait for ",o.players[o.creatorId].name," to create the teams."):Object(s.c)("p",{css:C.italic},"Waiting for your friends to join the game (Minimum 4).")))}function Xt(){var e=Object(l.a)(["\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  background: ",";\n  padding: 0 1.6rem 1.6rem;\n  box-shadow: 0 -2rem 2rem white; /* fadeout effect */\n\n  /* REVIEW THIS first-child emotion error */\n  > button:first-of-type {\n    margin-top: -1rem; /* to appear above the fadeout */\n  }\n\n  > *:not(:last-child) {\n    margin-bottom: 1.6rem;\n  }\n"]);return Xt=function(){return e},e}function $t(){var e=Object(l.a)(["\n  padding-bottom: 10rem; /* space for footer */\n"]);return $t=function(){return e},e}function Qt(){var e=Object(l.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-end;\n  margin-bottom: 1.6rem;\n\n  button {\n    color: ","; /* TODO DS */\n  }\n"]);return Qt=function(){return e},e}function en(){var e=Object(l.a)(["\n  margin-top: 0.8rem;\n  margin-bottom: 4rem;\n"]);return en=function(){return e},e}function tn(){var e=Object(l.a)(["\n  width: 100%;\n  background: ",";\n  border: none;\n  border-radius: 10px;\n  margin-top: 3.2rem;\n  padding: 6.4rem 1.6rem;\n  text-align: center;\n  font-size: inherit;\n  color: ",";\n\n  svg {\n    width: 100%;\n    margin-bottom: 4.8rem;\n  }\n"]);return tn=function(){return e},e}function nn(){var e=Object(l.a)(["\n  text-align: center;\n  margin: 2.4rem auto 0;\n"]);return nn=function(){return e},e}function rn(){var e=Object(l.a)([""]);return rn=function(){return e},e}function an(){var e=Object(l.a)(["\n  padding: 1.6rem;\n"]);return an=function(){return e},e}Object(s.b)(an());var cn=Object(s.b)(rn()),on=Object(s.b)(nn()),sn=Object(s.b)(tn(),v.primaryLight,v.primary),un=Object(s.b)(en()),ln=Object(s.b)(Qt(),v.primary),bn=(Object(s.b)($t()),Object(s.b)(Xt(),v.bg),function(){return Object(s.c)("h1",{css:[C.small,on]},"Create teams")});function dn(e){var t=Object(r.useContext)(B),n=t.teams,a=t.state.game,c=Object(r.useState)(n),o=Object(P.a)(c,2),u=o[0],l=o[1];function b(){var e=Object.keys(a.players),t=2,n=Array.from(Array(t),(function(){return[]})),r=Math.round(e.length/t),c={};function o(e,a){n[e].length===r?o(e===t-1?0:e+1,a):n[e].push(a)}for(var i=0,s=e;i<s.length;i++){var u=s[i];o(W(t-1),u)}n.forEach((function(e,t){c[t]={id:t,name:"Team ".concat(String.fromCharCode(t+65)),players:e}})),l(c)}function d(){t.setTeams(u)}return Object(s.c)(Me,null,Object(s.c)(Me.Header,null,Object(s.c)(oe,{css:cn,variant:"flat",as:i.b,to:"/game/".concat(a.name)},"Back to lobby")),u?Object(s.c)(r.Fragment,null,Object(s.c)(Me.Main,null,Object(s.c)(bn,null),Object.keys(u).map((function(e){var t=u[e],n=t.id,r=t.name,a=t.players;return Object(s.c)("div",{key:n,css:un},Object(s.c)("header",{css:ln},Object(s.c)("h1",{css:C.h1},r),Object(s.c)(oe,{onClick:function(){return function(e){var t=prompt("Choose a sweet name.",u[e].name);null!==t&&l((function(n){return Object(x.a)({},n,Object(k.a)({},e,Object(x.a)({},n[e],{name:t})))}))}(n)},variant:"flat"},"Rename")),Object(s.c)(gt,{players:a}))}))),Object(s.c)(Me.CTAs,null,Object(s.c)(oe,{variant:"light",onClick:b},"Create a different random team"),Object(s.c)(oe,{onClick:d},"Next: Write your 10 words!"))):Object(s.c)(Me.Main,null,Object(s.c)(bn,null),Object(s.c)("button",{css:sn,onClick:b},Object(s.c)("svg",{width:"72",height:"67",viewBox:"0 0 72 67",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object(s.c)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M39.8323 28.9923C45.7163 32.0128 44.6576 32.296 44.6576 43.7262V44.0548L44.7226 44.06C46.8679 44.247 48.4499 44.4165 49.7872 44.5581C51.0854 44.6965 52.1132 44.8061 52.9119 44.8702L46.2581 29.5079C44.8103 29.5585 42.86 29.3043 39.8323 28.9923ZM17.0651 2.52221L18.7998 12.0159C19.0124 13.1753 20.1248 13.9431 21.2805 13.7292C22.4394 13.5184 23.2071 12.4065 22.9945 11.245L21.2568 1.75234C21.0442 0.590822 19.9298 -0.175946 18.774 0.0348633C17.6162 0.24774 16.8505 1.36172 17.0651 2.52221ZM8.40118 18.6419C9.35673 19.3291 10.6941 19.11 11.3793 18.1469C12.0665 17.189 11.8457 15.8508 10.8912 15.1656L5.58508 11.3721C4.62642 10.6849 3.29112 10.905 2.6018 11.8629C1.91661 12.825 2.13331 14.1591 3.09506 14.8504L8.40118 18.6419ZM46.3644 40.0949C45.869 40.0949 45.4676 40.5031 45.4676 41.0084C45.4676 41.5117 45.869 41.9198 46.3644 41.9198C46.8607 41.9198 47.2621 41.5117 47.2621 41.0084C47.2621 40.5031 46.8607 40.0949 46.3644 40.0949ZM46.6316 34.2191C46.1342 34.2191 45.7328 34.6273 45.7328 35.1305C45.7328 35.6359 46.1342 36.044 46.6316 36.044C47.128 36.044 47.5284 35.6359 47.5284 35.1305C47.5284 34.6273 47.128 34.2191 46.6316 34.2191ZM47.7967 37.4742C47.3003 37.4742 46.8989 37.8824 46.8989 38.3857C46.8989 38.89 47.3003 39.2971 47.7967 39.2971C48.292 39.2971 48.6944 38.89 48.6944 38.3857C48.6944 37.8824 48.292 37.4742 47.7967 37.4742ZM49.2166 41.2585C48.7213 41.2585 48.3178 41.6667 48.3178 42.171C48.3178 42.6742 48.7213 43.0834 49.2166 43.0834C49.7109 43.0834 50.1143 42.6742 50.1143 42.171C50.1143 41.6667 49.7109 41.2585 49.2166 41.2585ZM60.7482 18.8589C60.062 18.7029 59.3428 19.727 59.1385 21.1458C58.9362 22.5667 59.3283 23.844 60.0135 24.001C60.6987 24.156 61.42 23.132 61.6233 21.7121C61.8245 20.2922 61.4334 19.0139 60.7482 18.8589ZM58.1396 33.4058C57.4451 33.3077 56.7196 34.3772 56.5164 35.7981C56.3131 37.218 56.7114 38.4508 57.4059 38.5469C58.1003 38.6471 58.8248 37.5765 59.028 36.1577C59.2303 34.7379 58.833 33.5061 58.1396 33.4058ZM46.1115 15.5407C46.8411 16.1194 46.1301 17.4577 44.5224 18.5324C42.9147 19.6071 41.018 20.0091 40.2874 19.4304C39.5568 18.8538 40.2688 17.5124 41.8776 16.4387C43.4853 15.3651 45.3809 14.962 46.1115 15.5407ZM34.1795 47.1798C33.582 46.8139 32.4913 47.5073 31.7442 48.7319C30.995 49.9544 30.8732 51.244 31.4717 51.6088C32.0703 51.9757 33.16 51.2812 33.9071 50.0577C34.6562 48.8352 34.779 47.5466 34.1795 47.1798ZM38.1214 41.0022C37.5539 40.5868 36.4858 41.242 35.7387 42.4655C34.9916 43.688 34.8451 45.0169 35.4126 45.4302C35.9791 45.8477 37.0472 45.1926 37.7953 43.9701C38.5424 42.7476 38.689 41.4176 38.1214 41.0022ZM29.9693 53.3242C29.3718 52.9584 28.2811 53.6539 27.5319 54.8764C26.7848 56.0989 26.663 57.3885 27.2605 57.7543C27.859 58.1202 28.9497 57.4257 29.6968 56.2022C30.446 54.9807 30.5678 53.6911 29.9693 53.3242ZM6.61699 41.0022C7.18661 40.5868 8.25155 41.242 8.99969 42.4655C9.74679 43.688 9.8923 45.0169 9.32577 45.4302C8.75719 45.8477 7.69122 45.1926 6.94308 43.9701C6.19494 42.7476 6.04944 41.4176 6.61699 41.0022ZM14.7681 45.4385C15.3656 45.0727 16.4573 45.7661 17.2045 46.9886C17.9516 48.2131 18.0754 49.5007 17.4759 49.8676C16.8773 50.2344 15.7887 49.539 15.0405 48.3165C14.2934 47.094 14.1706 45.8043 14.7681 45.4385ZM6.61699 48.89C7.18661 48.4746 8.25155 49.1277 8.99969 50.3533C9.74679 51.5758 9.8923 52.9036 9.32577 53.3191C8.75719 53.7355 7.69122 53.0793 6.94308 51.8568C6.19494 50.6333 6.04944 49.3034 6.61699 48.89ZM14.7681 53.3242C15.3656 52.9584 16.4573 53.6539 17.2045 54.8764C17.9516 56.0989 18.0754 57.3885 17.4759 57.7543C16.8773 58.1202 15.7887 57.4257 15.0405 56.2022C14.2934 54.9807 14.1706 53.6911 14.7681 53.3242ZM24.9934 28.4156C25.0512 29.1173 23.9346 29.6857 22.5023 29.6857C21.0711 29.6857 19.8637 29.1173 19.807 28.4156C19.7502 27.714 20.8647 27.1446 22.297 27.1446C23.7293 27.1446 24.9366 27.714 24.9934 28.4156ZM16.9589 33.0596C16.9589 33.7623 15.798 34.3307 14.3657 34.3307C12.9344 34.3307 11.7735 33.7623 11.7735 33.0596C11.7735 32.36 12.9344 31.7907 14.3657 31.7907C15.798 31.7907 16.9589 32.36 16.9589 33.0596ZM33.6996 33.2498C33.6996 33.9515 32.5408 34.5198 31.1085 34.5198C29.6752 34.5198 28.5143 33.9515 28.5143 33.2498C28.5143 32.5481 29.6752 31.9798 31.1085 31.9798C32.5408 31.9798 33.6996 32.5481 33.6996 33.2498ZM25.142 33.1289C25.2266 33.8285 24.1338 34.4392 22.7025 34.494C21.2712 34.5477 20.0412 34.0269 19.9586 33.3273C19.8751 32.6267 20.9668 32.017 22.3991 31.9622C23.8294 31.9074 25.0584 32.4303 25.142 33.1289ZM25.1316 37.5621C25.1884 38.2627 24.0729 38.8321 22.6396 38.8321C21.2073 38.8321 20.002 38.2627 19.9452 37.5621C19.8874 36.8594 21.0019 36.29 22.4342 36.29C23.8665 36.29 25.0728 36.8594 25.1316 37.5621ZM44.703 48.2431C44.8547 57.5249 44.8031 55.638 33.5108 61.7143C20.4096 68.7619 24.3216 68.7619 11.2193 61.7143C-1.62699 54.802 0.07464 58.1987 0.07464 43.7262C0.07464 29.2547 -1.62699 32.6515 11.2193 25.7381C20.2393 20.8875 21.1959 19.3746 25.1905 21.2037C26.3483 19.7693 27.9859 17.9061 30.154 15.1698C39.4041 3.50805 35.8099 5.05916 50.6272 6.34159C65.1587 7.60128 62.2528 5.15733 67.9686 18.4497C73.6823 31.741 73.9052 27.9485 64.8357 39.3839C55.6568 50.9557 59.1189 49.5214 44.703 48.2431ZM28.926 23.1971C29.539 23.5432 30.2107 23.9235 30.9496 24.3348L40.9344 25.1233L46.7173 25.5449C46.7358 25.5377 46.7565 25.5263 46.7761 25.5191L58.7732 11.0693C58.0529 11.0083 57.0757 10.9505 55.8177 10.875C54.1584 10.7769 52.1606 10.658 50.2671 10.4958C48.1207 10.3077 46.5398 10.1393 45.2014 9.99665C42.0737 9.6639 40.5103 9.4965 39.9531 9.73727C39.3958 9.97702 38.4434 11.2295 36.5354 13.7334C35.7181 14.806 34.7543 16.0729 33.4138 17.7615C32.2323 19.2516 30.9455 20.7872 29.8764 22.0603C29.5255 22.4789 29.2067 22.8591 28.926 23.1971ZM50.0535 27.8194L56.6835 43.1206C57.1592 42.5223 57.7392 41.7607 58.4533 40.8224C59.2716 39.7487 60.2354 38.4828 61.5748 36.7943C62.7564 35.3031 64.0421 33.7696 65.1122 32.4954C66.8861 30.3791 67.7931 29.2971 67.8478 28.9313C67.9097 28.5221 67.2782 27.1187 65.9842 24.2428C65.2784 22.6711 64.458 20.8482 64.1381 20.1021C63.8161 19.3539 63.0577 17.5042 62.4024 15.9107C62.0299 15.0044 61.7172 14.2418 61.452 13.6135C60.4686 15.0364 58.6824 16.9389 55.924 20.4173C52.9387 24.1798 51.3815 26.476 50.0535 27.8194ZM22.3372 41.8279C22.3578 41.8279 22.3785 41.8268 22.3991 41.8258L39.1255 33.3066C38.4877 32.9666 37.6137 32.5254 36.4858 31.9591C35.0019 31.2099 33.2126 30.3109 31.5398 29.4108C29.6411 28.3888 28.2573 27.6075 27.084 26.9472C24.3422 25.4013 22.9729 24.6293 22.3661 24.6293C21.7583 24.6293 20.3879 25.4013 17.6492 26.9472C16.4749 27.6075 15.089 28.3888 13.1913 29.4108C11.5176 30.3109 9.73028 31.2099 8.24329 31.9591C7.26297 32.452 6.47252 32.8499 5.86576 33.1681L17.191 39.1494L22.3372 41.8279ZM24.5022 45.237L24.5486 61.9168C25.2235 61.5561 26.0573 61.0849 27.084 60.5073C28.2573 59.8469 29.6411 59.0647 31.5398 58.0437C33.2126 57.1426 35.0019 56.2415 36.4858 55.4954C38.948 54.2563 40.21 53.6198 40.4061 53.3046C40.6238 52.9533 40.6001 51.4156 40.5464 48.2617C40.5186 46.5391 40.4855 44.5384 40.4855 43.7262C40.4855 42.914 40.5186 40.9133 40.5464 39.1917C40.5619 38.211 40.5784 37.3864 40.5815 36.7044C39.1151 37.622 36.7242 38.6626 32.8184 40.7635C28.5906 43.038 26.2523 44.5291 24.5022 45.237ZM20.3951 62.0294L20.3477 45.2856C18.5862 44.5963 16.2386 43.0907 11.9138 40.7635C7.9265 38.6192 5.55721 37.6024 4.14968 36.7013C4.15484 37.3823 4.16825 38.21 4.18373 39.1917C4.21263 40.9133 4.24565 42.914 4.24565 43.7262C4.24565 44.5384 4.21263 46.5391 4.18373 48.2617C4.13214 51.4156 4.10737 52.9533 4.3251 53.3046C4.5191 53.6198 5.78217 54.2563 8.24329 55.4954C9.73028 56.2415 11.5176 57.1426 13.1913 58.0437C15.089 59.0647 16.4749 59.8469 17.6492 60.5073C18.7843 61.148 19.6862 61.6554 20.3951 62.0294Z",fill:"#0038FF"})),"Click to create a random team!")))}function mn(){var e=Object(l.a)(["\n  padding: 1.6rem;\n"]);return mn=function(){return e},e}var fn=Object(s.b)(mn());function jn(){var e=Object(l.a)(["\n      display: flex;\n      justify-content: space-between;\n      padding: 0.8rem 0;\n      border-bottom: 1px solid #eee;\n    "]);return jn=function(){return e},e}function On(e){var t=Object(r.useContext)(B),n=t.state,a=n.profile,c=n.game,o=c.round,i="finished"===o.status,u=!["getReady","finished"].includes(o.status),l=N(u),b=c.creatorId===a.id,d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(x.a)({intervalTime:1e3,timer:6e4},t),a=Object(r.useState)(e),c=Object(P.a)(a,2),o=c[0],i=c[1],s=Object(r.useState)(f(o)),u=Object(P.a)(s,2),l=u[0],b=u[1],d=n.intervalTime,m=Object(r.useCallback)((function(e){return f(e)}),[]);function f(e){var t=n.timer-(Date.now()-e);return Math.max(0,t)}return Object(r.useEffect)((function(){if(console.log("useEffect - countdown"),0!==m(o)){var e=setInterval((function(){b((function(){var t=m(o);return t<=0?(clearInterval(e),0):t}))}),d);return function(){return clearInterval(e)}}}),[o,m,d]),[l,function(e){b(f(e)),i(e)}]}(u?o.status:null,{timer:13400}),m=Object(P.a)(d,2),f=m[0],j=m[1],O=Math.round(10),g=Math.round(f/1e3),p=o.current,h=Object(P.a)(o.turnWho,3),v=h[0],y=h[1],w=h[2],k=c.teams[v].players[w?0:y],M=k===a.id,S=Object(r.useState)(JSON.parse(window.localStorage.getItem("turn"))||{current:null,passed:[],guessed:[],wordsLeft:o.wordsLeft}),I=Object(P.a)(S,2),L=I[0],G=I[1],T=Object(r.useState)(null),F=Object(P.a)(T,2),Z=F[0],E=F[1];function H(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=L.current,n=[],r=null,a=!1;L.wordsLeft.length>0?(r="left",n=Object(pt.a)(L.wordsLeft)):L.passed.length>0?(r="passed",n=Object(pt.a)(L.passed)):a=!0,G((function(c){var o={},i=!a&&W(n.length-1),s=a?null:n[i];a||n.splice(i,1),e?(o.guessed=[].concat(Object(pt.a)(c.guessed),[t]),"left"===r?o.wordsLeft=n:"passed"===r&&(o.passed=n)):"left"===r?(o.wordsLeft=n,o.passed=[].concat(Object(pt.a)(c.passed),[t])):"passed"===r&&(n.length>0?o.passed=[].concat(Object(pt.a)(n),[t]):(s=t,o.passed=[]));var u=Object(x.a)({},c,{},o,{current:s});return window.localStorage.setItem("turn",JSON.stringify(u)),u}))}function A(e,t){G((function(n){var r={};if(t){var a=Object(pt.a)(n.passed),c=a.indexOf(e);a.splice(c,1),r.guessed=[].concat(Object(pt.a)(n.guessed),[e]),r.passed=a}else{var o=Object(pt.a)(n.guessed),i=o.indexOf(e);o.splice(i,1),r.guessed=o,r.passed=[].concat(Object(pt.a)(n.passed),[e])}var s=Object(x.a)({},n,{},r);return window.localStorage.setItem("turn",JSON.stringify(s)),s}))}function R(){t.startTurn()}function z(){t.finishTurn(L)}function _(){t.startNextRound()}function D(){E(!0)}Object(r.useEffect)((function(){!1===l&&u&&(console.log("useEffect:: hasCountdownStarted"),G((function(){var e={current:null,passed:[],guessed:[],wordsLeft:o.wordsLeft};if(0===o.wordsLeft.length)return window.localStorage.setItem("turn",JSON.stringify(e)),e;var t=Object(pt.a)(e.wordsLeft),n=W(t.length-1),r=t[n];return t.splice(n,1),e.current=r,e.wordsLeft=t,window.localStorage.setItem("turn",JSON.stringify(e)),e})),j(o.status))}),[j,o.status,l,u]);var V=function(e){var t=Object(s.b)(jn());return Object(s.c)(r.Fragment,null,Object(s.c)("h1",null,"timesup"===e?"Time's Up!":"No more words"),Object(s.c)("p",null,"Your team got ",Object(s.c)("strong",null,L.guessed.length)," papers!"),Object(s.c)("p",null,"Guessed:"),Object(s.c)("ul",null,L.guessed.map((function(e,n){return Object(s.c)("li",{css:t,key:"".concat(n,"_").concat(e)},"- ",e,Object(s.c)(oe,{variant:"flat","aria-label":"mark as not guessed",onClick:function(){return A(e,!1)}},"\u2705")," ")}))),Object(s.c)("p",null,"Passed:"),Object(s.c)("ul",null,L.passed.map((function(e,n){return Object(s.c)("li",{css:t,key:"".concat(n,"_").concat(e)},"- ",e,Object(s.c)(oe,{variant:"flat","aria-label":"mark as guessed",onClick:function(){return A(e,!0)}},"\u274c"))}))),Object(s.c)(oe,{hasBlock:!0,onClick:z},"Finish my turn"))},J=function(){var e={},t=c.score[o.current];Object.keys(c.teams).forEach((function(n){c.teams[n].players.forEach((function(r){var a=t[r]?t[r].length:0;e[n]=(e[n]||0)+a}))}));var n=Object.values(e),a=Object.keys(e)[n.indexOf(Math.max.apply(Math,Object(pt.a)(n)))];return Object(s.c)(r.Fragment,null,Object(s.c)("h1",null,"Round finished!"),Object(s.c)("div",null,"Winner: ",c.teams[a].name),Object(s.c)("ul",null,"Scores:",Object.keys(e).map((function(t){return Object(s.c)("li",{key:t},c.teams[t].name,": ",e[t])}))),Object(s.c)("br",null),o.current+1===c.settings.rounds.length?Object(s.c)(oe,{hasBlock:!0,onClick:D},"Show final winner!"):b?Object(s.c)(oe,{hasBlock:!0,onClick:_},"Start Round ",o.current+1+1," of ",c.settings.rounds.length):Object(s.c)("p",null,"Wait for admin (",c.players[c.creatorId].name,") to start next round."))};if(Z){var U={},Y=c.settings.rounds.map((function(e,t){return function(e){var t=c.score[e],n={},r={};return Object.keys(c.teams).forEach((function(e){c.teams[e].players.forEach((function(a){var c=t[a]?t[a].length:0;c>(r.score||0)&&(r={score:c,id:a}),n[e]=(n[e]||0)+c})),U[e]=(U[e]||0)+n[e]})),{arrayOfScores:Object.values(n),arrayOfTeamsId:Object.keys(n),bestPlayer:r}}(t)}));return console.log("final scores:",Y),Object(s.c)("div",{css:fn},Y.map((function(e,t){return Object(s.c)(r.Fragment,{key:t},Object(s.c)("p",null,"Round ",t,":"),Object(s.c)("ul",null,Object.keys(e.arrayOfTeamsId).map((function(t,n){return Object(s.c)("li",{key:t},c.teams[t].name,": ",e.arrayOfScores[n])}))),Object(s.c)("p",null,"Best Player: ",c.players[e.bestPlayer.id].name," (",e.bestPlayer.score,")"),Object(s.c)("br",null))})),Object(s.c)("br",null),Object(s.c)("p",null,"**Final Team Winner** ",function(){var e=Object.values(U),t=Object.keys(U),n=Math.max.apply(Math,Object(pt.a)(e)),r=t[e.indexOf(n)];return"".concat(c.teams[r].name,": (").concat(n,")")}()),Object(s.c)("br",null),Object(s.c)(oe,{onClick:t.leaveGame},"Leave game"))}return Object(s.c)(Me,null,Object(s.c)(Me.Header,null,Object(s.c)("strong",{css:C.h3},"[ \ud83d\udea7 \ud83d\ude48 It works, but it's ugly!]")),Object(s.c)(Me.Main,null,!u&&Object(s.c)("header",null,Object(s.c)("h1",null,"Round ",p+1),Object(s.c)("p",null,"Try to guess as many papers as possible in 1 minute. ",Object(s.c)("br",null),c.settings.rounds[p].description),Object(s.c)("br",null)),Object(s.c)("div",null,M?i?J():u?L.current||L.passed.length>0||L.wordsLeft.length>0?0===g?V("timesup"):Object(s.c)(r.Fragment,null,Object(s.c)("br",null),g>O?Object(s.c)("p",null,g-O,"..."):Object(s.c)(r.Fragment,null,Object(s.c)(oe,{hasBlock:!0,variant:"success",onClick:function(){return H(!0)}},"Got it!"),Object(s.c)("br",null),g,Object(s.c)("br",null)," - current: ",L.current,Object(s.c)("br",null)," - passed: ",L.passed.join(", "),Object(s.c)("br",null)," - guessed: ",L.guessed.join(", "),Object(s.c)("br",null)," - wordsLeft:"," ",Object(s.c)("span",{css:C.small},L.wordsLeft.join(", ")),Object(s.c)("br",null),Object(s.c)("br",null),!L.current||L.wordsLeft.length||L.passed.length?Object(s.c)(oe,{hasBlock:!0,variant:"light",onClick:function(){return H(!1)}},"Next paper"):Object(s.c)("p",null,"----- Last paper!! -----"))):V("nowords"):Object(s.c)(r.Fragment,null,Object(s.c)("h2",null,"It's your turn!"),"[IMG EXPLAINING]",w&&Object(s.c)("p",null,"Your team has one player less, so it's you again."),Object(s.c)("p",null,"You ready?"),Object(s.c)("br",null),Object(s.c)(oe,{hasBlock:!0,onClick:R},"Start now!")):i?J():function(){var e=c.teams[v].name,t=c.players[k].name;return Object(s.c)(r.Fragment,null,"Wait for your turn...",Object(s.c)("br",null),"Timer:"," ",g?g>O?Object(s.c)("p",null,g-O,"..."):f+"(ms)":0,Object(s.c)("br",null),Object(s.c)("p",null,"Turn: ",Number(o.turnCount).toString()),Object(s.c)("p",null,"Team: ",e),Object(s.c)("p",null,"Player: ",t))}())))}var gn=function(e){var t=Object(u.g)().id,n=Object(r.useContext)(B),a=n.state,c=a.profile,o=a.game,l=o&&o.name,b=c&&c.id,d=o&&o.players[b].isAfk,m=Object(r.useState)("loading"),f=Object(P.a)(m,2),j=f[0],O=f[1],g=N(l);Object(r.useEffect)((function(){return b?g&&!l?O("leftGame"):void(t===l?d?n.recoverPlayer():O("ready"):n.accessGame("join",t,(function(e){if(e){var t={notFound:function(){return"This game does not exist."},alreadyStarted:function(){return"This game had already started."},ups:function(){return"Ups, something went wrong! Error: ".concat(JSON.stringify(e))}},n=t[e]?e:"ups",r=t[n]();return console.warn("/game/:id - accessGame failed:",l,r,e),O(n)}}))):O("noProfile")}),[b,l,d]);var p=function(e){var t=e.children;return Object(s.c)(Me,null,Object(s.c)(Me.Header,null),Object(s.c)(Me.Main,null,t))};if(!b)return Object(s.c)(p,null,Object(s.c)("h1",null,"To join ",l," you need to create a profile before!"),Object(s.c)("br",null),Object(s.c)(oe,{as:i.b,to:"/"},"Create profile"));if("loading"===j)return Object(s.c)(p,null,Object(s.c)("h1",null,"Loading..."));if("notFound"===j)return Object(s.c)(p,null,Object(s.c)("h1",null,'Ups, the game "',t,"\" doesn't seem to exist!"),Object(s.c)("br",null),Object(s.c)(oe,{as:i.b,to:"/"},"Go Home"));if("leftGame"===j||!o)return Object(s.c)(u.a,{push:!0,to:"/"});if("ups"===j)return Object(s.c)(p,null,Object(s.c)("h1",null,"Ups, something went wrong while loading ",l,"."),Object(s.c)("br",null),Object(s.c)(oe,{as:i.b,to:"/"},"Go Home"));var h="/game/".concat(l);return Object(s.c)(u.d,null,Object(s.c)(u.b,{exact:!0,path:"/game/:id"},Object(s.c)(u.a,{to:"".concat(h,"/lobby")})),Object(s.c)(u.b,{path:"/game/:id/lobby"},o.hasStarted?Object(s.c)(u.a,{to:"".concat(h,"/playing")}):Object(s.c)(qt,null)),Object(s.c)(u.b,{path:"/game/:id/teams"},o.teams?Object(s.c)(u.a,{to:"".concat(h,"/lobby")}):Object(s.c)(dn,null)),Object(s.c)(u.b,{path:"/game/:id/playing"},o.hasStarted?Object(s.c)(On,null):Object(s.c)(u.a,{to:"".concat(h,"/lobby")})),Object(s.c)(u.b,{path:"*"},Object(s.c)(u.a,{to:"".concat(h,"/lobby")})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(i.a,null,a.a.createElement((function(e){return Object(s.c)(se,null,Object(s.c)(z,null,Object(s.c)(w,null),Object(s.c)(u.d,null,Object(s.c)(u.b,{path:"/game/:id"},Object(s.c)(gn,null)),Object(s.c)(u.b,{exact:!0,path:"/"},Object(s.c)(it,null)),Object(s.c)(u.b,{path:"*"},Object(s.c)(u.a,{to:"/"}))),Object(s.c)(ue.Consumer,null,(function(e){e.room;var t=e.modal,n=t.component,a=t.props||{};return Object(s.c)(r.Fragment,null,n&&Object(s.c)(n,a))}))))}),null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},62:function(e,t,n){e.exports=n(112)},67:function(e,t,n){},96:function(e,t){}},[[62,1,2]]]);
//# sourceMappingURL=main.6087faf9.chunk.js.map