{"version":3,"sources":["Theme.js","utils/index.js","store/wordsForEveryone.js","store/PapersContext.js","views/HomeStyles.js","components/ButtonStyles.js","components/Button.js","views/HomeNewPlayer.js","store/CoreContext.js","views/ModalStyles.js","views/ModalAccessGame.js","views/HomeSigned.js","views/HomeEntry.js","views/GameRoomStyles.js","components/ListPlayers.js","views/ModalWriteWordsStyles.js","views/ModalWriteWords.js","views/GameRoom/Lobby.js","views/GameRoom/TeamsStyles.js","views/GameRoom/Teams.js","views/GameRoom/PlayingStyles.js","views/GameRoom/Playing.js","views/GameRoom.js","serviceWorker.js","index.js","App.js"],"names":["colors","typography","h1","css","h2","h3","default","secondary","small","base","encodeImgToBase64","fileToLoad","callback","fileReader","FileReader","onload","fileLoadedEvent","target","result","readAsDataURL","getRandomInt","max","Math","floor","random","usePrevious","value","ref","useRef","useEffect","current","PapersContext","React","createContext","PapersContextComp","props","URL","window","location","host","state","socket","profile","id","localStorage","getItem","name","avatar","gameId","game","undefined","_removeGameFromState","bind","PapersAPI","open","recoverPlayer","updateProfile","accessGame","recoverGame","leaveGame","kickoutOfGame","setTeams","setWords","setWordsForEveyone","startGame","startTurn","finishTurn","startNextRound","this","GameRoom","matchPath","pathname","path","console","log","playedId","passedGameId","playerId","gameIdStored","connected","warn","io","query","transports","on","setState","variant","gameName","cb","Error","emit","player","setItem","actionType","payload","reaction","players","isAfk","newPlayers","creatorId","otherPlayers","Object","keys","reduce","acc","p","hasStarted","hasLeft","words","everyonesWords","teams","round","roundStatus","removeItem","score","ups","updateGame","toString","substr","Date","getTime","allWords","i","wordsForEveryone","papersTurn","close","err","errorMsgMap","notFound","empty","JSON","stringify","Provider","status","children","Component","PapersContextProvider","withRouter","container","body","logo","paragraph","step","input","Theme","avatarPlace","avatarImg","memeContainer","memeFace","memeBody","btnBack","ctas","variants","primary","bg","theme","text","success","light","flat","button","hasBlock","size","boxShadow","Button","as","restProps","Tag","Styles","defaultProps","memo","HomeNewPlayer","Papers","useContext","useState","avatarStatus","updateTempProfile","key","event","a","async","file","files","compressImg","maxWidthOrHeight","CurrentStep","0","role","aria-label","aria-hidden","1","type","autoFocus","defaultValue","onChange","e","2","className","accept","src","alt","width","height","viewBox","fill","xmlns","d","strokeWidth","strokeLinecap","strokeLinejoin","onClick","length","CoreContext","CoreContextProvider","modal","component","methods","setModal","closeModal","backdrop","box","btnClose","title","tip","errorMsg","ModalaccessGame","isAccessing","setAccessing","gameToRedirect","copy","join","description","create","to","ModalStyles","exists","Home","openModalAccessGame","ModalAccessGame","version","HomeEntry","storedGameId","push","header","cap","lobby","lobbyItem","lobbyAvatar","team","headerTeam","ListPlayers","enableKickout","otherProps","profileId","profileIsAdmin","map","playerName","match","isAdmin","wordsSubmitted","wordsStatus","confirm","handleKickOut","slides","slide","isActive","slideTitle","textarea","grayDark","sliderLabel","sliderNav","ModalWriteWords","refSlider","handleScrollDebounced","debounce","currentSlide","el","newSlide","scrollLeft","scrollWidth","setSlideIndex","setLocalWords","textareasHeight","setTextareasHeight","setErrorMsg","slideIndex","wordsGoal","settings","wordsCount","filter","word","wordsAreStored","focusTextareaAtSlide","index","childNodes","getElementsByTagName","focus","scrollTo","setTimeout","handleWordChange","wordsToEdit","scrollHeight","onScroll","papers","StylesIsActive","data-slide","style","placeholder","renderSliders","nextEmpty","findIndex","nextSlide","innerWidth","hasTeams","prevHasTeams","didSubmitAllWords","plId","openWords","handleStartClick","didEveryoneSubmittedTheirWords","every","didSubmitWords","writeAllShortCut","teamId","Typography","renderLobbyWritting","alert","Link","page","backBtn","cta","main","footer","PaperTeams","tempTeams","generateTeams","teamsNr","Array","from","limit","newTempTeams","alocateTo","teamIndex","forEach","String","fromCharCode","submitTeamsAndGoNext","prompt","handleRenameOf","fillRule","clipRule","Playing","hasStatusFinished","hasCountdownStarted","includes","prevHasCountdownStarted","initialDate","options","opts","intervalTime","timer","dateStarted","resetDateStarted","getTimeLeft","timeLeft","setTimeLeft","getTimeLeftCb","useCallback","datePivot","now","interval","setInterval","newTimeLeft","clearInterval","newDate","useCountdown","initialTimer","countdown","startCountdown","initialTimerSec","countdownSec","roundIndex","turnWho","turnTeamIndex","turnPlayerIndex","isOdd","turnPlayerId","isMyTurn","parse","passed","guessed","wordsLeft","setPapersTurn","isFinalScore","setFinalScore","pickNextPaper","hasGuessed","currentPaper","wordsToPick","pickingFrom","wordsEnded","wordsModified","wordIndex","nextPaper","splice","newState","togglePaper","paper","indexOf","handleFinishTurnClick","handleStartNextRoundClick","handleFinalWinnerClick","renderTurnScore","StyleLi","renderRoundScore","teamsScore","scorePlayers","playerScore","arrayOfScores","values","winnerId","rounds","teamsTotalScore","scores","bestPlayer","arrayOfTeamsId","getRoundScore","winnerScore","getFinalWinner","teamName","Number","turnCount","renderOtherTurnGetReady","urlGameId","useParams","profileIsAfk","setStatus","prevGameId","alreadyStarted","errrorType","exact","Boolean","hostname","ReactDOM","render","reload","Consumer","room","ModalComponent","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.ec3bf1f2.chunk.js","sourcesContent":["import { css } from '@emotion/core';\n\nexport const colors = {\n  grayDark: '#484F5D',\n  grayMedium: '#7F848E',\n  grayLight: '#E5E6E8',\n  primary: '#0038FF',\n  primaryLight: '#E6EBFF',\n  success: '#4EBD81',\n  bg: '#fff',\n};\n\nexport const typography = {\n  h1: css`\n    font-size: 4rem;\n    font-weight: 700;\n    line-height: 4.8rem;\n    display: block;\n  `,\n  h2: css`\n    font-size: 3.2rem;\n    font-weight: 700;\n  `,\n  h3: css`\n    font-size: 1.6rem;\n    font-weight: 700;\n  `,\n  default: css`\n    font-size: 1.6rem;\n  `,\n  secondary: css`\n    color: ${colors.grayMedium};\n  `,\n  small: css`\n    font-size: 1.4rem;\n  `,\n};\n\nexport const base = css`\n  background-color: white;\n  color: ${colors.grayDark};\n  ${typography.default};\n  line-height: 1.4;\n`;\n","import { useEffect, useState, useCallback, useRef } from 'react';\n\n// based on https://stackoverflow.com/a/23669825/4737729\nexport function encodeImgToBase64(fileToLoad, callback) {\n  const fileReader = new FileReader();\n\n  fileReader.onload = function(fileLoadedEvent) {\n    return callback(fileLoadedEvent.target.result);\n  };\n\n  fileReader.readAsDataURL(fileToLoad);\n}\n\nexport function createUniqueId(name) {\n  // Q: maybe this should be created on server instead.\n  // prettier-ignore\n  return `${name}_${Math.random().toString(36).substr(2, 9)}_${new Date().getTime()}`;\n}\n\nexport function getRandomInt(max) {\n  const min = 0;\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\n// React Hook\nexport function usePrevious(value) {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n}\n\nexport function useCountdown(initialDate, options = {}) {\n  const opts = {\n    intervalTime: 1000,\n    timer: 60000,\n    ...options,\n  };\n  const [dateStarted, resetDateStarted] = useState(initialDate);\n  const [timeLeft, setTimeLeft] = useState(getTimeLeft(dateStarted));\n  const intervalTime = opts.intervalTime;\n\n  const getTimeLeftCb = useCallback(datePivot => getTimeLeft(datePivot), []); // eslint-disable-line\n\n  function getTimeLeft(datePivot) {\n    const timeLeft = opts.timer - (Date.now() - datePivot);\n    return Math.max(0, timeLeft);\n  }\n\n  function restartCountdown(newDate) {\n    setTimeLeft(getTimeLeft(newDate));\n    resetDateStarted(newDate);\n  }\n\n  useEffect(() => {\n    console.log('useEffect - countdown');\n    const startedTimeLeft = getTimeLeftCb(dateStarted);\n    if (startedTimeLeft === 0) {\n      // useCountdown was called with a dateStarted already expired.\n      // Probably will use restartCountdown later in the road.\n      return;\n    }\n    const interval = setInterval(() => {\n      setTimeLeft(() => {\n        const newTimeLeft = getTimeLeftCb(dateStarted);\n\n        if (newTimeLeft <= 0) {\n          clearInterval(interval);\n\n          return 0;\n        }\n\n        return newTimeLeft;\n      });\n    }, intervalTime);\n\n    return () => clearInterval(interval);\n  }, [dateStarted, getTimeLeftCb, intervalTime]);\n\n  return [timeLeft, restartCountdown];\n}\n","export default [\n  [\n    'conservative',\n    'supplementary',\n    'wife',\n    'inquiry',\n    'compensation',\n    'able',\n    'future',\n    'mind',\n    'prevent',\n    'progressive',\n  ],\n  [\n    'inject',\n    'dark',\n    'doubt',\n    'constitutional',\n    'honor',\n    'shine',\n    'pause',\n    'shot',\n    'underline',\n    'appoint',\n  ],\n  [\n    'dance',\n    'captivate',\n    'runner',\n    'thoughtful',\n    'compose',\n    'dine',\n    'mask',\n    'admit',\n    'favor',\n    'advantage',\n  ],\n  [\n    'finance',\n    'guess',\n    'reduction',\n    'indirect',\n    'prosecution',\n    'seed',\n    'stem',\n    'problem',\n    'obstacle',\n    'explicit',\n  ],\n];\n","import React, { Component } from 'react';\nimport io from 'socket.io-client';\nimport { createUniqueId } from 'utils/index.js';\nimport { withRouter, matchPath } from 'react-router';\nimport wordsForEveryone from './wordsForEveryone.js';\n\nconst PapersContext = React.createContext({});\n\n// TODO - split into 2 Contexts: methods (mutations) and state (lookups)\nclass PapersContextComp extends Component {\n  constructor(props) {\n    super(props);\n    const isDev = process.env.NODE_ENV !== 'production';\n    // TIL: ðŸ¤¯ðŸ›ðŸ¤¬ (AFTER 1 DAY trying to make this work..)\n    // - on dev: https://github.com/socketio/socket.io/issues/1942#issuecomment-71443823\n    // - on Heroku:  https://github.com/socketio/socket.io-website/issues/139\n    // - Heroku still not working: https://stackoverflow.com/questions/59455178/heroku-websockets-issue-getting-connected-clients-always-empty\n    this.URL = isDev ? `${window.location.hostname}:5000` : window.location.host;\n\n    this.state = {\n      socket: null,\n      profile: {\n        id: window.localStorage.getItem('profile_id') || null,\n        name: window.localStorage.getItem('profile_name') || null,\n        avatar: window.localStorage.getItem('profile_avatar') || null,\n        // the last game this player tryed to access\n        gameId: window.localStorage.getItem('profile_gameId') || null,\n      },\n      game: undefined,\n      /* {\n        players: {},\n        state: {},\n        settings: {},\n      } */\n    };\n\n    this._removeGameFromState = this._removeGameFromState.bind(this);\n\n    this.PapersAPI = {\n      open: this.open.bind(this),\n\n      // pausePlayer: this.pausePlayer.bind(this),\n      recoverPlayer: this.recoverPlayer.bind(this),\n\n      updateProfile: this.updateProfile.bind(this),\n\n      accessGame: this.accessGame.bind(this),\n      recoverGame: this.recoverGame.bind(this),\n      leaveGame: this.leaveGame.bind(this),\n      kickoutOfGame: this.kickoutOfGame.bind(this),\n\n      setTeams: this.setTeams.bind(this),\n      setWords: this.setWords.bind(this),\n      setWordsForEveyone: this.setWordsForEveyone.bind(this),\n\n      startGame: this.startGame.bind(this),\n      startTurn: this.startTurn.bind(this),\n      finishTurn: this.finishTurn.bind(this),\n\n      startNextRound: this.startNextRound.bind(this),\n    };\n  }\n\n  // Maybe it should be a Route to ask for this,\n  // because it might want to retrieve different stuff...\n  // ex: on room/:id, i don't care about profile.gameId,\n  // instead I want the room/:id\n  componentDidMount() {\n    const { id, gameId } = this.state.profile;\n    const { location } = this.props;\n    const GameRoom = matchPath(location.pathname, {\n      path: '/game/:id',\n    });\n\n    console.log('PapersContext Mounted:', { playedId: id, gameId });\n\n    if (GameRoom) {\n      console.log('PapersContext - on a GameRoom');\n      // do nothing... GameRoom will do it.\n    } else {\n      console.log('PapersContext - on Home');\n      // somewhere else, handle it!\n      // Update: why not at Home.js?? Cant remember...\n      if (id && gameId) {\n        const socket = this.PapersAPI.open();\n        this.PapersAPI.recoverGame(socket);\n      }\n    }\n  }\n\n  // =========== Papers API\n\n  open(passedGameId) {\n    let socket = this.state.socket;\n    const { id: playerId, gameId: gameIdStored } = this.state.profile;\n    const gameId = passedGameId || gameIdStored;\n\n    if (socket) {\n      if (socket.connected) {\n        console.warn('socket already opened!', playerId);\n      } else {\n        console.warn('reconnecting socket...', playerId);\n        socket.open();\n      }\n      return socket;\n    }\n    console.log('creating a socket!', playerId);\n\n    socket = io(this.URL, {\n      query: { playerId, gameId },\n      // TIL: https://stackoverflow.com/a/57459569/4737729\n      transports: ['websocket'],\n    });\n\n    socket.on('connect', () => {\n      console.log('connected!', playerId);\n      // Q: Maybe all socket.on() should be added here ?\n    });\n\n    this.setState({ socket });\n\n    return socket;\n  }\n\n  accessGame(variant, gameName, cb) {\n    let socket = this.state.socket;\n\n    if (!socket) {\n      socket = this.PapersAPI.open(gameName);\n    }\n\n    // This can happen when the user left the chat.\n    // Maybe\n    // if(!socket.opened) {\n    //   socket.open();\n    //   socket.on('reopen', () => {\n    //     accessGame(variant, gameName, cb)\n    //   });\n    // }\n\n    console.log('accessGame', variant, gameName);\n\n    if (!gameName) {\n      return cb(new Error('Missing gameId'));\n    }\n\n    socket.emit(\n      `${variant}-game`,\n      {\n        gameId: gameName,\n        player: this.state.profile,\n      },\n      cb\n    );\n\n    socket.on('set-game', game => {\n      console.log('on set-game', game.name);\n      window.localStorage.setItem('profile_gameId', game.name);\n\n      this.setState(state => ({\n        profile: {\n          ...state.profile,\n          gameId: game.name,\n        },\n        game,\n      }));\n    });\n\n    socket.on('kickouted', () => {\n      // TODO - global status\n      console.log('Global Status: You were quickedout! ðŸ˜­');\n      this._removeGameFromState();\n    });\n\n    socket.on('leave-game', () => {\n      // TODO - global status\n      console.log('on leave-game');\n      this._removeGameFromState();\n    });\n\n    socket.on('game-update', (actionType, payload) => {\n      console.log('game-update:', actionType, { payload });\n\n      // Maybe actionType should be in past?\n      // player-added, player-paused, etc...\n      const reaction = {\n        'new-player': game => {\n          const player = payload;\n          return {\n            ...game,\n            players: {\n              ...game.players,\n              [player.id]: player,\n            },\n          };\n        },\n        'pause-player': game => {\n          const playerId = payload;\n\n          return {\n            ...game,\n            players: {\n              ...game.players,\n              [playerId]: {\n                ...game.players[playerId],\n                isAfk: true,\n              },\n            },\n          };\n        },\n        'recover-player': game => {\n          const playerId = payload;\n          return {\n            ...game,\n            players: {\n              ...game.players,\n              [playerId]: {\n                ...game.players[playerId],\n                isAfk: false,\n              },\n            },\n          };\n        },\n        'remove-player': game => {\n          const { playerId, creatorId } = payload;\n\n          const otherPlayers = Object.keys(game.players).reduce((acc, p) => {\n            return p === playerId ? acc : { ...acc, [p]: game.players[p] };\n          }, {});\n\n          let newPlayers;\n\n          if (!game.hasStarted) {\n            newPlayers = otherPlayers;\n          } else {\n            newPlayers = {\n              ...game.players,\n              [playerId]: {\n                ...game.players[playerId],\n                hasLeft: true,\n              },\n            };\n          }\n\n          return {\n            ...game,\n            creatorId,\n            players: newPlayers,\n          };\n        },\n        'set-words': game => {\n          const { words, playerId } = payload;\n\n          return {\n            ...game,\n            words: {\n              ...game.words,\n              [playerId]: words,\n            },\n          };\n        },\n        'set-words-for-everyone': game => {\n          const everyonesWords = payload;\n\n          return {\n            ...game,\n            words: everyonesWords,\n          };\n        },\n        'set-teams': game => {\n          const teams = payload;\n\n          return {\n            ...game,\n            teams,\n          };\n        },\n        'start-game': game => {\n          const { round, hasStarted } = payload;\n\n          return {\n            ...game,\n            hasStarted,\n            round,\n          };\n        },\n        'start-turn': game => {\n          const roundStatus = payload;\n\n          return {\n            ...game,\n            round: {\n              ...game.round,\n              ...roundStatus,\n            },\n          };\n        },\n        'finish-turn': game => {\n          window.localStorage.removeItem('turn'); // OPTIMIZE - maybe it shouldnt be here?\n          const { round, score } = payload;\n\n          return {\n            ...game,\n            round,\n            score,\n          };\n        },\n        'start-next-round': game => {\n          const round = payload;\n\n          return {\n            ...game,\n            round,\n          };\n        },\n        ups: game => {\n          console.log('Ups! game-update', payload);\n          return game;\n        },\n      };\n\n      const updateGame = reaction[actionType] || reaction.ups;\n\n      this.setState(state => ({\n        game: updateGame(state.game),\n      }));\n    });\n  }\n\n  // Not needed yet.\n  // pausePlayer() {\n  //   console.log('pausePlayer');\n  //   this.state.socket.emit('pause-player');\n  // }\n\n  recoverPlayer() {\n    console.log('recoverPlayer');\n    const socket = this.state.socket.open();\n    socket.emit('recover-player');\n  }\n\n  updateProfile(profile) {\n    const id = profile.id || createUniqueId(`player_${profile.name}`);\n\n    window.localStorage.setItem('profile_id', id);\n    window.localStorage.setItem('profile_name', profile.name);\n\n    if (profile.avatar) {\n      // its optional\n      window.localStorage.setItem('profile_avatar', profile.avatar);\n    }\n\n    this.setState(state => ({\n      profile: {\n        ...state.profile,\n        ...profile,\n        id,\n      },\n    }));\n  }\n\n  setWordsForEveyone() {\n    console.log('setWordsForEveyone()');\n    const allWords = Object.keys(this.state.game.players).reduce((acc, playerId, i) => {\n      return { ...acc, [playerId]: wordsForEveryone[i] };\n    }, {});\n\n    this.state.socket.emit('set-words-for-everyone', {\n      gameId: this.state.game.name,\n      playerId: this.state.profile.id,\n      allWords,\n    });\n  }\n\n  setWords(words, cb) {\n    console.log('setWords()');\n    this.state.socket.emit(\n      'set-words',\n      {\n        gameId: this.state.game.name,\n        playerId: this.state.profile.id,\n        words,\n      },\n      cb\n    );\n  }\n\n  setTeams(teams) {\n    console.log('setTeams()');\n    this.state.socket.emit('set-teams', {\n      gameId: this.state.game.name,\n      playerId: this.state.profile.id,\n      teams,\n    });\n  }\n\n  startGame() {\n    console.log('startGame()');\n    this.state.socket.emit('start-game', {\n      gameId: this.state.game.name,\n      playerId: this.state.profile.id,\n    });\n  }\n\n  startTurn() {\n    console.log('startTurn()');\n    this.state.socket.emit('start-turn', {\n      gameId: this.state.game.name,\n      playerId: this.state.profile.id,\n    });\n  }\n\n  finishTurn(papersTurn) {\n    console.log('finishTurn()');\n    this.state.socket.emit('finish-turn', {\n      gameId: this.state.game.name,\n      playerId: this.state.profile.id,\n      papersTurn,\n    });\n  }\n\n  startNextRound() {\n    console.log('startNextRound()');\n    this.state.socket.emit('start-next-round', {\n      gameId: this.state.game.name,\n      playerId: this.state.profile.id,\n    });\n  }\n\n  _removeGameFromState() {\n    console.log('removing game');\n    window.localStorage.removeItem('profile_gameId');\n    window.localStorage.removeItem('turn');\n\n    // Leaving room, there is no point in being connected\n    this.state.socket && this.state.socket.close();\n\n    this.setState(state => ({\n      profile: {\n        ...state.profile,\n        gameId: null,\n      },\n      game: null,\n      socket: null,\n    }));\n  }\n\n  recoverGame(socket = this.state.socket) {\n    socket.emit('recover-game', (err, result) => {\n      if (err) {\n        this._removeGameFromState();\n\n        const errorMsgMap = {\n          notFound: 'recover-game: Does not exist',\n          // dontBelong: 'recover-game: You dont belong to:',\n          empty: 'recover-game: No games stored',\n          ups: `recover-game: Ups!', ${JSON.stringify(err)}`,\n        };\n\n        console.warn(errorMsgMap[err] || errorMsgMap.ups);\n        return;\n      }\n\n      console.log('recover-game success:', result.game.name);\n\n      this.setState({\n        game: result.game,\n      });\n    });\n  }\n\n  leaveGame(playerId) {\n    console.log('leaveGame()');\n    this.state.socket.emit(\n      'leave-game',\n      {\n        gameId: this.state.game.name,\n        playerId: this.state.profile.id,\n      },\n      err => {\n        if (err) return true;\n        this._removeGameFromState();\n      }\n    );\n  }\n\n  kickoutOfGame(playerId) {\n    this.state.socket.emit(\n      'kickout-of-game',\n      {\n        gameId: this.state.game.name,\n        playerId,\n      },\n      err => {\n        if (err) return true;\n      }\n    );\n  }\n\n  render() {\n    return (\n      <PapersContext.Provider\n        value={{\n          status: this.state.status,\n          state: {\n            profile: this.state.profile,\n            game: this.state.game,\n          },\n          ...this.PapersAPI,\n        }}\n      >\n        {this.props.children}\n      </PapersContext.Provider>\n    );\n  }\n}\n\nexport const PapersContextProvider = withRouter(PapersContextComp);\n\nexport default PapersContext;\n","import { css } from '@emotion/core';\nimport * as Theme from 'Theme.js';\n\nexport const container = css`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  padding: 1.6rem 1.6rem 5rem; // confirm the bottom of iphoneX\n  height: 100vh;\n  overflow: hidden;\n`;\n\nexport const body = css`\n  text-align: center;\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`;\n\nexport const logo = css`\n  font-size: 8rem;\n`;\n\nexport const paragraph = css`\n  text-align: center;\n  margin: 0.8rem auto;\n`;\n\nexport const step = css`\n  margin-top: 10vh;\n  display: block;\n  text-align: center;\n  height: 100%;\n`;\n\nexport const input = css`\n  border: none;\n  border-bottom: 1px solid ${Theme.colors.grayLight};\n  border-radius: 0;\n  width: 100%;\n  text-align: center;\n  ${Theme.typography.h1}\n  margin-top: 4rem;\n\n  &:focus {\n    outline: none;\n    border-color: ${Theme.colors.primaryLight};\n  }\n`;\n\nexport const avatarPlace = css`\n  width: 80vw;\n  height: 80vw;\n  max-width: 30rem;\n  max-height: 30rem;\n  border-radius: 50%;\n  background-color: ${Theme.colors.primaryLight};\n  color: ${Theme.colors.primary};\n  margin: 2.4rem auto;\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  justify-content: center;\n\n  svg {\n    stroke: ${Theme.colors.primary};\n    display: inline-block;\n    margin-bottom: 1.6rem;\n  }\n`;\n\nexport const avatarImg = css`\n  ${avatarPlace}\n  border: none;\n  object-fit: cover;\n`;\n\nexport const memeContainer = css`\n  position: relative;\n  margin-bottom: 1rem;\n`;\n\nexport const memeFace = css`\n  ${avatarImg}\n  background: ${Theme.colors.grayDark};\n  margin: -0.6rem 0;\n  width: 7rem;\n  height: 7rem;\n  position: absolute;\n  top: 0;\n  left: 50%;\n  transform: translateX(-50%);\n`;\n\nexport const memeBody = css`\n  width: 20rem;\n  height: 20rem;\n  fill: ${Theme.colors.grayDark};\n`;\n\nexport const btnBack = css`\n  text-align: left;\n  position: absolute;\n  top: 0;\n  left: 0;\n`;\n\nexport const ctas = css`\n  & > button:not(:last-child),\n  & > a:not(:last-child) {\n    margin-right: 1.6rem;\n    margin-bottom: 1.6rem;\n  }\n`;\n\nexport const reconnect = css`\n  border-bottom: 1px solid ${Theme.colors.grayLight};\n  padding-bottom: 1.6rem;\n  margin-bottom: 1.6rem;\n`;\n","import { css } from '@emotion/core';\nimport * as theme from '../Theme.js';\n\nconst variants = {\n  primary: {\n    bg: theme.colors.primary,\n    text: theme.colors.bg,\n  },\n  success: {\n    bg: theme.colors.success,\n    text: theme.colors.bg,\n  },\n  light: {\n    bg: theme.colors.bg,\n    text: theme.colors.primary,\n  },\n  flat: {\n    bg: theme.colors.bg,\n    text: theme.colors.grayDark,\n  },\n};\n\nexport const button = ({ variant, hasBlock, size }) => {\n  // WTF So fucking ugly... how can people like css-in-js??? ðŸ˜­\n  return css`\n    ${\n      variant === 'flat'\n        ? `\n      padding: 0;\n      `\n        : `\n        padding: 1.6rem 2.4rem;\n        ${variant !== 'success' ? 'box-shadow: 0px 4px 16px rgba(0, 56, 255, 0.3);' : ''}\n  `\n    }\n    ${\n      size === 'sm'\n        ? `\n      padding: 0.5rem 1.5rem;\n      font-size: 1.4rem;\n  `\n        : ''\n    }\n    box-shadow: ${variants[variant].boxShadow};\n    border: none;\n    border-radius: 4.2rem;\n    font-size: inherit;\n    background-color: ${variants[variant].bg};\n    color: ${variants[variant].text};\n    width: ${hasBlock ? '100%' : ''};\n    display: ${hasBlock ? 'block' : 'inline-block'};\n    flex-shrink: 0;\n    text-align: center;\n    text-decoration: none;\n\n    &:focus {\n      outline: 0;\n      box-shadow: 0px 4px 16px rgba(0, 56, 255, 0.1), 0 0px 5px rgba(72, 79, 93, 0.4); /* verify with maggie */\n    }\n  `;\n};\n","/** @jsx jsx */\nimport { jsx } from '@emotion/core';\nimport { memo } from 'react';\nimport * as Styles from './ButtonStyles.js';\n\nfunction Button({ as, variant, hasBlock, size, children, ...restProps }) {\n  const Tag = as || 'button';\n  return (\n    <Tag {...restProps} css={Styles.button({ variant, hasBlock, size })}>\n      {children}\n    </Tag>\n  );\n}\n\nButton.defaultProps = {\n  variant: 'primary',\n};\n\nexport default memo(Button);\n","/** @jsx jsx */\nimport { jsx, css } from '@emotion/core';\nimport { Fragment, useContext, useState } from 'react';\nimport compressImg from 'browser-image-compression';\n\nimport * as Styles from './HomeStyles.js';\nimport * as Theme from 'Theme.js';\nimport Button from 'components/Button.js';\nimport PapersContext from 'store/PapersContext.js';\nimport { encodeImgToBase64 } from 'utils/index.js';\n\nexport default function HomeNewPlayer(props) {\n  const Papers = useContext(PapersContext);\n  const profile = Papers.state.profile;\n  const [state, setState] = useState({\n    name: profile.name,\n    avatar: profile.avatar,\n    step: 0,\n    avatarStatus: null, // loading || loaded || error?\n  });\n\n  const StepWelcome = () => (\n    <Fragment>\n      <span css={Styles.logo} role=\"img\" aria-label=\"logo\">\n        ðŸŽ²\n      </span>\n      <h1 css={Theme.typography.h1}>Welcome!</h1>\n      <p css={[Styles.paragraph, Theme.typography.secondary]}>\n        Papers is the perfect game for your{' '}\n        <span\n          css={css`\n            white-space: nowrap;\n          `}\n        >\n          dinner party\n        </span>\n        .\n        <br />\n        Made with love by Maggie and Sandy <span aria-hidden=\"true\">ðŸ˜Ž</span>\n      </p>\n    </Fragment>\n  );\n\n  const StepName = () => (\n    <label css={Styles.step}>\n      <span>How should we call you?</span>\n      <input\n        css={Styles.input}\n        type=\"text\"\n        autoFocus\n        defaultValue={state.name}\n        onChange={e => updateTempProfile('name', e)}\n      ></input>\n    </label>\n  );\n\n  const StepAvatar = () => (\n    <label css={Styles.step}>\n      <span>Add your avatar</span>\n      <input\n        type=\"file\"\n        className=\"sr-only\"\n        accept=\"image/png, image/jpeg\"\n        onChange={e => updateTempProfile('avatar', e)}\n      />\n      {state.avatar ? (\n        <img css={Styles.avatarImg} src={state.avatar} alt=\"Your avatar\" />\n      ) : (\n        <div css={Styles.avatarPlace}>\n          {/* prettier-ignore */}\n          <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M23 19C23 19.5304 22.7893 20.0391 22.4142 20.4142C22.0391 20.7893 21.5304 21 21 21H3C2.46957 21 1.96086 20.7893 1.58579 20.4142C1.21071 20.0391 1 19.5304 1 19V8C1 7.46957 1.21071 6.96086 1.58579 6.58579C1.96086 6.21071 2.46957 6 3 6H7L9 3H15L17 6H21C21.5304 6 22.0391 6.21071 22.4142 6.58579C22.7893 6.96086 23 7.46957 23 8V19Z\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n            <path d=\"M12 17C14.2091 17 16 15.2091 16 13C16 10.7909 14.2091 9 12 9C9.79086 9 8 10.7909 8 13C8 15.2091 9.79086 17 12 17Z\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n          </svg>\n          <span>Upload or take a picture</span>\n        </div>\n      )}\n      <span>\n        {state.avatarStatus === 'loading' && 'Loading...'}\n        {state.avatarStatus === 'loaded' && 'Looking good!'}\n      </span>\n    </label>\n  );\n\n  function updateTempProfile(key, event) {\n    return {\n      name: () => {\n        const name = event.target.value;\n        setState(state => ({ ...state, name }));\n      },\n      avatar: async () => {\n        const file = event.target.files[0];\n        setState(state => ({ ...state, avatarStatus: 'loading' }));\n\n        if (!file) return;\n\n        const compressedFile = await compressImg(file, {\n          maxWidthOrHeight: 500,\n        });\n\n        encodeImgToBase64(compressedFile, avatar => {\n          console.log('Avatar compressed!');\n          setState(state => ({ ...state, avatar, avatarStatus: 'loaded' }));\n        });\n      },\n    }[key]();\n  }\n\n  function goNextStep() {\n    setState(state => ({\n      ...state,\n      step: state.step + 1,\n    }));\n  }\n\n  function goBackStep() {\n    setState(state => ({\n      ...state,\n      step: state.step - 1,\n    }));\n  }\n\n  function setProfile() {\n    Papers.updateProfile({\n      name: state.name,\n      avatar: state.avatar,\n    });\n  }\n\n  const CurrentStep = {\n    0: StepWelcome,\n    1: StepName,\n    2: StepAvatar,\n  }[state.step];\n\n  return (\n    <div css={Styles.container}>\n      {state.step > 0 && (\n        <Button css={Styles.btnBack} variant=\"flat\" onClick={goBackStep}>\n          Go back\n        </Button>\n      )}\n      <div css={Styles.body}>\n        <CurrentStep />\n      </div>\n      <div css={Styles.ctas}>\n        {(state.step === 0 || (state.step === 1 && state.name && state.name.length > 3)) && (\n          <Button hasBlock onClick={goNextStep}>\n            Next\n          </Button>\n        )}\n        {state.step === 2 && (\n          <Button hasBlock onClick={setProfile}>\n            {state.avatar ? 'Finish' : 'Skip'}\n          </Button>\n        )}\n      </div>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\n\nconst CoreContext = React.createContext({});\n\nexport const CoreContextProvider = ({ children }) => {\n  const [state, setState] = useState({\n    modal: {\n      component: null, // Component - a modal\n      props: null, // Object - to be passed to the modal\n    },\n  });\n\n  function setModal(modal) {\n    setState(state => ({ ...state, modal }));\n  }\n\n  function closeModal() {\n    setState(state => ({ ...state, modal: {} }));\n  }\n\n  const methods = {\n    setModal,\n    closeModal,\n  };\n\n  return (\n    <CoreContext.Provider value={{ ...state, ...methods }}>\n      {children}\n    </CoreContext.Provider>\n  );\n};\n\nexport default CoreContext;\n","import { css } from '@emotion/core';\nimport * as Theme from 'Theme.js';\n\n// TODO: Create Modal component when design is finished.\nexport const modal = css`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 2;\n`;\n\nexport const backdrop = css`\n  position: absolute;\n  background: rgba(0, 0, 0, 0.7);\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n`;\n\nexport const box = css`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100%;\n  background-color: white;\n  padding: 1.6rem;\n`;\n\nexport const btnClose = css`\n  position: absolute;\n  top: 0;\n  right: 0;\n  z-index: 4;\n  height: 4.4rem;\n  width: 4.4rem;\n  border: none;\n  border-radius: 50%;\n  padding: 0;\n  cursor: pointer;\n  background-color: transparent;\n\n  &::before,\n  &::after {\n    content: '';\n    position: absolute;\n    display: block;\n    left: 50%;\n    top: 50%;\n    width: 1.2rem;\n    height: 0.2rem;\n    background-color: ${Theme.colors.grayDark};\n    transition: transform 0.15s ease-in;\n    transform: translate(-50%, -50%) rotate(45deg);\n    transform-origin: center center;\n    border-radius: 0.2rem;\n  }\n\n  &::after {\n    transform: translate(-50%, -50%) rotate(-45deg);\n  }\n\n  &:focus,\n  &:hover {\n    outline: none;\n\n    &::before {\n      transform: translate(-50%, -50%) rotate(0);\n    }\n\n    &::after {\n      transform: translate(-50%, -50%) rotate(0);\n    }\n  }\n`;\n\n// ---------------------\n\nexport const title = css`\n  margin-top: 0.8rem;\n`;\n\nexport const tip = css`\n  margin: 0.8rem 0 1.6rem;\n`;\n\n// TODO - dry same as HomeStyles.css\nexport const input = css`\n  border: none;\n  border-bottom: 1px solid ${Theme.colors.grayLight};\n  border-radius: 0;\n  width: 100%;\n  text-align: center;\n  ${Theme.typography.h1}\n  margin: 0 0 1.6rem;\n\n  &:focus {\n    outline: none;\n    border-color: ${Theme.colors.grayMedium};\n  }\n`;\n\nexport const errorMsg = css`\n  ${Theme.typography.small}\n  color: #da4040;\n  margin-bottom: 1.6rem;\n  text-align: center;\n`;\n","/** @jsx jsx */\nimport { jsx } from '@emotion/core';\nimport { useState, useContext } from 'react';\nimport { Redirect } from 'react-router-dom';\n\nimport * as ModalStyles from './ModalStyles.js';\nimport * as Theme from 'Theme.js';\nimport Button from 'components/Button.js';\nimport CoreContext from 'store/CoreContext.js';\nimport PapersContext from 'store/PapersContext.js';\n\n// TODO: Create Modal component when design is finished.\n\nexport default function ModalaccessGame({ variant }) {\n  const Papers = useContext(PapersContext);\n  const { closeModal } = useContext(CoreContext);\n  const [isAccessing, setAccessing] = useState(false);\n  const [state, setState] = useState({\n    gameName: null,\n    gameToRedirect: null,\n    errorMsg: null,\n  });\n\n  const handleInputChange = e => {\n    const gameName = e.target.value;\n\n    setState(state => ({\n      ...state,\n      gameName,\n    }));\n  };\n\n  const handleBtnClick = () => {\n    setAccessing(true);\n    Papers.accessGame(variant, state.gameName, err => {\n      if (err) {\n        // TODO - Move this out of here - redux(mapstatetoprops?)/context/wtv...\n        const errorMsgMap = {\n          exists: () => 'Choose other name.',\n          notFound: () => 'This game does not exist.',\n          ups: () => `Ups, something went wrong! Error: ${JSON.stringify(err)}`,\n        };\n\n        const errorMsg = (errorMsgMap[err] || errorMsgMap.ups)();\n\n        console.warn('accessGame() err:', errorMsg);\n        setAccessing(false);\n        return setState(state => ({ ...state, errorMsg }));\n      }\n\n      closeModal();\n    });\n  };\n\n  const copy = {\n    join: {\n      title: \"What's the party name?\",\n      description: 'Ask your friend for it!',\n    },\n    create: {\n      title: 'Give this party a name!',\n      description: 'Pick a short and sweet name.',\n    },\n  }[variant];\n\n  if (state.gameToRedirect) {\n    return <Redirect to={`/game/${state.gameToRedirect}`} />;\n  }\n\n  return (\n    <section css={ModalStyles.modal}>\n      <div css={ModalStyles.backdrop} onClick={closeModal} role=\"none\"></div>\n      <div css={ModalStyles.box}>\n        <button css={ModalStyles.btnClose} aria-label=\"Close Modal\" onClick={closeModal}></button>\n        <label>\n          <h1 css={[ModalStyles.title, Theme.typography.h3]}>{copy.title}</h1>\n          <p css={[Theme.typography.secondary, ModalStyles.tip]}>{copy.description}</p>\n          <input onChange={handleInputChange} css={ModalStyles.input} autoFocus type=\"text\"></input>\n          {state.errorMsg && <p css={ModalStyles.errorMsg}>{state.errorMsg}</p>}\n        </label>\n        {state.gameName && state.gameName.length >= 3 && (\n          <Button hasBlock onClick={handleBtnClick}>\n            Let's go!\n            {isAccessing && 'â³'}\n          </Button>\n        )}\n      </div>\n    </section>\n  );\n}\n\nModalaccessGame.defaultProps = {\n  /** String - 'join' || 'create' */\n  variant: 'join',\n};\n","/** @jsx jsx */\nimport { jsx } from '@emotion/core';\nimport { useContext } from 'react';\nimport compressImg from 'browser-image-compression';\n\nimport * as Styles from './HomeStyles.js';\nimport * as Theme from 'Theme.js';\nimport Button from 'components/Button.js';\nimport CoreContext from 'store/CoreContext.js';\nimport PapersContext from 'store/PapersContext.js';\nimport { encodeImgToBase64 } from 'utils/index.js';\nimport ModalAccessGame from 'views/ModalAccessGame.js';\n\nexport default function Home(props) {\n  const Papers = useContext(PapersContext);\n  const { setModal } = useContext(CoreContext);\n  const profile = Papers.state.profile;\n\n  const AvatarMeme = () => (\n    <div css={Styles.memeContainer} aria-hidden=\"true\">\n      <label>\n        <span className=\"sr-only\">Edit your avatar</span>\n        <input\n          type=\"file\"\n          className=\"sr-only\"\n          accept=\"image/png, image/jpeg\"\n          onChange={e => updateTempProfile('avatar', e)}\n        />\n        {profile.avatar ? (\n          <img css={Styles.memeFace} src={profile.avatar} alt=\"avatar preview\"></img>\n        ) : (\n          <div css={Styles.memeFace} />\n        )}\n      </label>\n      {/* prettier-ignore */}\n      <svg css={Styles.memeBody} version='1.0' xmlns='http://www.w3.org/2000/svg' width='458.667' height='518.667' viewBox='0 0 344 389'>\n          <path d='M163.5 31.8c-5.2 2.5-11.9 9.4-15.3 15.7-2.5 4.7-2.7 5.8-2.7 18 0 10.7.4 14.5 2.4 21.5 1.3 4.7 2.8 8.9 3.3 9.4.4.6.8 1.7.8 2.5.1.9.9 3.4 2 5.6 1.1 2.2 1.9 4.3 2 4.7 0 1.1 5.3 12.2 6 12.8 1.1.8 2 15.2 1.2 18.9-.6 2.9-1.7 3.9-6.7 6.6-7 3.7-13.4 10.7-22.1 24.5-7.2 11.3-10.7 18.8-13.8 29.5-4.4 15.1-10 32.4-11.7 36-1 2.2-3.7 9.2-6 15.5-4.1 11.1-4.2 11.9-4 22.5.2 16.4 1.8 19.5 9.5 19.5 3.1 0 3.8-.5 5.6-4 1.3-2.6 2-5.9 2-9.9 0-5.1-.5-6.6-3.6-11.2-4.3-6.5-4.4-5.8 5.2-29.4 1.8-4.4 4.2-11.4 5.4-15.5 1.2-4.1 2.7-9.3 3.5-11.5.8-2.2 2.6-8 4-12.9 4.9-16.1 23.3-44 30.3-45.8 2.2-.6 2.2-.5 2.3 16 0 16.7.4 21.5 3.3 43.2 1.5 11.5 5.4 28.2 10.2 43.8 1.8 5.5 2.4 9.4 2 11.6-.7 3.5-8.2 15.1-14.4 22.1-6.1 6.9-21.5 32.2-27.2 44.5-2.9 6.3-5.7 12.1-6.2 12.7-.6.7-3.1 1.3-5.7 1.3-4.4 0-21.9 5.8-24.8 8.2-.7.6-1.3 2-1.3 3.2 0 4.4 4.1 5.8 9 3.3 5.2-2.7 14.7-5.5 20.5-6.2 8.6-.9 9.2-1.2 10.8-5.3 1.5-3.8 8-18.1 9.8-21.7.5-1.1 3.4-5.8 6.4-10.5 3-4.7 6.8-10.8 8.4-13.5 1.6-2.8 5.3-7.7 8.1-11s6.8-8.6 8.8-11.7c2-3.2 3.9-5.8 4.2-5.8 1.4 0 6.1 19.1 8 32.5.5 3.8 1.6 9.7 2.4 13 .8 3.3 2.2 11.2 3.1 17.5 2.2 14.8 2.6 15.6 8.5 16.9 6.7 1.4 15.3 4.8 17.6 6.9 7.9 7.1 15.6 9.1 16.2 4.3.3-1.9-.9-3.7-5.2-7.7-3-2.9-7.3-5.8-9.3-6.4-2.1-.7-4.2-1.6-4.8-2-.5-.4-3.6-1.5-6.7-2.4-5.2-1.5-5.8-1.9-6.3-4.9-.3-1.7-1.2-6.8-2-11.2-6.8-39.9-10.1-53.7-15.3-64.6-1.7-3.5-4.2-10.5-5.7-15.4-1.4-5-3-10.1-3.5-11.5-.5-1.4-1.2-4.3-1.6-6.5-.4-2.2-1-4.5-1.4-5-.9-1.2-4.6-23.6-6-36.7-.5-5.4-1-17.7-1-27.5v-17.8l11.8-2.9c25.3-6.2 42.8-13.2 48.3-19.4 3.6-4 9.5-12.6 11.9-17.2.7-1.4 1.6-2.7 2-3 .4-.3 1.9-2.8 3.5-5.5 1.6-2.8 3.3-5.6 3.9-6.4.6-.7 3.6-7 6.7-13.9l5.6-12.6 5.1.3c4.6.2 5.5-.1 8.2-2.7 2.5-2.5 3-3.9 3-7.6 0-3.6-.5-5-2.7-7.1-1.5-1.4-3.6-2.5-4.6-2.5-1.4 0-1.7-.5-1.3-1.7 1.5-3.9 1.8-10.3.6-11.8-1.8-2.1-5.3-1.9-7.4.6-3.1 3.7-6.5 12-7.1 17.8-.8 7.1-3 14.1-6.5 21.1-1.5 3-4 8.3-5.6 11.7-1.6 3.5-3.2 6.3-3.6 6.3-.5 0-.8.5-.8 1 0 1-4.8 8.9-6.1 10-.3.3-2 3.1-3.8 6.2-4.2 7.6-11.7 15-16.6 16.6-2.2.7-4.9 1.7-6 2.2-6.4 2.6-22.9 8.1-28 9.4-3.3.8-7 1.8-8.2 2.2-2.2.6-2.3.5-2.3-7.1 0-4.7.5-8.1 1.3-9 .6-.7 3.5-3.7 6.3-6.6 21.8-23.1 31.2-49.1 24.3-67.3-2.4-6.5-9.3-14.1-16.3-18.1-6.5-3.7-18.2-4.5-24.1-1.7zm18 9.1c5.4 2.4 10.8 7.6 13.5 12.9 2 3.8 2.2 5.4 1.7 13-.6 10.7-3.3 17.8-11 29.5-4.5 6.8-15.4 19.7-16.6 19.7-.5 0-1.6-1.7-2.6-3.8-.9-2-2-4.6-2.5-5.7-4.9-10.8-9.1-27.6-9.7-39-.5-8.7-.3-10.6 1.5-14.5 2-4.4 9.2-12.2 12.2-13.3 3.2-1.1 9.7-.6 13.5 1.2z' />\n        </svg>\n    </div>\n  );\n\n  function openModalAccessGame(variant) {\n    setModal({\n      component: ModalAccessGame,\n      props: {\n        variant,\n      },\n    });\n  }\n\n  // TODO - Create a hook for profile?\n  function updateTempProfile(key, event) {\n    return {\n      // name: () => {\n      //   const name = event.target.value;\n      //   setState(state => ({ ...state, name }));\n      // },\n      avatar: async () => {\n        const file = event.target.files[0];\n\n        if (!file) return;\n\n        const compressedFile = await compressImg(file, {\n          maxWidthOrHeight: 500,\n        });\n\n        encodeImgToBase64(compressedFile, avatar => {\n          console.log('Avatar compressed!');\n          Papers.updateProfile({ name: profile.name, avatar });\n        });\n      },\n    }[key]();\n  }\n\n  return (\n    <div css={Styles.container}>\n      <div css={Styles.body}>\n        <div css={Styles.step}>\n          <AvatarMeme />\n          <h1>\n            Welcome\n            <span css={Theme.typography.h1}>{profile.name}</span>\n          </h1>\n        </div>\n      </div>\n      <div css={Styles.ctas}>\n        <Button hasBlock onClick={() => openModalAccessGame('join')}>\n          Join Game\n        </Button>\n        <Button hasBlock variant=\"light\" onClick={() => openModalAccessGame('create')}>\n          Create Game\n        </Button>\n      </div>\n    </div>\n  );\n}\n","/** @jsx jsx */\nimport { jsx } from '@emotion/core';\nimport { useContext } from 'react';\nimport { Redirect } from 'react-router-dom';\n\nimport PapersContext from 'store/PapersContext.js';\nimport HomeNewPlayer from 'views/HomeNewPlayer.js';\nimport HomeSigned from 'views/HomeSigned.js';\n\nexport default function HomeEntry(props) {\n  const Papers = useContext(PapersContext);\n  const storedGameId = Papers.state.game && Papers.state.game.name;\n\n  if (storedGameId) {\n    return <Redirect push to={`/game/${storedGameId}`} />;\n  }\n\n  return Papers.state.profile.name ? <HomeSigned /> : <HomeNewPlayer />;\n}\n","import * as Theme from 'Theme.js';\nimport { css } from '@emotion/core';\n\n// Same as HomeStyles.\nexport const container = css`\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  padding: 1.6rem 1.6rem 5rem; /* confirm the bottom of iphoneX */\n  height: 100vh;\n  overflow: hidden;\n`;\n\nexport const header = css`\n  text-align: center;\n  padding-top: 5vh;\n  margin-bottom: 4rem;\n`;\n\nexport const cap = css`\n  padding-bottom: 0.8rem;\n`;\n\nexport const lobby = css`\n  margin-top: 1.6rem;\n`;\n\nexport const lobbyItem = css`\n  display: flex;\n  align-items: center;\n  margin-bottom: 1.6rem; /* 2.4 too big */\n  justify-content: space-between;\n\n  span {\n    display: flex;\n    align-items: center;\n  }\n`;\n\nexport const lobbyAvatar = css`\n  width: 3.2rem; /* 5.6 too big */\n  height: 3.2rem;\n  object-fit: cover;\n  border-radius: 50%;\n  margin-right: 1.6rem;\n  background: ${Theme.colors.primaryLight};\n`;\n\n// same as TeamsStyles\nexport const team = css`\n  margin-top: 0.8rem;\n  margin-bottom: 4rem;\n`;\n\n// same as TeamsStyles\nexport const headerTeam = css`\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-end;\n  margin-bottom: 1.6rem;\n\n  button {\n    color: ${Theme.colors.primary}; /* TODO DS */\n  }\n`;\n","/** @jsx jsx */\nimport { jsx, css } from '@emotion/core';\nimport { useContext } from 'react';\n\nimport * as Styles from '../views/GameRoomStyles.js';\nimport Button from 'components/Button.js';\nimport PapersContext from 'store/PapersContext.js';\n\nfunction ListPlayers({ players, enableKickout = false, ...otherProps }) {\n  const Papers = useContext(PapersContext);\n  const { profile, game } = Papers.state;\n\n  const profileId = profile.id;\n  const profileIsAdmin = game.creatorId === profileId;\n\n  function handleKickOut(playerId) {\n    const playerName = game.players[playerId].name;\n    if (window.confirm(`You are about to kick ${playerName}. Are you sure?`)) {\n      Papers.kickoutOfGame(playerId);\n    }\n  }\n\n  return (\n    <ul aria-label=\"players list\" css={Styles.lobby} {...otherProps}>\n      {players.map((playerId, i) => {\n        if (!game.players[playerId]) {\n          const playerName = playerId.match('_(.*)_')[1];\n          return (\n            <li key={playerId} css={Styles.lobbyItem}>\n              <span>\n                <span css={Styles.lobbyAvatar} />\n                <span> {playerName} </span>\n                &nbsp;\n                <span>{' (Left) '}</span>\n              </span>\n            </li>\n          );\n        }\n\n        const { avatar, name, id, isAfk } = game.players[playerId];\n        const isAdmin = id === game.creatorId;\n        const wordsSubmitted = game.words[id];\n        const wordsStatus = game.teams && (!wordsSubmitted ? '[WRITTING]' : '[DONE]');\n\n        return (\n          <li key={id} css={Styles.lobbyItem}>\n            {/* TODO - avatar component!! */}\n            <span>\n              <img src={avatar} alt=\"\" css={Styles.lobbyAvatar} />\n              <span\n                css={css`\n                  ${id === profileId ? 'font-weight: 600;' : ''}\n                `}\n              >\n                {name}\n              </span>\n              &nbsp;\n              <span>\n                {isAdmin && ' (Admin) '}\n                {isAfk && ' âš ï¸ '}\n              </span>\n            </span>\n            <span>\n              {wordsStatus}\n              {enableKickout && profileIsAdmin && id !== profileId && (\n                <Button variant=\"light\" size=\"sm\" onClick={() => handleKickOut(id)}>\n                  Kick out\n                </Button>\n              )}\n            </span>\n          </li>\n        );\n      })}\n    </ul>\n  );\n}\n\nexport default ListPlayers;\n","import { css } from '@emotion/core';\nimport * as Theme from 'Theme.js';\n\nexport const header = css`\n  margin-right: 2rem;\n`;\n\nexport const slides = css`\n  width: 100vw;\n  display: flex;\n  overflow-x: auto;\n  scroll-behavior: smooth;\n  scroll-snap-type: x mandatory;\n  padding: 1.6rem 0;\n  margin-left: -1.6rem; /* page padding */\n\n  &::after {\n    /* make margin work on last slide */\n    content: '';\n    width: 1px;\n    display: block;\n    flex-shrink: 0;\n  }\n  /* &::-webkit-scrollbar {\n    width: 10px;\n    height: 10px;\n  }\n  &::-webkit-scrollbar-thumb {\n    background: black;\n    border-radius: 10px;\n  }\n  &::-webkit-scrollbar-track {\n    background: transparent;\n  } */\n`;\n\nexport const slide = css`\n  width: calc(100vw - (1.6rem * 2));\n  min-height: 14.5rem; /* space for 2 lines */\n  margin: 0 0.4rem;\n  padding: 0.8rem 3.2rem 3.2rem;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: center;\n  flex-shrink: 0;\n  scroll-snap-align: center;\n  background: ${Theme.colors.bg};\n  box-shadow: 0px 4px 16px rgba(0, 56, 255, 0.2);\n  opacity: 0.8;\n  transition: opacity 250ms;\n\n  &:first-child /* emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason */ {\n    margin-left: 1.6rem;\n  }\n\n  &:last-child {\n    margin-right: 1.6rem;\n  }\n`;\n\nexport const isActive = css`\n  opacity: 1;\n`;\n\nexport const slideTitle = css`\n  text-align: center;\n  ${Theme.typography.small}\n  ${Theme.typography.secondary}\n  opacity: 0.5;\n`;\n\nexport const textarea = css`\n  font-family: inherit;\n  font-size: inherit;\n  ${Theme.typography.h2}\n  color: ${Theme.typography.grayDark};\n  border: none;\n  border-radius: 0;\n  border-bottom: 1px solid ${Theme.colors.primaryLight};\n  width: 100%;\n  height: 4rem;\n  text-align: center;\n  resize: none;\n\n  &::-moz-placeholder,\n  &::-webkit-input-placeholder {\n    color: ${Theme.colors.grayMedium};\n  }\n\n  &:focus {\n    outline: none;\n    border-color: ${Theme.colors.primary};\n  }\n`;\n\nexport const sliderLabel = css`\n  text-align: center;\n  ${Theme.typography.secondary}\n  ${Theme.typography.small}\n  margin-top: -0.8rem;\n  margin-bottom: 2.4rem;\n`;\n\nexport const sliderNav = css`\n  display: flex;\n`;\n/* Don't need button navigation */\n/* @supports (scroll-snap-type) {\n} */\n","/** @jsx jsx */\nimport { jsx } from '@emotion/core';\nimport { useState, useEffect, useRef, useContext } from 'react';\n\nimport * as ModalStyles from './ModalStyles.js';\nimport * as Styles from './ModalWriteWordsStyles.js';\nimport * as Theme from 'Theme.js';\nimport Button from 'components/Button.js';\nimport CoreContext from 'store/CoreContext.js';\nimport PapersContext from 'store/PapersContext.js';\n// import { focusAndOpenKeyboard } from 'utils';\nimport debounce from 'lodash/debounce';\n\n// TODO: Create Modal component when design is finished.\nexport default function ModalWriteWords() {\n  const Papers = useContext(PapersContext);\n  const { game, profile } = Papers.state;\n  const refSlider = useRef(null);\n  // const setPapersWordsThrottled = useRef(throttle(q => Papers.setWords(q), 3000)).current;\n  const handleScrollDebounced = useRef(debounce(handleScroll, 250)).current;\n  const { closeModal } = useContext(CoreContext);\n  const [words, setLocalWords] = useState([]);\n  const [textareasHeight, setTextareasHeight] = useState({});\n\n  const [errorMsg, setErrorMsg] = useState(null);\n  const [slideIndex, setSlideIndex] = useState(0);\n\n  const wordsGoal = game.settings.words;\n  const wordsCount = words.filter(word => !!word).length;\n  const wordsAreStored = !!game.words[profile.id];\n\n  const focusTextareaAtSlide = index => {\n    const textarea = refSlider.current.childNodes[index].getElementsByTagName('textarea')[0];\n\n    if (textarea) {\n      textarea.focus(); // ðŸ› it doesnt work on IOS...\n    } else {\n      console.warn('textarea doesnt exist', refSlider.current, index, textarea);\n    }\n  };\n\n  useEffect(() => {\n    if (wordsAreStored) {\n      closeModal();\n    }\n  }, [wordsAreStored]); // eslint-disable-line\n\n  useEffect(() => {\n    refSlider.current.scrollTo(0, 0);\n    focusTextareaAtSlide(0);\n  }, [refSlider]);\n\n  useEffect(() => {\n    setTimeout(() => {\n      focusTextareaAtSlide(slideIndex);\n    }, 500); // give time to scroll finish\n  }, [slideIndex]);\n\n  const handleWordChange = (e, index) => {\n    const wordsToEdit = [...words];\n    wordsToEdit[slideIndex] = e.target.value;\n\n    setTextareasHeight({\n      // OPTIMIZE - recover 1 line when wrote too much\n      [index]: e.target.scrollHeight,\n    });\n\n    // OPTIMIZE - Maybe change state only on blur?\n    setLocalWords(wordsToEdit);\n  };\n\n  function handleClickNext() {\n    const nextEmpty = words.findIndex(word => !word);\n    const nextSlide = nextEmpty > -1 ? nextEmpty : slideIndex === 9 ? 0 : slideIndex + 1;\n    const gutter = 24; // page padding - TODO connect emotion here\n    refSlider.current.scrollTo((window.innerWidth - gutter) * nextSlide, 0);\n\n    setSlideIndex(nextSlide);\n  }\n\n  const handleSubmitClick = () => {\n    Papers.setWords(words, err => {\n      if (err) {\n        return setErrorMsg(`Something went wrong. ${JSON.stringify(err)}`);\n      }\n      closeModal();\n    });\n  };\n\n  function handleScroll(e, currentSlide) {\n    const el = refSlider.current;\n    const newSlide = Math.round((el.scrollLeft / el.scrollWidth) * 10);\n\n    if (currentSlide !== newSlide) {\n      setSlideIndex(newSlide);\n    }\n  }\n\n  function renderSliders() {\n    const papers = [];\n    for (let i = 0; i < wordsGoal; i++) {\n      const isActive = i === slideIndex;\n      const StylesIsActive = isActive && Styles.isActive;\n      const height = textareasHeight[i] || '4rem';\n\n      papers.push(\n        <div css={[Styles.slide, StylesIsActive]} data-slide={i + 1} key={i}>\n          <p css={Styles.slideTitle}>Paper nÂº {i + 1}</p>\n          <textarea\n            style={{ height }}\n            onChange={e => handleWordChange(e, i)}\n            placeholder=\"Write here...\"\n            {...(isActive ? { autoFocus: 'autofocus' } : {})}\n            css={Styles.textarea}\n          ></textarea>\n        </div>\n      );\n    }\n\n    return papers;\n  }\n\n  return (\n    <section css={ModalStyles.modal}>\n      <div css={ModalStyles.backdrop} onClick={closeModal} role=\"none\"></div>\n      <div css={ModalStyles.box}>\n        <button css={ModalStyles.btnClose} aria-label=\"Close Modal\" onClick={closeModal}></button>\n        <div>\n          {/* eslint-disable-next-line */}\n          <p css={[Theme.typography.small, Theme.typography.secondary, Styles.header]}>\n            ðŸ’¡Write down words or expressions. Make sure everyone knows what youâ€™re talking about!\n          </p>\n          <div\n            css={Styles.slides}\n            onScroll={e => handleScrollDebounced(e, slideIndex)}\n            ref={refSlider}\n          >\n            {renderSliders()}\n          </div>\n          {errorMsg && <p css={Styles.sliderLabel}>{errorMsg}</p>}\n          <p css={Styles.sliderLabel}>\n            {wordsCount} of {wordsGoal} done\n          </p>\n          <div css={Styles.sliderNav}>\n            {wordsCount !== 10 ? (\n              <Button hasBlock variant=\"light\" onClick={handleClickNext}>\n                Next paper\n              </Button>\n            ) : (\n              <Button hasBlock onClick={handleSubmitClick}>\n                All done!! Eheheheh\n              </Button>\n            )}\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n","/** @jsx jsx */\nimport { jsx, css } from '@emotion/core';\nimport { Fragment, useContext, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { typography as Typography } from 'Theme.js';\nimport * as Styles from '../GameRoomStyles.js';\nimport Button from 'components/Button.js';\nimport ListPlayers from 'components/ListPlayers.js';\nimport CoreContext from 'store/CoreContext.js';\nimport PapersContext from 'store/PapersContext.js';\nimport ModalWriteWords from 'views/ModalWriteWords.js';\nimport { usePrevious } from 'utils';\n\nexport default function GameRoom(props) {\n  const Papers = useContext(PapersContext);\n  const { setModal } = useContext(CoreContext);\n  const { profile, game } = Papers.state;\n  const profileId = profile.id;\n  const profileIsAdmin = game.creatorId === profileId;\n  const hasTeams = !!game.teams;\n  const prevHasTeams = usePrevious(!!game.teams);\n\n  const didSubmitAllWords = plId => {\n    return game.words[plId] && game.words[plId].length === game.settings.words;\n  };\n\n  useEffect(() => {\n    if (!prevHasTeams && hasTeams) {\n      // Teams were submited, force words!\n      !didSubmitAllWords(profileId) && openWords();\n    }\n  });\n\n  function openWords() {\n    setModal({\n      component: ModalWriteWords,\n    });\n  }\n\n  function setWordsForEveyone() {\n    Papers.setWordsForEveyone();\n  }\n\n  function handleStartClick() {\n    Papers.startGame();\n  }\n\n  function renderToTeamsCTA() {\n    if (Object.keys(game.players).length >= 4) {\n      return profileIsAdmin ? (\n        <Button as={Link} hasBlock to=\"teams\">\n          Create teams!\n        </Button>\n      ) : (\n        <p>Wait for {game.players[game.creatorId].name} to create the teams.</p>\n      );\n    } else {\n      return <p>Waiting for your friends to join the game (Minimum 4).</p>;\n    }\n  }\n\n  function renderLobbyStarting() {\n    return (\n      <Fragment>\n        <header css={Styles.header}>\n          {profileIsAdmin && <p css={[Typography.small, Styles.cap]}>Ask your friends to join!</p>}\n          <span\n            css={css`\n              display: flex;\n              justify-content: center;\n              ${profileIsAdmin && `padding-left: 3rem; /*emoji space*/`}\n            `}\n          >\n            <h1 css={Typography.h1}>{game.name}</h1>\n            {profileIsAdmin && (\n              <Button\n                variant=\"flat\"\n                aria-label=\"button share\"\n                // TODO - share group link\n                onClick={() =>\n                  alert(`Ask your friends to click \"Join Game\" and write \"${game.name}\"`)\n                }\n              >\n                {/* eslint-disable-next-line */} ðŸ”—\n              </Button>\n            )}\n          </span>\n        </header>\n        <div>\n          <h2 css={Typography.h3}>Lobby:</h2>\n          <ListPlayers players={Object.keys(game.players)} />\n        </div>\n        {renderToTeamsCTA()}\n      </Fragment>\n    );\n  }\n\n  function renderLobbyWritting() {\n    const didEveryoneSubmittedTheirWords = Object.keys(game.players).every(didSubmitAllWords);\n    const didSubmitWords = didSubmitAllWords(profileId);\n    const writeAllShortCut = !didEveryoneSubmittedTheirWords;\n\n    return (\n      <Fragment>\n        <header css={Styles.header}>\n          {!didEveryoneSubmittedTheirWords ? (\n            <span>Waiting for other players [GIF]</span>\n          ) : (\n            <span>Everyone finished! [GIF]</span>\n          )}\n        </header>\n        <div>\n          {Object.keys(game.teams).map(teamId => {\n            const { id, name, players } = game.teams[teamId];\n            return (\n              <div key={id} css={Styles.team}>\n                <header css={Styles.headerTeam}>\n                  <h1 css={Typography.h3}>{name}</h1>\n                </header>\n                <ListPlayers players={players} />\n              </div>\n            );\n          })}\n        </div>\n        {writeAllShortCut && (\n          <Button\n            hasBlock\n            onClick={setWordsForEveyone}\n            css={css`\n              margin-bottom: 1rem;\n            `}\n          >\n            {/* eslint-disable-next-line */}\n            Write everyone's papers ðŸ’¥\n          </Button>\n        )}\n        {!didSubmitWords && (\n          <Button hasBlock onClick={openWords}>\n            Write your papers\n          </Button>\n        )}\n        {didEveryoneSubmittedTheirWords && profileIsAdmin && (\n          <Button onClick={handleStartClick}>Start Game!</Button>\n        )}\n      </Fragment>\n    );\n  }\n\n  return (\n    <main css={Styles.container}>\n      {!game.teams ? renderLobbyStarting() : renderLobbyWritting()}\n    </main>\n  );\n}\n","import { css } from '@emotion/core';\nimport * as Theme from 'Theme.js';\n\nexport const page = css`\n  padding: 1.6rem;\n`;\n\nexport const backBtn = css``;\n\nexport const title = css`\n  text-align: center;\n  margin: 2.4rem auto 0;\n`;\n\nexport const cta = css`\n  width: 100%;\n  background: ${Theme.colors.primaryLight};\n  border: none;\n  border-radius: 10px;\n  margin-top: 3.2rem;\n  padding: 6.4rem 1.6rem;\n  text-align: center;\n  font-size: inherit;\n  color: ${Theme.colors.primary};\n\n  svg {\n    width: 100%;\n    margin-bottom: 4.8rem;\n  }\n`;\n\nexport const team = css`\n  margin-top: 0.8rem;\n  margin-bottom: 4rem;\n`;\n\nexport const headerTeam = css`\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-end;\n  margin-bottom: 1.6rem;\n\n  button {\n    color: ${Theme.colors.primary}; /* TODO DS */\n  }\n`;\n\nexport const main = css`\n  padding-bottom: 10rem; /* space for footer */\n`;\n\nexport const footer = css`\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  background: ${Theme.colors.bg};\n  padding: 0 1.6rem 1.6rem;\n  box-shadow: 0 -2rem 2rem white; /* fadeout effect */\n\n  /* REVIEW THIS first-child emotion error */\n  > button:first-of-type {\n    margin-top: -1rem; /* to appear above the fadeout */\n  }\n\n  > *:not(:last-child) {\n    margin-bottom: 1.6rem;\n  }\n`;\n","/** @jsx jsx */\nimport { jsx } from '@emotion/core';\nimport { Fragment, useState, useContext } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { typography as Typography } from 'Theme.js';\nimport * as Styles from './TeamsStyles.js';\nimport Button from 'components/Button.js';\nimport ListPlayers from 'components/ListPlayers.js';\nimport PapersContext from 'store/PapersContext.js';\nimport { getRandomInt } from 'utils';\n\nexport default function GameRoom(props) {\n  const Papers = useContext(PapersContext);\n  const PaperTeams = Papers.teams;\n  const { game } = Papers.state;\n  const [tempTeams, setTeams] = useState(PaperTeams);\n\n  function generateTeams() {\n    const players = Object.keys(game.players);\n    const teamsNr = 2; // TODO option\n    const teams = Array.from(Array(teamsNr), () => []);\n    const limit = Math.round(players.length / teamsNr);\n    const newTempTeams = {};\n\n    function alocateTo(teamIndex, playerId) {\n      if (teams[teamIndex].length === limit) {\n        const newIndex = teamIndex === teamsNr - 1 ? 0 : teamIndex + 1;\n        alocateTo(newIndex, playerId);\n      } else {\n        teams[teamIndex].push(playerId);\n      }\n    }\n\n    for (let playerId of players) {\n      const teamIndex = getRandomInt(teamsNr - 1);\n      alocateTo(teamIndex, playerId);\n    }\n\n    teams.forEach((team, index) => {\n      newTempTeams[index] = {\n        id: index,\n        name: `Team ${String.fromCharCode(index + 65)}`, // 65 = A\n        players: team,\n      };\n    });\n\n    setTeams(newTempTeams);\n  }\n\n  function handleRenameOf(teamId) {\n    var name = prompt('Choose a sweet name.', tempTeams[teamId].name);\n\n    if (name !== null) {\n      setTeams(teams => ({\n        ...teams,\n        [teamId]: {\n          ...teams[teamId],\n          name,\n        },\n      }));\n    }\n  }\n\n  function submitTeamsAndGoNext() {\n    Papers.setTeams(tempTeams);\n  }\n\n  function renderCTAs() {\n    return (\n      <button css={Styles.cta} onClick={generateTeams}>\n        {/* prettier-ignore */}\n        <svg width=\"72\" height=\"67\" viewBox=\"0 0 72 67\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n          <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M39.8323 28.9923C45.7163 32.0128 44.6576 32.296 44.6576 43.7262V44.0548L44.7226 44.06C46.8679 44.247 48.4499 44.4165 49.7872 44.5581C51.0854 44.6965 52.1132 44.8061 52.9119 44.8702L46.2581 29.5079C44.8103 29.5585 42.86 29.3043 39.8323 28.9923ZM17.0651 2.52221L18.7998 12.0159C19.0124 13.1753 20.1248 13.9431 21.2805 13.7292C22.4394 13.5184 23.2071 12.4065 22.9945 11.245L21.2568 1.75234C21.0442 0.590822 19.9298 -0.175946 18.774 0.0348633C17.6162 0.24774 16.8505 1.36172 17.0651 2.52221ZM8.40118 18.6419C9.35673 19.3291 10.6941 19.11 11.3793 18.1469C12.0665 17.189 11.8457 15.8508 10.8912 15.1656L5.58508 11.3721C4.62642 10.6849 3.29112 10.905 2.6018 11.8629C1.91661 12.825 2.13331 14.1591 3.09506 14.8504L8.40118 18.6419ZM46.3644 40.0949C45.869 40.0949 45.4676 40.5031 45.4676 41.0084C45.4676 41.5117 45.869 41.9198 46.3644 41.9198C46.8607 41.9198 47.2621 41.5117 47.2621 41.0084C47.2621 40.5031 46.8607 40.0949 46.3644 40.0949ZM46.6316 34.2191C46.1342 34.2191 45.7328 34.6273 45.7328 35.1305C45.7328 35.6359 46.1342 36.044 46.6316 36.044C47.128 36.044 47.5284 35.6359 47.5284 35.1305C47.5284 34.6273 47.128 34.2191 46.6316 34.2191ZM47.7967 37.4742C47.3003 37.4742 46.8989 37.8824 46.8989 38.3857C46.8989 38.89 47.3003 39.2971 47.7967 39.2971C48.292 39.2971 48.6944 38.89 48.6944 38.3857C48.6944 37.8824 48.292 37.4742 47.7967 37.4742ZM49.2166 41.2585C48.7213 41.2585 48.3178 41.6667 48.3178 42.171C48.3178 42.6742 48.7213 43.0834 49.2166 43.0834C49.7109 43.0834 50.1143 42.6742 50.1143 42.171C50.1143 41.6667 49.7109 41.2585 49.2166 41.2585ZM60.7482 18.8589C60.062 18.7029 59.3428 19.727 59.1385 21.1458C58.9362 22.5667 59.3283 23.844 60.0135 24.001C60.6987 24.156 61.42 23.132 61.6233 21.7121C61.8245 20.2922 61.4334 19.0139 60.7482 18.8589ZM58.1396 33.4058C57.4451 33.3077 56.7196 34.3772 56.5164 35.7981C56.3131 37.218 56.7114 38.4508 57.4059 38.5469C58.1003 38.6471 58.8248 37.5765 59.028 36.1577C59.2303 34.7379 58.833 33.5061 58.1396 33.4058ZM46.1115 15.5407C46.8411 16.1194 46.1301 17.4577 44.5224 18.5324C42.9147 19.6071 41.018 20.0091 40.2874 19.4304C39.5568 18.8538 40.2688 17.5124 41.8776 16.4387C43.4853 15.3651 45.3809 14.962 46.1115 15.5407ZM34.1795 47.1798C33.582 46.8139 32.4913 47.5073 31.7442 48.7319C30.995 49.9544 30.8732 51.244 31.4717 51.6088C32.0703 51.9757 33.16 51.2812 33.9071 50.0577C34.6562 48.8352 34.779 47.5466 34.1795 47.1798ZM38.1214 41.0022C37.5539 40.5868 36.4858 41.242 35.7387 42.4655C34.9916 43.688 34.8451 45.0169 35.4126 45.4302C35.9791 45.8477 37.0472 45.1926 37.7953 43.9701C38.5424 42.7476 38.689 41.4176 38.1214 41.0022ZM29.9693 53.3242C29.3718 52.9584 28.2811 53.6539 27.5319 54.8764C26.7848 56.0989 26.663 57.3885 27.2605 57.7543C27.859 58.1202 28.9497 57.4257 29.6968 56.2022C30.446 54.9807 30.5678 53.6911 29.9693 53.3242ZM6.61699 41.0022C7.18661 40.5868 8.25155 41.242 8.99969 42.4655C9.74679 43.688 9.8923 45.0169 9.32577 45.4302C8.75719 45.8477 7.69122 45.1926 6.94308 43.9701C6.19494 42.7476 6.04944 41.4176 6.61699 41.0022ZM14.7681 45.4385C15.3656 45.0727 16.4573 45.7661 17.2045 46.9886C17.9516 48.2131 18.0754 49.5007 17.4759 49.8676C16.8773 50.2344 15.7887 49.539 15.0405 48.3165C14.2934 47.094 14.1706 45.8043 14.7681 45.4385ZM6.61699 48.89C7.18661 48.4746 8.25155 49.1277 8.99969 50.3533C9.74679 51.5758 9.8923 52.9036 9.32577 53.3191C8.75719 53.7355 7.69122 53.0793 6.94308 51.8568C6.19494 50.6333 6.04944 49.3034 6.61699 48.89ZM14.7681 53.3242C15.3656 52.9584 16.4573 53.6539 17.2045 54.8764C17.9516 56.0989 18.0754 57.3885 17.4759 57.7543C16.8773 58.1202 15.7887 57.4257 15.0405 56.2022C14.2934 54.9807 14.1706 53.6911 14.7681 53.3242ZM24.9934 28.4156C25.0512 29.1173 23.9346 29.6857 22.5023 29.6857C21.0711 29.6857 19.8637 29.1173 19.807 28.4156C19.7502 27.714 20.8647 27.1446 22.297 27.1446C23.7293 27.1446 24.9366 27.714 24.9934 28.4156ZM16.9589 33.0596C16.9589 33.7623 15.798 34.3307 14.3657 34.3307C12.9344 34.3307 11.7735 33.7623 11.7735 33.0596C11.7735 32.36 12.9344 31.7907 14.3657 31.7907C15.798 31.7907 16.9589 32.36 16.9589 33.0596ZM33.6996 33.2498C33.6996 33.9515 32.5408 34.5198 31.1085 34.5198C29.6752 34.5198 28.5143 33.9515 28.5143 33.2498C28.5143 32.5481 29.6752 31.9798 31.1085 31.9798C32.5408 31.9798 33.6996 32.5481 33.6996 33.2498ZM25.142 33.1289C25.2266 33.8285 24.1338 34.4392 22.7025 34.494C21.2712 34.5477 20.0412 34.0269 19.9586 33.3273C19.8751 32.6267 20.9668 32.017 22.3991 31.9622C23.8294 31.9074 25.0584 32.4303 25.142 33.1289ZM25.1316 37.5621C25.1884 38.2627 24.0729 38.8321 22.6396 38.8321C21.2073 38.8321 20.002 38.2627 19.9452 37.5621C19.8874 36.8594 21.0019 36.29 22.4342 36.29C23.8665 36.29 25.0728 36.8594 25.1316 37.5621ZM44.703 48.2431C44.8547 57.5249 44.8031 55.638 33.5108 61.7143C20.4096 68.7619 24.3216 68.7619 11.2193 61.7143C-1.62699 54.802 0.07464 58.1987 0.07464 43.7262C0.07464 29.2547 -1.62699 32.6515 11.2193 25.7381C20.2393 20.8875 21.1959 19.3746 25.1905 21.2037C26.3483 19.7693 27.9859 17.9061 30.154 15.1698C39.4041 3.50805 35.8099 5.05916 50.6272 6.34159C65.1587 7.60128 62.2528 5.15733 67.9686 18.4497C73.6823 31.741 73.9052 27.9485 64.8357 39.3839C55.6568 50.9557 59.1189 49.5214 44.703 48.2431ZM28.926 23.1971C29.539 23.5432 30.2107 23.9235 30.9496 24.3348L40.9344 25.1233L46.7173 25.5449C46.7358 25.5377 46.7565 25.5263 46.7761 25.5191L58.7732 11.0693C58.0529 11.0083 57.0757 10.9505 55.8177 10.875C54.1584 10.7769 52.1606 10.658 50.2671 10.4958C48.1207 10.3077 46.5398 10.1393 45.2014 9.99665C42.0737 9.6639 40.5103 9.4965 39.9531 9.73727C39.3958 9.97702 38.4434 11.2295 36.5354 13.7334C35.7181 14.806 34.7543 16.0729 33.4138 17.7615C32.2323 19.2516 30.9455 20.7872 29.8764 22.0603C29.5255 22.4789 29.2067 22.8591 28.926 23.1971ZM50.0535 27.8194L56.6835 43.1206C57.1592 42.5223 57.7392 41.7607 58.4533 40.8224C59.2716 39.7487 60.2354 38.4828 61.5748 36.7943C62.7564 35.3031 64.0421 33.7696 65.1122 32.4954C66.8861 30.3791 67.7931 29.2971 67.8478 28.9313C67.9097 28.5221 67.2782 27.1187 65.9842 24.2428C65.2784 22.6711 64.458 20.8482 64.1381 20.1021C63.8161 19.3539 63.0577 17.5042 62.4024 15.9107C62.0299 15.0044 61.7172 14.2418 61.452 13.6135C60.4686 15.0364 58.6824 16.9389 55.924 20.4173C52.9387 24.1798 51.3815 26.476 50.0535 27.8194ZM22.3372 41.8279C22.3578 41.8279 22.3785 41.8268 22.3991 41.8258L39.1255 33.3066C38.4877 32.9666 37.6137 32.5254 36.4858 31.9591C35.0019 31.2099 33.2126 30.3109 31.5398 29.4108C29.6411 28.3888 28.2573 27.6075 27.084 26.9472C24.3422 25.4013 22.9729 24.6293 22.3661 24.6293C21.7583 24.6293 20.3879 25.4013 17.6492 26.9472C16.4749 27.6075 15.089 28.3888 13.1913 29.4108C11.5176 30.3109 9.73028 31.2099 8.24329 31.9591C7.26297 32.452 6.47252 32.8499 5.86576 33.1681L17.191 39.1494L22.3372 41.8279ZM24.5022 45.237L24.5486 61.9168C25.2235 61.5561 26.0573 61.0849 27.084 60.5073C28.2573 59.8469 29.6411 59.0647 31.5398 58.0437C33.2126 57.1426 35.0019 56.2415 36.4858 55.4954C38.948 54.2563 40.21 53.6198 40.4061 53.3046C40.6238 52.9533 40.6001 51.4156 40.5464 48.2617C40.5186 46.5391 40.4855 44.5384 40.4855 43.7262C40.4855 42.914 40.5186 40.9133 40.5464 39.1917C40.5619 38.211 40.5784 37.3864 40.5815 36.7044C39.1151 37.622 36.7242 38.6626 32.8184 40.7635C28.5906 43.038 26.2523 44.5291 24.5022 45.237ZM20.3951 62.0294L20.3477 45.2856C18.5862 44.5963 16.2386 43.0907 11.9138 40.7635C7.9265 38.6192 5.55721 37.6024 4.14968 36.7013C4.15484 37.3823 4.16825 38.21 4.18373 39.1917C4.21263 40.9133 4.24565 42.914 4.24565 43.7262C4.24565 44.5384 4.21263 46.5391 4.18373 48.2617C4.13214 51.4156 4.10737 52.9533 4.3251 53.3046C4.5191 53.6198 5.78217 54.2563 8.24329 55.4954C9.73028 56.2415 11.5176 57.1426 13.1913 58.0437C15.089 59.0647 16.4749 59.8469 17.6492 60.5073C18.7843 61.148 19.6862 61.6554 20.3951 62.0294Z\" fill=\"#0038FF\"/>\n        </svg>\n        Click to create a random team!\n      </button>\n    );\n  }\n\n  function renderTeams() {\n    return (\n      <Fragment>\n        <div css={Styles.main}>\n          {Object.keys(tempTeams).map(teamId => {\n            const { id, name, players } = tempTeams[teamId];\n\n            return (\n              <div key={id} css={Styles.team}>\n                <header css={Styles.headerTeam}>\n                  <h1 css={Typography.h1}>{name}</h1>\n                  <Button onClick={() => handleRenameOf(id)} variant=\"flat\">\n                    Rename\n                  </Button>\n                </header>\n                <ListPlayers players={players} />\n              </div>\n            );\n          })}\n        </div>\n        <div css={Styles.footer}>\n          <Button hasBlock variant=\"light\" onClick={generateTeams}>\n            Create a different random team\n          </Button>\n          <Button hasBlock onClick={submitTeamsAndGoNext}>\n            Next: Write your 10 words!\n          </Button>\n        </div>\n      </Fragment>\n    );\n  }\n\n  return (\n    <div css={Styles.page}>\n      <Button css={Styles.backBtn} variant=\"flat\" as={Link} to={`/game/${game.name}`}>\n        Back to lobby\n      </Button>\n      <h1 css={[Typography.small, Styles.title]}>Create teams</h1>\n      {!tempTeams ? renderCTAs() : renderTeams()}\n    </div>\n  );\n}\n","import { css } from '@emotion/core';\n// import * as Theme from 'Theme.js';\n\nexport const page = css`\n  padding: 1.6rem;\n`;\n","/** @jsx jsx */\nimport { jsx, css } from '@emotion/core';\nimport { Fragment, useState, useEffect, useContext } from 'react';\n// import { Link } from 'react-router-dom';\n\nimport { typography as Typography } from 'Theme.js';\nimport * as Styles from './PlayingStyles.js';\nimport Button from 'components/Button.js';\nimport PapersContext from 'store/PapersContext.js';\nimport { useCountdown, usePrevious, getRandomInt } from 'utils';\n\nexport default function Playing(props) {\n  const Papers = useContext(PapersContext);\n  const { profile, game } = Papers.state;\n  const round = game.round;\n  // const hasStatusGetReady = round.status === 'getReady';\n  const hasStatusFinished = round.status === 'finished';\n  const hasCountdownStarted = !['getReady', 'finished'].includes(round.status);\n  const prevHasCountdownStarted = usePrevious(hasCountdownStarted);\n  const profileIsAdmin = game.creatorId === profile.id;\n  const initialTimer = 10000; // TODO - from Papers.settings?\n  const timerReady = 3400;\n  const [countdown, startCountdown] = useCountdown(hasCountdownStarted ? round.status : null, {\n    timer: initialTimer + timerReady, // 400 - threshold for io connection.\n  }); // 3,2,1... go!\n  const initialTimerSec = Math.round(initialTimer / 1000);\n  const countdownSec = Math.round(countdown / 1000);\n  // const prevCountdownSec = usePrevious(countdownSec);\n  // const [timesUp, setTimesup] = useState(false);\n\n  const roundIndex = round.current;\n  const [turnTeamIndex, turnPlayerIndex, isOdd] = round.turnWho;\n  const turnPlayerId = game.teams[turnTeamIndex].players[isOdd ? 0 : turnPlayerIndex];\n  const isMyTurn = turnPlayerId === profile.id;\n\n  const [papersTurn, setPapersTurn] = useState(\n    JSON.parse(window.localStorage.getItem('turn')) || {\n      current: null, // String - current paper on the screen\n      passed: [], // [String] - papers passed\n      guessed: [], // [String] - papers guessed\n      wordsLeft: round.wordsLeft, // [String] - words left\n    }\n  );\n  const [isFinalScore, setFinalScore] = useState(null);\n\n  useEffect(() => {\n    // use false to avoid undefined on first render.\n    if (prevHasCountdownStarted === false && hasCountdownStarted) {\n      console.log('useEffect:: hasCountdownStarted');\n      pickFirstPaper();\n      startCountdown(round.status);\n    }\n  }, [startCountdown, round.status, prevHasCountdownStarted, hasCountdownStarted]); // eslint-disable-line\n\n  // TODO/NOTE: pickFirstPaper, pickNextPaper and togglePaper should be on PapersContext\n  function pickFirstPaper() {\n    setPapersTurn(() => {\n      const state = {\n        current: null,\n        passed: [],\n        guessed: [],\n        wordsLeft: round.wordsLeft,\n      };\n\n      if (round.wordsLeft.length === 0) {\n        // words ended\n        window.localStorage.setItem('turn', JSON.stringify(state));\n        return state;\n      }\n\n      const wordsToPick = [...state.wordsLeft];\n\n      const wordIndex = getRandomInt(wordsToPick.length - 1);\n      const nextPaper = wordsToPick[wordIndex];\n\n      wordsToPick.splice(wordIndex, 1);\n\n      state.current = nextPaper;\n      state.wordsLeft = wordsToPick;\n\n      window.localStorage.setItem('turn', JSON.stringify(state));\n      return state;\n    });\n  }\n\n  function pickNextPaper(hasGuessed = false) {\n    // OPTIMIZE/NOTE : paper & word mean the same.\n    const currentPaper = papersTurn.current;\n    let wordsToPick = [];\n    let pickingFrom = null; // 'left' || 'passed'\n    let wordsEnded = false;\n\n    if (papersTurn.wordsLeft.length > 0) {\n      pickingFrom = 'left';\n      wordsToPick = [...papersTurn.wordsLeft];\n    } else if (papersTurn.passed.length > 0) {\n      pickingFrom = 'passed';\n      wordsToPick = [...papersTurn.passed];\n    } else {\n      wordsEnded = true;\n    }\n\n    setPapersTurn(state => {\n      const wordsModified = {};\n      const wordIndex = !wordsEnded && getRandomInt(wordsToPick.length - 1);\n      let nextPaper = wordsEnded ? null : wordsToPick[wordIndex];\n\n      if (!wordsEnded) {\n        wordsToPick.splice(wordIndex, 1);\n      }\n\n      if (hasGuessed) {\n        wordsModified.guessed = [...state.guessed, currentPaper];\n\n        if (pickingFrom === 'left') {\n          wordsModified.wordsLeft = wordsToPick;\n        } else if (pickingFrom === 'passed') {\n          wordsModified.passed = wordsToPick;\n        }\n      } else {\n        if (pickingFrom === 'left') {\n          wordsModified.wordsLeft = wordsToPick;\n          wordsModified.passed = [...state.passed, currentPaper];\n        } else if (pickingFrom === 'passed') {\n          if (wordsToPick.length > 0) {\n            wordsModified.passed = [...wordsToPick, currentPaper];\n          } else {\n            // When it's the last word,\n            // but no stress because \"next paper\" button is disable\n            nextPaper = currentPaper;\n            wordsModified.passed = [];\n          }\n        }\n      }\n\n      const newState = {\n        ...state,\n        ...wordsModified,\n        current: nextPaper,\n      };\n\n      window.localStorage.setItem('turn', JSON.stringify(newState));\n      return newState;\n    });\n  }\n\n  function togglePaper(paper, hasGuessed) {\n    setPapersTurn(state => {\n      const wordsModified = {};\n      if (hasGuessed) {\n        const wordsToPick = [...state.passed];\n        const wordIndex = wordsToPick.indexOf(paper);\n        wordsToPick.splice(wordIndex, 1);\n\n        wordsModified.guessed = [...state.guessed, paper];\n        wordsModified.passed = wordsToPick;\n      } else {\n        const wordsToPick = [...state.guessed];\n        const wordIndex = wordsToPick.indexOf(paper);\n        wordsToPick.splice(wordIndex, 1);\n\n        wordsModified.guessed = wordsToPick;\n        wordsModified.passed = [...state.passed, paper];\n      }\n\n      const newState = {\n        ...state,\n        ...wordsModified,\n      };\n\n      window.localStorage.setItem('turn', JSON.stringify(newState));\n      return newState;\n    });\n  }\n\n  function handleStartClick() {\n    Papers.startTurn();\n    // pickNextPaper();\n    // setFakeHasCountdownStarted(true);\n    // startCountdown(Date.now());\n  }\n\n  function handleFinishTurnClick() {\n    // setPapersTurn({}); should it be done here?\n    Papers.finishTurn(papersTurn);\n  }\n\n  function handleStartNextRoundClick() {\n    Papers.startNextRound();\n  }\n\n  function handleFinalWinnerClick() {\n    setFinalScore(true);\n  }\n\n  // ----------------\n\n  const renderMyTurnGetReady = () => {\n    return (\n      <Fragment>\n        <h2>It's your turn!</h2>\n        [IMG EXPLAINING]\n        {isOdd && <p>Your team has one player less, so it's you again.</p>}\n        <p>You ready?</p>\n        <br />\n        <Button hasBlock onClick={handleStartClick}>\n          Start now!\n        </Button>\n      </Fragment>\n    );\n  };\n\n  const renderTurnScore = type => {\n    const StyleLi = css`\n      display: flex;\n      justify-content: space-between;\n      padding: 0.8rem 0;\n      border-bottom: 1px solid #eee;\n    `;\n    return (\n      <Fragment>\n        <h1>{type === 'timesup' ? \"Time's Up!\" : 'No more words'}</h1>\n        <p>\n          Your team got <strong>{papersTurn.guessed.length}</strong> papers!\n        </p>\n        <p>Guessed:</p>\n        <ul>\n          {papersTurn.guessed.map((paper, i) => (\n            <li css={StyleLi} key={`${i}_${paper}`}>\n              - {paper}\n              <Button\n                variant=\"flat\"\n                aria-label=\"mark as not guessed\"\n                onClick={() => togglePaper(paper, false)}\n              >\n                {/* eslint-disable-next-line */}âœ…\n              </Button>{' '}\n            </li>\n          ))}\n        </ul>\n        <p>Passed:</p>\n        <ul>\n          {papersTurn.passed.map((paper, i) => (\n            <li css={StyleLi} key={`${i}_${paper}`}>\n              - {paper}\n              <Button\n                variant=\"flat\"\n                aria-label=\"mark as guessed\"\n                onClick={() => togglePaper(paper, true)}\n              >\n                {/* eslint-disable-next-line */}âŒ\n              </Button>\n            </li>\n          ))}\n        </ul>\n        <Button hasBlock onClick={handleFinishTurnClick}>\n          Finish my turn\n        </Button>\n      </Fragment>\n    );\n  };\n\n  const renderRoundScore = () => {\n    const teamsScore = {};\n    const scorePlayers = game.score[round.current];\n\n    Object.keys(game.teams).forEach(teamId => {\n      game.teams[teamId].players.forEach(playerId => {\n        const playerScore = scorePlayers[playerId] ? scorePlayers[playerId].length : 0;\n        teamsScore[teamId] = (teamsScore[teamId] || 0) + playerScore;\n      });\n    });\n\n    const arrayOfScores = Object.values(teamsScore);\n    const arrayOfTeamsId = Object.keys(teamsScore);\n    const winnerIndex = arrayOfScores.indexOf(Math.max(...arrayOfScores));\n    const winnerId = arrayOfTeamsId[winnerIndex];\n\n    return (\n      <Fragment>\n        <h1>Round finished!</h1>\n        <div>Winner: {game.teams[winnerId].name}</div>\n        <ul>\n          Scores:\n          {Object.keys(teamsScore).map(teamId => (\n            <li key={teamId}>\n              {game.teams[teamId].name}: {teamsScore[teamId]}\n            </li>\n          ))}\n        </ul>\n        <br />\n        {round.current + 1 === game.settings.rounds.length ? (\n          <Button hasBlock onClick={handleFinalWinnerClick}>\n            Show final winner!\n          </Button>\n        ) : profileIsAdmin ? (\n          <Button hasBlock onClick={handleStartNextRoundClick}>\n            Start Round {round.current + 1 + 1} of {game.settings.rounds.length}\n          </Button>\n        ) : (\n          <p>Wait for admin ({game.players[game.creatorId].name}) to start next round.</p>\n        )}\n      </Fragment>\n    );\n  };\n\n  const renderGo = () => {\n    const stillHasWords =\n      papersTurn.current || papersTurn.passed.length > 0 || papersTurn.wordsLeft.length > 0;\n\n    if (!stillHasWords) {\n      return renderTurnScore('nowords');\n    }\n\n    if (countdownSec === 0) {\n      return renderTurnScore('timesup');\n    }\n\n    return (\n      <Fragment>\n        <br />\n        {countdownSec > initialTimerSec ? (\n          // 3, 2, 1...\n          <p>{countdownSec - initialTimerSec}...</p>\n        ) : (\n          <Fragment>\n            <Button hasBlock variant=\"success\" onClick={() => pickNextPaper(true)}>\n              Got it!\n            </Button>\n            <br />\n            {countdownSec}\n            <br /> - current: {papersTurn.current}\n            <br /> - passed: {papersTurn.passed.join(', ')}\n            <br /> - guessed: {papersTurn.guessed.join(', ')}\n            <br /> - wordsLeft:{' '}\n            <span css={Typography.small}>{papersTurn.wordsLeft.join(', ')}</span>\n            <br />\n            <br />\n            {papersTurn.current && !papersTurn.wordsLeft.length && !papersTurn.passed.length ? (\n              <p>----- Last paper!! -----</p>\n            ) : (\n              <Button hasBlock variant=\"light\" onClick={() => pickNextPaper(false)}>\n                Next paper\n              </Button>\n            )}\n          </Fragment>\n        )}\n      </Fragment>\n    );\n  };\n\n  const renderOtherTurnGetReady = () => {\n    const teamName = game.teams[turnTeamIndex].name;\n    const playerName = game.players[turnPlayerId].name;\n    return (\n      <Fragment>\n        Wait for your turn...\n        <br />\n        Timer:{' '}\n        {countdownSec ? (\n          countdownSec > initialTimerSec ? (\n            // 3, 2, 1...\n            <p>{countdownSec - initialTimerSec}...</p>\n          ) : (\n            countdown + '(ms)'\n          )\n        ) : (\n          0\n        )}\n        <br />\n        <p>Turn: {Number(round.turnCount).toString()}</p>\n        <p>Team: {teamName}</p>\n        <p>Player: {playerName}</p>\n      </Fragment>\n    );\n  };\n\n  if (isFinalScore) {\n    const teamsTotalScore = {};\n\n    const getRoundScore = roundIndex => {\n      const scorePlayers = game.score[roundIndex];\n      let teamsScore = {};\n      let bestPlayer = {};\n\n      Object.keys(game.teams).forEach(teamId => {\n        game.teams[teamId].players.forEach(playerId => {\n          const playerScore = scorePlayers[playerId] ? scorePlayers[playerId].length : 0;\n          if (playerScore > (bestPlayer.score || 0)) {\n            bestPlayer = { score: playerScore, id: playerId };\n          }\n          teamsScore[teamId] = (teamsScore[teamId] || 0) + playerScore;\n        });\n\n        teamsTotalScore[teamId] = (teamsTotalScore[teamId] || 0) + teamsScore[teamId];\n      });\n\n      const arrayOfScores = Object.values(teamsScore);\n      const arrayOfTeamsId = Object.keys(teamsScore);\n      const winnerIndex = arrayOfScores.indexOf(Math.max(...arrayOfScores));\n      // const winnerId = arrayOfTeamsId[winnerIndex];\n\n      return {\n        arrayOfScores,\n        arrayOfTeamsId,\n        bestPlayer,\n      };\n    };\n\n    const scores = game.settings.rounds.map((round, index) => getRoundScore(index));\n\n    const getFinalWinner = () => {\n      const arrayOfScores = Object.values(teamsTotalScore);\n      const arrayOfTeamsId = Object.keys(teamsTotalScore);\n      const winnerScore = Math.max(...arrayOfScores);\n      const winnerIndex = arrayOfScores.indexOf(winnerScore);\n      const winnerId = arrayOfTeamsId[winnerIndex];\n\n      return `${game.teams[winnerId].name}: (${winnerScore})`;\n    };\n\n    console.log('final scores:', scores);\n    return (\n      <div css={Styles.page}>\n        {scores.map((round, index) => {\n          return (\n            <Fragment key={index}>\n              <p>Round {index}:</p>\n              <ul>\n                {Object.keys(round.arrayOfTeamsId).map((teamId, index) => (\n                  <li key={teamId}>\n                    {game.teams[teamId].name}: {round.arrayOfScores[index]}\n                  </li>\n                ))}\n              </ul>\n              <p>\n                Best Player: {game.players[round.bestPlayer.id].name} ({round.bestPlayer.score})\n              </p>\n              <br />\n            </Fragment>\n          );\n        })}\n        <br />\n        <p>**Final Team Winner** {getFinalWinner()}</p>\n        <br />\n        <Button onClick={Papers.leaveGame}>Leave game</Button>\n      </div>\n    );\n  }\n\n  return (\n    <div css={Styles.page}>\n      {!hasCountdownStarted && (\n        <header>\n          <h1>Round {roundIndex + 1}</h1>\n          <p>\n            Try to guess as many papers as possible in 1 minute. <br />\n            {game.settings.rounds[roundIndex].description}\n          </p>\n          <br />\n        </header>\n      )}\n      <div>\n        <br />\n        {isMyTurn\n          ? hasStatusFinished\n            ? renderRoundScore()\n            : !hasCountdownStarted\n            ? renderMyTurnGetReady()\n            : renderGo()\n          : hasStatusFinished\n          ? renderRoundScore()\n          : renderOtherTurnGetReady()}\n      </div>\n    </div>\n  );\n}\n","/** @jsx jsx */\nimport { jsx, css } from '@emotion/core';\nimport { Fragment, useState, useContext, useEffect } from 'react';\nimport { Switch, Route, Redirect, Link, useParams } from 'react-router-dom';\n\nimport Button from 'components/Button.js';\nimport PapersContext from 'store/PapersContext.js';\nimport GameLobby from './GameRoom/Lobby.js';\nimport GameTeams from './GameRoom/Teams.js';\nimport { usePrevious } from 'utils';\n// import GameWords from './GameRoom/Words.js';\nimport GamePlaying from './GameRoom/Playing.js';\n\nexport default function GameRoom(props) {\n  const { id: urlGameId } = useParams();\n  const Papers = useContext(PapersContext);\n  const { profile, game } = Papers.state;\n  const gameId = game && game.name;\n  const profileId = profile && profile.id;\n  const profileIsAfk = game && game.players[profileId].isAfk;\n  const [status, setStatus] = useState('loading'); // needProfile || ready  || notFound\n  const prevGameId = usePrevious(gameId);\n\n  useEffect(() => {\n    if (!profileId) {\n      return false;\n    }\n\n    if (prevGameId && !gameId) {\n      // This shoudn't be here... Global Status\n      return setStatus('leftGame');\n    }\n\n    if (urlGameId === gameId) {\n      if (profileIsAfk) {\n        Papers.recoverPlayer();\n      } else {\n        setStatus('ready');\n      }\n    } else {\n      Papers.accessGame('join', urlGameId, err => {\n        if (err) {\n          const errorMsgMap = {\n            notFound: () => 'This game does not exist.',\n            alreadyStarted: () => 'This game had already started.',\n            ups: () => `Ups, something went wrong! Error: ${JSON.stringify(err)}`,\n          };\n\n          const errrorType = errorMsgMap[err] ? err : 'ups';\n          const errorMsg = errorMsgMap[errrorType]();\n\n          console.warn('/game/:id - accessGame failed:', gameId, errorMsg, err);\n\n          return setStatus(errrorType);\n        }\n      });\n    }\n    // Papers doesnt need to be a dep - its a method.\n  }, [profileId, gameId, profileIsAfk]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const handleLeaveGame = () => {\n    if (\n      window.confirm('Are you sure you wanna leave the game? You wont be able to join it again.')\n    ) {\n      Papers.leaveGame();\n    }\n  };\n\n  // OPTIMIZE: This is asking for a switch / children mapping...\n\n  if (status === 'loading') {\n    return <h1>Loading...</h1>;\n  }\n\n  if (!profileId) {\n    return (\n      <Fragment>\n        <h1>To join {gameId} you need to create a profile before!</h1>\n        <br />\n        <Button as={Link} to=\"/\">\n          Create profile\n        </Button>\n      </Fragment>\n    );\n  }\n\n  if (status === 'notFound') {\n    return (\n      <Fragment>\n        <h1>Ups, the game \"{urlGameId}\"\" doesn't seem to exist!</h1>{' '}\n        <Button as={Link} to=\"/\">\n          Go Home\n        </Button>\n      </Fragment>\n    );\n  }\n\n  if (status === 'leftGame' || !game) {\n    return <Redirect push to=\"/\" />;\n  }\n\n  if (status === 'ups') {\n    return (\n      <Fragment>\n        <h1>Ups, something went wrong loading this game. See logs</h1>{' '}\n        <Button as={Link} to=\"/\">\n          Go Home\n        </Button>\n      </Fragment>\n    );\n  }\n\n  return (\n    <div>\n      <button\n        css={css`\n          position: absolute;\n          top: 0;\n          left: 0;\n        `}\n        onClick={handleLeaveGame}\n      >\n        Leave\n      </button>\n      <Switch>\n        <Route exact path=\"/game/:id\">\n          <Redirect to={`/game/${gameId}/lobby`} />\n        </Route>\n        <Route path=\"/game/:id/lobby\">\n          {!game.hasStarted ? <GameLobby /> : <Redirect to={`/game/${gameId}/playing`} />}\n        </Route>\n        <Route path=\"/game/:id/teams\">\n          {!game.teams ? <GameTeams /> : <Redirect to={`/game/${gameId}/lobby`} />}\n        </Route>\n\n        <Route path=\"/game/:id/playing\">\n          {game.hasStarted ? <GamePlaying /> : <Redirect to={`/game/${gameId}/lobby`} />}\n        </Route>\n        {/* <Route path=\"/game/:id/words\">\n        <GameWords />\n      </Route> */}\n        <Route path=\"*\">\n          <Redirect to=\"/game/:id\" />\n        </Route>\n      </Switch>\n    </div>\n  );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n\nserviceWorker.unregister();\n","/** @jsx jsx */\nimport { jsx, css } from '@emotion/core';\nimport { Fragment } from 'react';\nimport { Redirect, Switch, Route } from 'react-router-dom';\nimport { base } from 'Theme.js';\nimport Home from 'views/HomeEntry.js';\nimport GameRoom from 'views/GameRoom.js';\nimport CoreContext, { CoreContextProvider } from 'store/CoreContext.js';\nimport { PapersContextProvider } from 'store/PapersContext.js';\n\nexport default function App(props) {\n  return (\n    <CoreContextProvider>\n      <PapersContextProvider>\n        <button\n          css={css`\n            position: fixed;\n            top: 0;\n            right: 0;\n          `}\n          onClick={() => window.location.reload()}\n        >\n          Refresh\n        </button>\n        <div css={base}>\n          <Switch>\n            <Route path=\"/game/:id\">\n              <GameRoom />\n            </Route>\n            <Route exact path=\"/\">\n              <Home />\n            </Route>\n            <Route path=\"*\">\n              {/* Do a 404 in the future? */}\n              <Redirect to=\"/\" />\n            </Route>\n          </Switch>\n        </div>\n        <CoreContext.Consumer>\n          {({ room, modal }) => {\n            const ModalComponent = modal.component;\n            const props = modal.props || {};\n            return <Fragment>{ModalComponent && <ModalComponent {...props} />}</Fragment>;\n          }}\n        </CoreContext.Consumer>\n      </PapersContextProvider>\n    </CoreContextProvider>\n  );\n}\n"],"sourceRoot":""}