(this["webpackJsonppapers-game-client"]=this["webpackJsonppapers-game-client"]||[]).push([[0],{57:function(e,n,t){e.exports=t(99)},62:function(e,n,t){},92:function(e,n){},99:function(e,n,t){"use strict";t.r(n);var r=t(1),a=t.n(r),o=t(46),c=t.n(o),i=t(9),s=(t(62),t(0)),u=t(11),l=t(2);function b(){var e=Object(l.a)(["\n  background-color: white;\n  color: ",";\n  ",";\n  line-height: 1.4;\n"]);return b=function(){return e},e}function f(){var e=Object(l.a)(["\n    font-size: 1.4rem;\n  "]);return f=function(){return e},e}function m(){var e=Object(l.a)(["\n    font-size: 1.6rem;\n    color: ",";\n  "]);return m=function(){return e},e}function d(){var e=Object(l.a)(["\n    font-size: 1.6rem;\n  "]);return d=function(){return e},e}function g(){var e=Object(l.a)(["\n    font-size: 1.6rem;\n    font-weight: 700;\n  "]);return g=function(){return e},e}function j(){var e=Object(l.a)(["\n    font-size: 3.2rem;\n    font-weight: 700;\n  "]);return j=function(){return e},e}function p(){var e=Object(l.a)(["\n    font-size: 4rem;\n    font-weight: 700;\n    line-height: 4.8rem;\n    display: block;\n  "]);return p=function(){return e},e}var O="#484F5D",v="#7F848E",h="#E5E6E8",w="#fff",y={h1:Object(s.a)(p()),h2:Object(s.a)(j()),h3:Object(s.a)(g()),default:Object(s.a)(d()),secondary:Object(s.a)(m(),v),small:Object(s.a)(f())},k=Object(s.a)(b(),O,y.default),x=t(29),P=t.n(x),I=t(3),C=t(10),S=t(47);function G(){var e=Object(l.a)(["\n  border-bottom: 1px solid ",";\n  padding-bottom: 1.6rem;\n  margin-bottom: 1.6rem;\n"]);return G=function(){return e},e}function A(){var e=Object(l.a)(["\n  & > button:not(:last-child),\n  & > a:not(:last-child) {\n    margin-right: 1.6rem;\n  }\n"]);return A=function(){return e},e}function E(){var e=Object(l.a)(["\n  text-align: left;\n  position: absolute;\n  top: 0;\n  left: 0;\n"]);return E=function(){return e},e}function F(){var e=Object(l.a)(["\n  width: 20rem;\n  height: 20rem;\n  fill: ",";\n  margin-top: 2rem;\n"]);return F=function(){return e},e}function R(){var e=Object(l.a)(["\n  ","\n  width: 7rem;\n  height: 7rem;\n  position: absolute;\n  top: 0;\n  left: 50%;\n  transform: translateX(-50%);\n"]);return R=function(){return e},e}function z(){var e=Object(l.a)(["\n  position: relative;\n  margin-bottom: 1rem;\n"]);return z=function(){return e},e}function M(){var e=Object(l.a)(["\n  ","\n  border: none;\n  object-fit: cover;\n"]);return M=function(){return e},e}function N(){var e=Object(l.a)(["\n  width: 80vw;\n  height: 80vw;\n  border-radius: 50%;\n  border: 3px solid ",";\n  margin: 1.6rem auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return N=function(){return e},e}function _(){var e=Object(l.a)(["\n  border: none;\n  border-bottom: 1px solid ",";\n  border-radius: 0;\n  width: 100%;\n  text-align: center;\n  ","\n  margin-top: 4rem;\n\n  &:focus {\n    outline: none;\n    border-color: ",";\n  }\n"]);return _=function(){return e},e}function B(){var e=Object(l.a)(["\n  margin-top: 5vh;\n  display: block;\n  text-align: center;\n"]);return B=function(){return e},e}function D(){var e=Object(l.a)(["\n  text-align: center;\n  margin: 0.8rem auto;\n"]);return D=function(){return e},e}function L(){var e=Object(l.a)(["\n  font-size: 8rem;\n"]);return L=function(){return e},e}function U(){var e=Object(l.a)(["\n  text-align: center;\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"]);return U=function(){return e},e}function T(){var e=Object(l.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  padding: 1.6rem 1.6rem 6rem;\n  height: 100vh;\n  overflow: hidden;\n"]);return T=function(){return e},e}var W=Object(s.a)(T()),Y=Object(s.a)(U()),J=Object(s.a)(L()),H=Object(s.a)(D()),q=Object(s.a)(B()),V=Object(s.a)(_(),h,y.h1,v),X=Object(s.a)(N(),h),$=Object(s.a)(M(),X),K=Object(s.a)(z()),Q=Object(s.a)(R(),$),Z=Object(s.a)(F(),O),ee=Object(s.a)(E()),ne=Object(s.a)(A()),te=Object(s.a)(G(),h),re=t(56);function ae(){var e=Object(l.a)(["\n    ","\n    border: none;\n    border-radius: 4.2rem;\n    font-size: inherit;\n    background-color: ",";\n    color: ",";\n    width: ",";\n    display: ",";\n    flex-shrink: 0;\n    text-align: center;\n    text-decoration: none;\n\n    &:hover,\n    &:focus {\n      outline: 0;\n      box-shadow: 0px 0.4rem 1.6rem rgba(72, 79, 93, 0.3),\n        0 0px 5px rgba(72, 79, 93, 0.8); /* verify with maggie */\n    }\n  "]);return ae=function(){return e},e}var oe={primary:{bg:O,text:w},light:{bg:w,text:O},flat:{bg:w,text:O}},ce=function(e){var n=e.variant,t=e.hasBlock;return Object(s.a)(ae(),"flat"===n?"\n    padding: 1.6rem;\n  ":"\n    box-shadow: 0px 0.4rem 1.6rem rgba(72, 79, 93, 0.3);\n    padding: 1.6rem 2.4rem;\n  ",oe[n].bg,oe[n].text,t?"100%":"",t?"block":"inline-block")};function ie(e){var n=e.as,t=e.variant,r=e.hasBlock,a=e.children,o=Object(re.a)(e,["as","variant","hasBlock","children"]),c=n||"button";return Object(s.b)(c,Object.assign({},o,{css:ce({variant:t,hasBlock:r})}),a)}ie.defaultProps={variant:"primary"};var se=Object(r.memo)(ie),ue=a.a.createContext({}),le=function(e){var n=e.children,t=Object(r.useState)({modal:{component:null,props:null}}),o=Object(C.a)(t,2),c=o[0],i=o[1];var s={setModal:function(e){i((function(n){return Object(I.a)({},n,{modal:e})}))},closeModal:function(){i((function(e){return Object(I.a)({},e,{modal:{}})}))}};return a.a.createElement(ue.Provider,{value:Object(I.a)({},c,{},s)},n)},be=ue,fe=t(15),me=t(48),de=t(49),ge=t(54),je=t(50),pe=t(7),Oe=t(55),ve=t(51),he=t.n(ve);function we(e,n){var t=new FileReader;t.onload=function(e){return n(e.target.result)},t.readAsDataURL(e)}var ye=a.a.createContext({}),ke=function(e){function n(e){var t;Object(me.a)(this,n);return(t=Object(ge.a)(this,Object(je.a)(n).call(this,e))).URL=window.location.host,t.state={socket:null,status:"LOADING",profile:{id:window.localStorage.getItem("profile_id")||null,name:window.localStorage.getItem("profile_name")||null,avatar:window.localStorage.getItem("profile_avatar")||null,gameId:window.localStorage.getItem("profile_gameId")||null},game:void 0},t.PapersAPI={open:t.open.bind(Object(pe.a)(t)),close:t.close.bind(Object(pe.a)(t)),pausePlayer:t.pausePlayer.bind(Object(pe.a)(t)),recoverPlayer:t.recoverPlayer.bind(Object(pe.a)(t)),updateProfile:t.updateProfile.bind(Object(pe.a)(t)),accessGame:t.accessGame.bind(Object(pe.a)(t)),recoverGame:t.recoverGame.bind(Object(pe.a)(t))},t}return Object(Oe.a)(n,e),Object(de.a)(n,[{key:"componentDidMount",value:function(){var e=this.state.profile,n=e.id,t=e.gameId;if(console.log("Player status:",{id:n,gameId:t}),n&&t){var r=this.PapersAPI.open();this.PapersAPI.recoverGame(r)}}},{key:"open",value:function(e){var n=this.state.socket,t=this.state.profile,r=t.id,a=t.gameId,o=e||a;return n?(n.connected?console.warn("socket already opened!",r):(console.warn("reconnecting socket...",r),n.open()),n):(console.log("creating a socket!",r),(n=he()(this.URL,{query:{playerId:r,gameId:o},transports:["websocket"]})).on("connect",(function(){console.log("connected!",r)})),this.setState({socket:n}),n)}},{key:"close",value:function(){console.log("TODO Papers.close...")}},{key:"accessGame",value:function(e,n,t){var r=this,a=this.state.socket;a||(a=this.PapersAPI.open(n)),console.log("accessGame",e,n),a.emit("".concat(e,"-game"),{gameId:n,player:this.state.profile},t),a.on("set-game",(function(e){console.log("set-game:",e.name),window.localStorage.setItem("profile_gameId",e.name),r.setState((function(n){return{profile:Object(I.a)({},n.profile,{gameId:e.name}),game:e}}))})),a.on("game-update",(function(e,n){console.log("game-update:",e);var t=r.state.game,a={"new-player":function(){var e=n;return Object(I.a)({},t,{players:Object(I.a)({},t.players,Object(fe.a)({},e.id,e))})},"pause-player":function(){var e=n;return Object(I.a)({},t,{players:Object(I.a)({},t.players,Object(fe.a)({},e,Object(I.a)({},t.players[e],{isAfk:!0})))})},"recover-player":function(){var e=n;return Object(I.a)({},t,{players:Object(I.a)({},t.players,Object(fe.a)({},e,Object(I.a)({},t.players[e],{isAfk:!1})))})},ups:function(){return console.log("Ups! game-update",n),t}},o=a[e]?a[e]():a.ups();r.setState({game:o})}))}},{key:"pausePlayer",value:function(){console.log("pausePlayer"),this.state.socket.emit("pause-player")}},{key:"recoverPlayer",value:function(){this.state.socket.open(),this.state.socket.emit("recover-player")}},{key:"updateProfile",value:function(e){var n,t=e.id||(n=e.name,"".concat(n,"_").concat(Math.random().toString(36).substr(2,9),"_").concat((new Date).getTime()));window.localStorage.setItem("profile_name",e.name),window.localStorage.setItem("profile_avatar",e.avatar),window.localStorage.setItem("profile_id",t),this.setState((function(n){return{profile:Object(I.a)({},n.profile,{},e,{id:t})}}))}},{key:"recoverGame",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.socket;console.log("recovering game..."),n.emit("recover-game",(function(n,t){if(n){window.localStorage.removeItem("profile_gameId"),e.setState((function(e){return{status:"READY",profile:Object(I.a)({},e.profile,{gameId:null}),game:null}}));var r={notFound:"recover-game: Does not exist",dontBelong:"recover-game: You dont belong to:",empty:"recover-game: No games stored",ups:"recover-game: Ups!', ".concat(JSON.stringify(n))};console.warn(r[n]||r.ups)}else console.log("recover-game success:",t.game.name),e.setState({status:"READY",game:t.game})}))}},{key:"render",value:function(){return a.a.createElement(ye.Provider,{value:Object(I.a)({status:this.state.status,state:{profile:this.state.profile,game:this.state.game}},this.PapersAPI)},this.props.children)}}]),n}(r.Component),xe=ye;function Pe(){var e=Object(l.a)(["\n  ","\n  color: #da4040;\n  margin-bottom: 1.6rem;\n  text-align: center;\n"]);return Pe=function(){return e},e}function Ie(){var e=Object(l.a)(["\n  border: none;\n  border-bottom: 1px solid ",";\n  border-radius: 0;\n  width: 100%;\n  text-align: center;\n  ","\n  margin: 0 0 1.6rem;\n\n  &:focus {\n    outline: none;\n    border-color: ",";\n  }\n"]);return Ie=function(){return e},e}function Ce(){var e=Object(l.a)(["\n  margin: 0.8rem 0 1.6rem;\n"]);return Ce=function(){return e},e}function Se(){var e=Object(l.a)(["\n  margin-top: 0.8rem;\n"]);return Se=function(){return e},e}function Ge(){var e=Object(l.a)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  z-index: 4;\n  height: 4.4rem;\n  width: 4.4rem;\n  border: none;\n  border-radius: 50%;\n  padding: 0;\n  cursor: pointer;\n  background-color: white;\n\n  &::before,\n  &::after {\n    content: '';\n    position: absolute;\n    display: block;\n    left: 50%;\n    top: 50%;\n    width: 1.2rem;\n    height: 0.2rem;\n    background-color: ",";\n    transition: transform 0.15s ease-in;\n    transform: translate(-50%, -50%) rotate(45deg);\n    transform-origin: center center;\n    border-radius: 0.2rem;\n  }\n\n  &::after {\n    transform: translate(-50%, -50%) rotate(-45deg);\n  }\n\n  &:focus,\n  &:hover {\n    outline: none;\n\n    &::before {\n      transform: translate(-50%, -50%) rotate(0);\n    }\n\n    &::after {\n      transform: translate(-50%, -50%) rotate(0);\n    }\n  }\n"]);return Ge=function(){return e},e}function Ae(){var e=Object(l.a)(["\n  position: absolute;\n  top: 10vw;\n  width: 90vw;\n  height: auto;\n  left: 5vw;\n  background-color: white;\n  border-radius: 0.4rem;\n  padding: 1.6rem;\n"]);return Ae=function(){return e},e}function Ee(){var e=Object(l.a)(["\n  position: absolute;\n  background: rgba(0, 0, 0, 0.7);\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n"]);return Ee=function(){return e},e}function Fe(){var e=Object(l.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 2;\n"]);return Fe=function(){return e},e}var Re=Object(s.a)(Fe()),ze=Object(s.a)(Ee()),Me=Object(s.a)(Ae()),Ne=Object(s.a)(Ge(),O),_e=Object(s.a)(Se()),Be=Object(s.a)(Ce()),De=Object(s.a)(Ie(),h,y.h1,v),Le=Object(s.a)(Pe(),y.small);function Ue(e){var n=e.variant,t=Object(r.useContext)(xe),a=Object(r.useContext)(be).closeModal,o=Object(r.useState)({gameName:null,gameToRedirect:null,errorMsg:null}),c=Object(C.a)(o,2),i=c[0],l=c[1],b={join:{title:"What's the game name?",description:"Ask your friend for it!"},create:{title:"Name your game",description:"Pick a short and sweet name:"}}[n];return i.gameToRedirect?Object(s.b)(u.a,{to:"/game/".concat(i.gameToRedirect)}):Object(s.b)("section",{css:Re},Object(s.b)("div",{css:ze,onClick:a,role:"none"}),Object(s.b)("div",{css:Me},Object(s.b)("button",{css:Ne,"aria-label":"Close Modal",onClick:a}),Object(s.b)("label",null,Object(s.b)("h1",{css:[_e,y.h3]},b.title),Object(s.b)("p",{css:[y.secondary,Be]},b.description),Object(s.b)("input",{onChange:function(e){var n=e.target.value;l((function(e){return Object(I.a)({},e,{gameName:n})}))},css:De,autoFocus:!0,type:"text"}),i.errorMsg&&Object(s.b)("p",{css:Le},i.errorMsg)),i.gameName&&i.gameName.length>=3&&Object(s.b)(se,{hasBlock:!0,onClick:function(){t.accessGame(n,i.gameName,(function(e,n){if(e){var t={exists:function(){return"Choose other name."},notFound:function(){return"This game does not exist."},ups:function(){return"Ups, something went wrong! Error: ".concat(JSON.stringify(e))}},r=(t[e]||t.ups)();return console.warn("accessGame() err:",r),l((function(e){return Object(I.a)({},e,{errorMsg:r})}))}l((function(e){return Object(I.a)({},e,{gameToRedirect:n.name})})),a()}))}},"Let's go!")))}function Te(e){var n=Object(r.useContext)(xe),t=Object(r.useContext)(be).setModal,a=n.state.profile,o=n.state.game,c=Object(r.useState)({name:a.name,avatar:a.avatar,step:a.name&&a.avatar?4:0}),u=Object(C.a)(c,2),l=u[0],b=u[1],f=function(){return Object(s.b)("div",{css:K,"aria-hidden":"true"},Object(s.b)("img",{css:Q,src:l.avatar,alt:""}),Object(s.b)("svg",{css:Z,version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"458.667",height:"518.667",viewBox:"0 0 344 389"},Object(s.b)("path",{d:"M163.5 31.8c-5.2 2.5-11.9 9.4-15.3 15.7-2.5 4.7-2.7 5.8-2.7 18 0 10.7.4 14.5 2.4 21.5 1.3 4.7 2.8 8.9 3.3 9.4.4.6.8 1.7.8 2.5.1.9.9 3.4 2 5.6 1.1 2.2 1.9 4.3 2 4.7 0 1.1 5.3 12.2 6 12.8 1.1.8 2 15.2 1.2 18.9-.6 2.9-1.7 3.9-6.7 6.6-7 3.7-13.4 10.7-22.1 24.5-7.2 11.3-10.7 18.8-13.8 29.5-4.4 15.1-10 32.4-11.7 36-1 2.2-3.7 9.2-6 15.5-4.1 11.1-4.2 11.9-4 22.5.2 16.4 1.8 19.5 9.5 19.5 3.1 0 3.8-.5 5.6-4 1.3-2.6 2-5.9 2-9.9 0-5.1-.5-6.6-3.6-11.2-4.3-6.5-4.4-5.8 5.2-29.4 1.8-4.4 4.2-11.4 5.4-15.5 1.2-4.1 2.7-9.3 3.5-11.5.8-2.2 2.6-8 4-12.9 4.9-16.1 23.3-44 30.3-45.8 2.2-.6 2.2-.5 2.3 16 0 16.7.4 21.5 3.3 43.2 1.5 11.5 5.4 28.2 10.2 43.8 1.8 5.5 2.4 9.4 2 11.6-.7 3.5-8.2 15.1-14.4 22.1-6.1 6.9-21.5 32.2-27.2 44.5-2.9 6.3-5.7 12.1-6.2 12.7-.6.7-3.1 1.3-5.7 1.3-4.4 0-21.9 5.8-24.8 8.2-.7.6-1.3 2-1.3 3.2 0 4.4 4.1 5.8 9 3.3 5.2-2.7 14.7-5.5 20.5-6.2 8.6-.9 9.2-1.2 10.8-5.3 1.5-3.8 8-18.1 9.8-21.7.5-1.1 3.4-5.8 6.4-10.5 3-4.7 6.8-10.8 8.4-13.5 1.6-2.8 5.3-7.7 8.1-11s6.8-8.6 8.8-11.7c2-3.2 3.9-5.8 4.2-5.8 1.4 0 6.1 19.1 8 32.5.5 3.8 1.6 9.7 2.4 13 .8 3.3 2.2 11.2 3.1 17.5 2.2 14.8 2.6 15.6 8.5 16.9 6.7 1.4 15.3 4.8 17.6 6.9 7.9 7.1 15.6 9.1 16.2 4.3.3-1.9-.9-3.7-5.2-7.7-3-2.9-7.3-5.8-9.3-6.4-2.1-.7-4.2-1.6-4.8-2-.5-.4-3.6-1.5-6.7-2.4-5.2-1.5-5.8-1.9-6.3-4.9-.3-1.7-1.2-6.8-2-11.2-6.8-39.9-10.1-53.7-15.3-64.6-1.7-3.5-4.2-10.5-5.7-15.4-1.4-5-3-10.1-3.5-11.5-.5-1.4-1.2-4.3-1.6-6.5-.4-2.2-1-4.5-1.4-5-.9-1.2-4.6-23.6-6-36.7-.5-5.4-1-17.7-1-27.5v-17.8l11.8-2.9c25.3-6.2 42.8-13.2 48.3-19.4 3.6-4 9.5-12.6 11.9-17.2.7-1.4 1.6-2.7 2-3 .4-.3 1.9-2.8 3.5-5.5 1.6-2.8 3.3-5.6 3.9-6.4.6-.7 3.6-7 6.7-13.9l5.6-12.6 5.1.3c4.6.2 5.5-.1 8.2-2.7 2.5-2.5 3-3.9 3-7.6 0-3.6-.5-5-2.7-7.1-1.5-1.4-3.6-2.5-4.6-2.5-1.4 0-1.7-.5-1.3-1.7 1.5-3.9 1.8-10.3.6-11.8-1.8-2.1-5.3-1.9-7.4.6-3.1 3.7-6.5 12-7.1 17.8-.8 7.1-3 14.1-6.5 21.1-1.5 3-4 8.3-5.6 11.7-1.6 3.5-3.2 6.3-3.6 6.3-.5 0-.8.5-.8 1 0 1-4.8 8.9-6.1 10-.3.3-2 3.1-3.8 6.2-4.2 7.6-11.7 15-16.6 16.6-2.2.7-4.9 1.7-6 2.2-6.4 2.6-22.9 8.1-28 9.4-3.3.8-7 1.8-8.2 2.2-2.2.6-2.3.5-2.3-7.1 0-4.7.5-8.1 1.3-9 .6-.7 3.5-3.7 6.3-6.6 21.8-23.1 31.2-49.1 24.3-67.3-2.4-6.5-9.3-14.1-16.3-18.1-6.5-3.7-18.2-4.5-24.1-1.7zm18 9.1c5.4 2.4 10.8 7.6 13.5 12.9 2 3.8 2.2 5.4 1.7 13-.6 10.7-3.3 17.8-11 29.5-4.5 6.8-15.4 19.7-16.6 19.7-.5 0-1.6-1.7-2.6-3.8-.9-2-2-4.6-2.5-5.7-4.9-10.8-9.1-27.6-9.7-39-.5-8.7-.3-10.6 1.5-14.5 2-4.4 9.2-12.2 12.2-13.3 3.2-1.1 9.7-.6 13.5 1.2z"})))};function m(e,n){return{name:function(){var e=n.target.value;b((function(n){return Object(I.a)({},n,{name:e})}))},avatar:function(){var e;return P.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=n.target.files[0]){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,P.a.awrap(Object(S.a)(e,{maxWidthOrHeight:500}));case 5:we(t.sent,(function(e){console.log("Avatar compressed!"),b((function(n){return Object(I.a)({},n,{avatar:e})}))}));case 7:case"end":return t.stop()}}))}}[e]()}function d(e){t({component:Ue,props:{variant:e}})}var g={0:function(){return Object(s.b)(r.Fragment,null,Object(s.b)("span",{css:J,role:"img","aria-label":"logo"},"\ud83c\udfb2"),Object(s.b)("h1",{css:y.h1},"Welcome!"),Object(s.b)("p",{css:[H,y.secondary]},"Papers is the perfect game for your dinner party. Gather up to 10 friends and have fun!"))},1:function(){return Object(s.b)("label",{css:q},Object(s.b)("span",null,"How should we call you?"),Object(s.b)("input",{css:V,type:"text",autoFocus:!0,defaultValue:l.name,onChange:function(e){return m("name",e)}}))},2:function(){return Object(s.b)("label",{css:q},Object(s.b)("span",null,"Add your avatar"),Object(s.b)("input",{type:"file",className:"sr-only",accept:"image/png, image/jpeg",onChange:function(e){return m("avatar",e)}}),l.avatar?Object(s.b)("img",{css:$,src:l.avatar,alt:"Your avatar"}):Object(s.b)("div",{css:X},Object(s.b)("span",{role:"img","aria-hidden":"true"},"\ud83d\udcf8")," ","Upload a picture"))},3:function(){return Object(s.b)("div",{css:q},Object(s.b)("h1",null,"You're ready!",Object(s.b)("span",{css:y.h1},l.name)),Object(s.b)(f,null))},4:function(){return Object(s.b)("div",{css:q},Object(s.b)("h1",null,"Welcome back",Object(s.b)("span",{css:y.h1},l.name)),Object(s.b)(f,null),!!o&&Object(s.b)("div",{css:te},Object(s.b)("h2",{css:y.h3},"Rejoin your last game:"," ",o.players[a.id]&&o.players[a.id].isAfk&&"\u26a0\ufe0f"),Object(s.b)(se,{as:i.b,to:"/game/".concat(o.name)},o.name)))}}[l.step];return Object(s.b)("div",{css:W},0<l.step&&l.step<4&&Object(s.b)(se,{css:ee,variant:"flat",onClick:function(){b((function(e){return Object(I.a)({},e,{step:e.step-1})}))}},"Go back"),4===l.step&&Object(s.b)(se,{css:ee,variant:"flat",onClick:function(){b((function(e){return Object(I.a)({},e,{step:1})}))}},"Edit profile"),Object(s.b)("div",{css:Y},Object(s.b)(g,null)),Object(s.b)("div",{css:ne},l.step<3?Object(s.b)(se,{hasBlock:!0,onClick:function(){var e=l.step,t=l.name,r=l.avatar;2===e&&n.updateProfile({name:t,avatar:r}),b((function(e){return Object(I.a)({},e,{step:e.step+1})}))}},"Next"):Object(s.b)(r.Fragment,null,Object(s.b)(se,{variant:"light",onClick:function(){return d("create")}},"Create Game"),Object(s.b)(se,{onClick:function(){return d("join")}},"Join Game"))))}function We(){var e=Object(l.a)(["\n                  width: 2.5rem;\n                  height: 2.5rem;\n                  object-fit: cover;\n                  border-radius: 50%;\n                  margin-right: 1rem;\n                "]);return We=function(){return e},e}function Ye(e){var n=Object(r.useContext)(xe),t=Object(u.g)().id,a=Object(r.useState)("loading"),o=Object(C.a)(a,2),c=o[0],l=o[1],b=n.state,f=b.profile,m=b.game,d=m&&m.name,g=function(e){var n=Object(r.useRef)();return Object(r.useEffect)((function(){n.current=e})),n.current}(d);Object(r.useEffect)((function(){if(console.log("/game",{gameRoomId:t,gameIdStored:d}),t===d)return console.log("Game is stored - came from other page"),n.recoverPlayer(),void l("go")}),[]),Object(r.useEffect)((function(){void 0===g&&void 0===d&&(console.log("/game joinining",t),n.accessGame("join",t,(function(e,n){if(console.log("accessGame result:",n),e){var t={notFound:function(){l("notFound")},ups:function(e){l("ups")}};return console.warn("accessGame",e),(t[e]||t.ups)()}l("go")})))}),[d]),Object(r.useEffect)((function(){return function(){m&&n.pausePlayer()}}),[]);return"loading"===c?Object(s.b)("h1",null,"Loading..."):"notFound"===c?Object(s.b)("div",null,Object(s.b)("h1",null,"Ups, this group doesn't seem to exist!")," ",Object(s.b)(se,{as:i.b,to:"/"},"Go Home")):Object(s.b)(r.Fragment,null,Object(s.b)("p",null,'A game "',m.name,'" created by ',m.creator," is starting here!"),Object(s.b)("h1",null,"Players:"),Object(s.b)("ul",null,Object.keys(m.players).map((function(e){var n=m.players[e],t=n.avatar,r=n.name,a=n.isAfk;return Object(s.b)("li",{key:e},"-"," ",Object(s.b)("img",{src:t,alt:"",css:Object(s.a)(We())}),r,a&&"\u26a0\ufe0f")}))),Object(s.b)(se,{as:i.b,to:"/"},"Go Home"),Object(s.b)(se,{onClick:function(){m.creator===f.name?window.confirm("You are the admin of this game. Leaving, will kick out everyone. Are you sure?"):window.confirm("Are you sure you wanna leave the game?")}},"Leave Game"))}Ue.defaultProps={variant:"join"};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(i.a,null,a.a.createElement((function(e){return Object(s.b)(le,null,Object(s.b)(ke,null,Object(s.b)("div",{css:k},Object(s.b)(u.d,null,Object(s.b)(u.b,{path:"/game/:id"},Object(s.b)(Ye,null)),Object(s.b)(u.b,{path:"/game"},Object(s.b)(u.a,{to:"/"})),Object(s.b)(u.b,{path:"/"},Object(s.b)(Te,null)))),Object(s.b)(be.Consumer,null,(function(e){e.room;var n=e.modal,t=n.component,a=n.props||{};return Object(s.b)(r.Fragment,null,t&&Object(s.b)(t,a))}))))}),null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[57,1,2]]]);
//# sourceMappingURL=main.f30e29fc.chunk.js.map