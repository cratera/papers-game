{"version":3,"sources":["Theme.js","utils/index.js","store/wordsForEveryone.js","store/PapersContext.js","components/Page/PageStyles.js","components/Button/ButtonStyles.js","components/Button/Button.js","store/CoreContext.js","components/Modal/ModalStyles.js","components/Modal/Modal.js","components/Settings/SettingsModal.js","components/Settings/SettingsToggle.js","components/Page/Page.js","pages/Home/HomeStyles.js","pages/Home/HomeNewPlayer.js","pages/Home/AccessGameModalStyles.js","pages/Home/AccessGameModal.js","pages/Home/HomeSigned.js","pages/Home/HomeEntry.js","components/Avatar/AvatarStyles.js","components/Avatar/Avatar.js","components/ListPlayers/ListPlayersStyles.js","components/ListPlayers/ListPlayers.js","pages/GameRoom/WritePapersModalStyles.js","pages/GameRoom/WritePapersModal.js","pages/GameRoom/LobbyStyles.js","pages/GameRoom/Lobby.js","pages/GameRoom/TeamsStyles.js","pages/GameRoom/Teams.js","pages/GameRoom/PlayingStyles.js","pages/GameRoom/Playing.js","pages/GameRoom/GameRoom.js","serviceWorker.js","index.js","App.js"],"names":["colors","grayDark","grayMedium","grayLight","primary","primaryLight","success","danger","bg","typography","h1","css","h2","h3","default","secondary","small","italic","bp","ThemeGlobal","styles","encodeImgToBase64","fileToLoad","callback","fileReader","FileReader","onload","fileLoadedEvent","target","result","readAsDataURL","getRandomInt","max","Math","floor","random","usePrevious","value","ref","useRef","useEffect","current","PapersContext","React","createContext","PapersContextComp","props","URL","window","location","host","state","socket","profile","id","localStorage","getItem","name","avatar","gameId","game","undefined","_removeGameFromState","bind","PapersAPI","open","recoverPlayer","updateProfile","accessGame","recoverGame","leaveGame","kickoutOfGame","setTeams","setWords","setWordsForEveyone","startGame","startTurn","finishTurn","startNextRound","this","GameRoom","matchPath","pathname","path","console","log","playedId","passedGameId","playerId","gameIdStored","connected","warn","io","query","transports","on","setState","variant","gameName","cb","Error","emit","player","setItem","actionType","payload","reaction","players","isAfk","newPlayers","creatorId","otherPlayers","Object","keys","reduce","acc","p","hasStarted","hasLeft","words","everyonesWords","teams","round","roundStatus","removeItem","score","ups","updateGame","toString","substr","Date","getTime","allWords","i","wordsForEveryone","papersTurn","close","err","errorMsgMap","notFound","empty","JSON","stringify","Provider","status","children","Component","PapersContextProvider","withRouter","page","header","hasChildren","main","ctas","variants","Theme","text","light","flat","button","hasBlock","size","boxShadow","Button","as","restProps","Tag","Styles","defaultProps","memo","CoreContext","CoreContextProvider","useState","modal","component","methods","setModal","debug","closeModal","backdrop","box","btnClose","Modal","useContext","onClick","role","aria-label","StylesGroup","StylesInfo","SettingsModal","Papers","Typography","confirm","reload","clear","SettingsToggle","Page","otherProps","Header","Main","CTAs","centered","logo","paragraph","input","avatarPlace","avatarImg","memeContainer","memeFace","memeBody","HomeNewPlayer","step","avatarStatus","updateTempProfile","key","event","a","async","file","files","compressImg","maxWidthOrHeight","goNextStep","CurrentStep","0","aria-hidden","1","type","autoFocus","defaultValue","onChange","e","2","className","accept","src","alt","width","height","viewBox","fill","xmlns","d","strokeWidth","strokeLinecap","strokeLinejoin","title","tip","errorMsg","AccessGameModal","isAccessing","setAccessing","gameToRedirect","copy","join","description","cta","create","to","length","exists","Home","openAccessGameModal","HomeEntry","storedGameId","push","hasMargin","Avatar","list","item","itemStatus","ListPlayers","enableKickout","profileId","profileIsAdmin","map","playerName","match","isAdmin","wordsSubmitted","writtingStatus","handleKickOut","headerSvg","slides","slide","isActive","textarea","sliderLabels","sliderNav","WritePapersModal","refSlider","handleScrollDebounced","debounce","currentSlide","el","newSlide","scrollLeft","scrollWidth","setSlideIndex","setLocalWords","textareasHeight","setTextareasHeight","setErrorMsg","slideIndex","wordsGoal","settings","wordsCount","filter","word","wordsAreStored","focusTextareaAtSlide","index","childNodes","getElementsByTagName","focus","scrollTo","setTimeout","handleWordChange","wordsToEdit","scrollHeight","color","onScroll","papers","StylesIsActive","data-slide","style","placeholder","renderSliders","nextEmpty","findIndex","nextSlide","innerWidth","headerImg","cap","team","hasTeams","prevHasTeams","didSubmitAllWords","plId","openWords","handleStartClick","didEveryoneSubmittedTheirWords","every","didSubmitWords","writeAllShortCut","teamId","renderLobbyWritting","alert","stroke","Colors","Link","backBtn","headerTeam","Title","PaperTeams","tempTeams","generateTeams","teamsNr","Array","from","limit","newTempTeams","alocateTo","teamIndex","forEach","String","fromCharCode","submitTeamsAndGoNext","prompt","handleRenameOf","fillRule","clipRule","Playing","hasStatusFinished","hasCountdownStarted","includes","prevHasCountdownStarted","initialDate","options","opts","intervalTime","timer","dateStarted","resetDateStarted","getTimeLeft","timeLeft","setTimeLeft","getTimeLeftCb","useCallback","datePivot","now","interval","setInterval","newTimeLeft","clearInterval","newDate","useCountdown","initialTimer","countdown","startCountdown","initialTimerSec","countdownSec","roundIndex","turnWho","turnTeamIndex","turnPlayerIndex","isOdd","turnPlayerId","isMyTurn","parse","passed","guessed","wordsLeft","setPapersTurn","isFinalScore","setFinalScore","pickNextPaper","hasGuessed","currentPaper","wordsToPick","pickingFrom","wordsEnded","wordsModified","wordIndex","nextPaper","splice","newState","togglePaper","paper","indexOf","handleFinishTurnClick","handleStartNextRoundClick","handleFinalWinnerClick","renderTurnScore","StyleLi","renderRoundScore","teamsScore","scorePlayers","playerScore","arrayOfScores","values","winnerId","rounds","teamsTotalScore","scores","bestPlayer","arrayOfTeamsId","getRoundScore","winnerScore","getFinalWinner","teamName","Number","turnCount","renderOtherTurnGetReady","urlGameId","useParams","profileIsAfk","setStatus","prevGameId","alreadyStarted","errrorType","Template","gamePath","exact","Boolean","hostname","ReactDOM","render","Consumer","room","ModalComponent","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.6087faf9.chunk.js","sourcesContent":["/** @jsx jsx */\nimport { jsx, Global, css } from '@emotion/core';\n\nexport const colors = {\n  grayDark: '#484F5D',\n  grayMedium: '#7F848E',\n  grayLight: '#E5E6E8',\n  primary: '#0038FF',\n  primaryLight: '#E6EBFF',\n  success: '#4EBD81',\n  danger: '#e51d1d', // TODO/REVIEW @mmbotelho\n  bg: '#fff',\n};\n\nexport const typography = {\n  h1: css`\n    font-size: 4rem;\n    font-weight: 700;\n    line-height: 4.8rem;\n    display: block;\n  `,\n  h2: css`\n    font-size: 3.2rem;\n    font-weight: 700;\n  `,\n  h3: css`\n    font-size: 1.6rem;\n    font-weight: 700;\n  `,\n  default: css`\n    font-size: 1.6rem;\n  `,\n  secondary: css`\n    color: ${colors.grayMedium};\n  `,\n  small: css`\n    font-size: 1.4rem;\n  `,\n  italic: css`\n    color: ${colors.grayMedium};\n    font-style: italic;\n  `,\n};\n\nexport const base = css`\n  background-color: white;\n  color: ${colors.grayDark};\n  ${typography.default};\n  line-height: 1.4;\n`;\n\nexport const bp = {\n  xs: `@media (max-height: 35.5em)`, // 568px; - iphone5\n};\n\nexport function ThemeGlobal() {\n  return (\n    <Global\n      styles={css`\n        html {\n          font-size: 62.5%;\n          letter-spacing: -0.5px;\n          font-family: -apple-system, BlinkMacSystemFont, 'Roboto', 'Helvetica Neue', sans-serif;\n          -webkit-font-smoothing: antialiased;\n          -moz-osx-font-smoothing: grayscale;\n          color: ${colors.grayDark};\n        }\n\n        body {\n          box-sizing: border-box;\n          font-size: 1.6rem;\n          line-height: 1.4;\n        }\n\n        body * {\n          box-sizing: inherit;\n        }\n\n        .sr-only {\n          position: absolute;\n          width: 1px;\n          height: 1px;\n          padding: 0;\n          margin: -1px;\n          overflow: hidden;\n          clip: rect(0, 0, 0, 0);\n          border: 0;\n        }\n      `}\n    />\n  );\n}\n","import { useEffect, useState, useCallback, useRef } from 'react';\n\n// based on https://stackoverflow.com/a/23669825/4737729\nexport function encodeImgToBase64(fileToLoad, callback) {\n  const fileReader = new FileReader();\n\n  fileReader.onload = function(fileLoadedEvent) {\n    return callback(fileLoadedEvent.target.result);\n  };\n\n  fileReader.readAsDataURL(fileToLoad);\n}\n\nexport function createUniqueId(name) {\n  // Q: maybe this should be created on server instead.\n  // prettier-ignore\n  return `${name}_${Math.random().toString(36).substr(2, 9)}_${new Date().getTime()}`;\n}\n\nexport function getRandomInt(max) {\n  const min = 0;\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\n// React Hook\nexport function usePrevious(value) {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n}\n\nexport function useCountdown(initialDate, options = {}) {\n  const opts = {\n    intervalTime: 1000,\n    timer: 60000,\n    ...options,\n  };\n  const [dateStarted, resetDateStarted] = useState(initialDate);\n  const [timeLeft, setTimeLeft] = useState(getTimeLeft(dateStarted));\n  const intervalTime = opts.intervalTime;\n\n  const getTimeLeftCb = useCallback(datePivot => getTimeLeft(datePivot), []); // eslint-disable-line\n\n  function getTimeLeft(datePivot) {\n    const timeLeft = opts.timer - (Date.now() - datePivot);\n    return Math.max(0, timeLeft);\n  }\n\n  function restartCountdown(newDate) {\n    setTimeLeft(getTimeLeft(newDate));\n    resetDateStarted(newDate);\n  }\n\n  useEffect(() => {\n    console.log('useEffect - countdown');\n    const startedTimeLeft = getTimeLeftCb(dateStarted);\n    if (startedTimeLeft === 0) {\n      // useCountdown was called with a dateStarted already expired.\n      // Probably will use restartCountdown later in the road.\n      return;\n    }\n    const interval = setInterval(() => {\n      setTimeLeft(() => {\n        const newTimeLeft = getTimeLeftCb(dateStarted);\n\n        if (newTimeLeft <= 0) {\n          clearInterval(interval);\n\n          return 0;\n        }\n\n        return newTimeLeft;\n      });\n    }, intervalTime);\n\n    return () => clearInterval(interval);\n  }, [dateStarted, getTimeLeftCb, intervalTime]);\n\n  return [timeLeft, restartCountdown];\n}\n","export default [\n  [\n    'conservative',\n    'supplementary',\n    'wife',\n    'inquiry',\n    'compensation',\n    'able',\n    'future',\n    'mind',\n    'prevent',\n    'progressive',\n  ],\n  [\n    'inject',\n    'dark',\n    'doubt',\n    'constitutional',\n    'honor',\n    'shine',\n    'pause',\n    'shot',\n    'underline',\n    'appoint',\n  ],\n  [\n    'dance',\n    'captivate',\n    'runner',\n    'thoughtful',\n    'compose',\n    'dine',\n    'mask',\n    'admit',\n    'favor',\n    'advantage',\n  ],\n  [\n    'finance',\n    'guess',\n    'reduction',\n    'indirect',\n    'prosecution',\n    'seed',\n    'stem',\n    'problem',\n    'obstacle',\n    'explicit',\n  ],\n];\n","import React, { Component } from 'react';\nimport io from 'socket.io-client';\n\nimport { createUniqueId } from 'utils/index.js';\nimport { withRouter, matchPath } from 'react-router';\nimport wordsForEveryone from './wordsForEveryone.js';\n\nconst PapersContext = React.createContext({});\n\n// TODO - split into 2 Contexts: methods (mutations) and state (lookups)\n// TODO - Rethink all socket/state logic\nclass PapersContextComp extends Component {\n  constructor(props) {\n    super(props);\n    const isDev = process.env.NODE_ENV !== 'production';\n    // TIL: ðŸ¤¯ðŸ›ðŸ¤¬ (AFTER 1 DAY trying to make this work..)\n    // - on dev: https://github.com/socketio/socket.io/issues/1942#issuecomment-71443823\n    // - on Heroku:  https://github.com/socketio/socket.io-website/issues/139\n    // - Heroku still not working: https://stackoverflow.com/questions/59455178/heroku-websockets-issue-getting-connected-clients-always-empty\n    this.URL = isDev ? `${window.location.hostname}:5000` : window.location.host;\n\n    this.state = {\n      socket: null,\n      profile: {\n        id: window.localStorage.getItem('profile_id') || null,\n        name: window.localStorage.getItem('profile_name') || null,\n        avatar: window.localStorage.getItem('profile_avatar') || null,\n        // the last game this player tryed to access\n        gameId: window.localStorage.getItem('profile_gameId') || null,\n      },\n      game: undefined,\n      /* {\n        players: {},\n        state: {},\n        settings: {},\n      } */\n    };\n\n    this._removeGameFromState = this._removeGameFromState.bind(this);\n\n    this.PapersAPI = {\n      open: this.open.bind(this),\n\n      // pausePlayer: this.pausePlayer.bind(this),\n      recoverPlayer: this.recoverPlayer.bind(this),\n\n      updateProfile: this.updateProfile.bind(this),\n\n      accessGame: this.accessGame.bind(this),\n      recoverGame: this.recoverGame.bind(this),\n      leaveGame: this.leaveGame.bind(this),\n      kickoutOfGame: this.kickoutOfGame.bind(this),\n\n      setTeams: this.setTeams.bind(this),\n      setWords: this.setWords.bind(this),\n      setWordsForEveyone: this.setWordsForEveyone.bind(this),\n\n      startGame: this.startGame.bind(this),\n      startTurn: this.startTurn.bind(this),\n      finishTurn: this.finishTurn.bind(this),\n\n      startNextRound: this.startNextRound.bind(this),\n    };\n  }\n\n  // Maybe it should be a Route to ask for this,\n  // because it might want to retrieve different stuff...\n  // ex: on room/:id, i don't care about profile.gameId,\n  // instead I want the room/:id\n  componentDidMount() {\n    const { id, gameId } = this.state.profile;\n    const { location } = this.props;\n    const GameRoom = matchPath(location.pathname, {\n      path: '/game/:id',\n    });\n\n    console.log('PapersContext Mounted:', { playedId: id, gameId });\n\n    if (GameRoom) {\n      console.log('PapersContext - on a GameRoom');\n      // do nothing... GameRoom will do it.\n    } else {\n      console.log('PapersContext - on Home');\n      // somewhere else, handle it!\n      // Update: why not at Home.js?? Cant remember...\n      if (id && gameId) {\n        const socket = this.PapersAPI.open();\n        this.PapersAPI.recoverGame(socket);\n      }\n    }\n  }\n\n  // =========== Papers API\n\n  open(passedGameId) {\n    let socket = this.state.socket;\n    const { id: playerId, gameId: gameIdStored } = this.state.profile;\n    const gameId = passedGameId || gameIdStored;\n\n    if (socket) {\n      if (socket.connected) {\n        console.warn('socket already opened!', playerId);\n      } else {\n        console.warn('reconnecting socket...', playerId);\n        socket.open();\n      }\n      return socket;\n    }\n    console.log('creating a socket!', playerId);\n\n    socket = io(this.URL, {\n      query: { playerId, gameId },\n      // TIL: https://stackoverflow.com/a/57459569/4737729\n      transports: ['websocket'],\n    });\n\n    socket.on('connect', () => {\n      console.log('connected!', playerId);\n      // Q: Maybe all socket.on() should be added here ?\n    });\n\n    this.setState({ socket });\n\n    return socket;\n  }\n\n  accessGame(variant, gameName, cb) {\n    let socket = this.state.socket;\n\n    if (!socket) {\n      socket = this.PapersAPI.open(gameName);\n    }\n\n    // This can happen when the user left the chat.\n    // Maybe\n    // if(!socket.opened) {\n    //   socket.open();\n    //   socket.on('reopen', () => {\n    //     accessGame(variant, gameName, cb)\n    //   });\n    // }\n\n    console.log('accessGame', variant, gameName);\n\n    if (!gameName) {\n      return cb(new Error('Missing gameId'));\n    }\n\n    socket.emit(\n      `${variant}-game`,\n      {\n        gameId: gameName,\n        player: this.state.profile,\n      },\n      cb\n    );\n\n    socket.on('set-game', game => {\n      console.log('on set-game', game.name);\n      window.localStorage.setItem('profile_gameId', game.name);\n\n      this.setState(state => ({\n        profile: {\n          ...state.profile,\n          gameId: game.name,\n        },\n        game,\n      }));\n    });\n\n    socket.on('kickouted', () => {\n      // TODO - global status\n      console.log('Global Status: You were quickedout! ðŸ˜­');\n      this._removeGameFromState();\n    });\n\n    socket.on('leave-game', () => {\n      // TODO - global status\n      console.log('on leave-game');\n      this._removeGameFromState();\n    });\n\n    socket.on('game-update', (actionType, payload) => {\n      console.log('game-update:', actionType, { payload });\n\n      // Maybe actionType should be in past?\n      // player-added, player-paused, etc...\n      const reaction = {\n        'new-player': game => {\n          const player = payload;\n          return {\n            ...game,\n            players: {\n              ...game.players,\n              [player.id]: player,\n            },\n          };\n        },\n        'pause-player': game => {\n          const playerId = payload;\n\n          return {\n            ...game,\n            players: {\n              ...game.players,\n              [playerId]: {\n                ...game.players[playerId],\n                isAfk: true,\n              },\n            },\n          };\n        },\n        'recover-player': game => {\n          const playerId = payload;\n          return {\n            ...game,\n            players: {\n              ...game.players,\n              [playerId]: {\n                ...game.players[playerId],\n                isAfk: false,\n              },\n            },\n          };\n        },\n        'remove-player': game => {\n          const { playerId, creatorId } = payload;\n\n          const otherPlayers = Object.keys(game.players).reduce((acc, p) => {\n            return p === playerId ? acc : { ...acc, [p]: game.players[p] };\n          }, {});\n\n          let newPlayers;\n\n          if (!game.hasStarted) {\n            newPlayers = otherPlayers;\n          } else {\n            newPlayers = {\n              ...game.players,\n              [playerId]: {\n                ...game.players[playerId],\n                hasLeft: true,\n              },\n            };\n          }\n\n          return {\n            ...game,\n            creatorId,\n            players: newPlayers,\n          };\n        },\n        'set-words': game => {\n          const { words, playerId } = payload;\n\n          return {\n            ...game,\n            words: {\n              ...game.words,\n              [playerId]: words,\n            },\n          };\n        },\n        'set-words-for-everyone': game => {\n          const everyonesWords = payload;\n\n          return {\n            ...game,\n            words: everyonesWords,\n          };\n        },\n        'set-teams': game => {\n          const teams = payload;\n\n          return {\n            ...game,\n            teams,\n          };\n        },\n        'start-game': game => {\n          const { round, hasStarted } = payload;\n\n          return {\n            ...game,\n            hasStarted,\n            round,\n          };\n        },\n        'start-turn': game => {\n          const roundStatus = payload;\n\n          return {\n            ...game,\n            round: {\n              ...game.round,\n              ...roundStatus,\n            },\n          };\n        },\n        'finish-turn': game => {\n          window.localStorage.removeItem('turn'); // OPTIMIZE - maybe it shouldnt be here?\n          const { round, score } = payload;\n\n          return {\n            ...game,\n            round,\n            score,\n          };\n        },\n        'start-next-round': game => {\n          const round = payload;\n\n          return {\n            ...game,\n            round,\n          };\n        },\n        ups: game => {\n          console.log('Ups! game-update', payload);\n          return game;\n        },\n      };\n\n      const updateGame = reaction[actionType] || reaction.ups;\n\n      this.setState(state => ({\n        game: updateGame(state.game),\n      }));\n    });\n  }\n\n  // Not needed yet.\n  // pausePlayer() {\n  //   console.log('pausePlayer');\n  //   this.state.socket.emit('pause-player');\n  // }\n\n  recoverPlayer() {\n    console.log('recoverPlayer');\n    const socket = this.state.socket.open();\n    socket.emit('recover-player');\n  }\n\n  updateProfile(profile) {\n    const id = profile.id || createUniqueId(`player_${profile.name}`);\n\n    window.localStorage.setItem('profile_id', id);\n    window.localStorage.setItem('profile_name', profile.name);\n\n    if (profile.avatar) {\n      // its optional\n      window.localStorage.setItem('profile_avatar', profile.avatar);\n    }\n\n    this.setState(state => ({\n      profile: {\n        ...state.profile,\n        ...profile,\n        id,\n      },\n    }));\n  }\n\n  setWordsForEveyone() {\n    console.log('setWordsForEveyone()');\n    const allWords = Object.keys(this.state.game.players).reduce((acc, playerId, i) => {\n      return { ...acc, [playerId]: wordsForEveryone[i] };\n    }, {});\n\n    this.state.socket.emit('set-words-for-everyone', {\n      gameId: this.state.game.name,\n      playerId: this.state.profile.id,\n      allWords,\n    });\n  }\n\n  setWords(words, cb) {\n    console.log('setWords()');\n    this.state.socket.emit(\n      'set-words',\n      {\n        gameId: this.state.game.name,\n        playerId: this.state.profile.id,\n        words,\n      },\n      cb\n    );\n  }\n\n  setTeams(teams) {\n    console.log('setTeams()');\n    this.state.socket.emit('set-teams', {\n      gameId: this.state.game.name,\n      playerId: this.state.profile.id,\n      teams,\n    });\n  }\n\n  startGame() {\n    console.log('startGame()');\n    this.state.socket.emit('start-game', {\n      gameId: this.state.game.name,\n      playerId: this.state.profile.id,\n    });\n  }\n\n  startTurn() {\n    console.log('startTurn()');\n    this.state.socket.emit('start-turn', {\n      gameId: this.state.game.name,\n      playerId: this.state.profile.id,\n    });\n  }\n\n  finishTurn(papersTurn) {\n    console.log('finishTurn()');\n    this.state.socket.emit('finish-turn', {\n      gameId: this.state.game.name,\n      playerId: this.state.profile.id,\n      papersTurn,\n    });\n  }\n\n  startNextRound() {\n    console.log('startNextRound()');\n    this.state.socket.emit('start-next-round', {\n      gameId: this.state.game.name,\n      playerId: this.state.profile.id,\n    });\n  }\n\n  _removeGameFromState() {\n    console.log('removing game');\n    window.localStorage.removeItem('profile_gameId');\n    window.localStorage.removeItem('turn');\n\n    // Leaving room, there is no point in being connected\n    this.state.socket && this.state.socket.close();\n\n    this.setState(state => ({\n      profile: {\n        ...state.profile,\n        gameId: null,\n      },\n      game: null,\n      socket: null,\n    }));\n  }\n\n  recoverGame(socket = this.state.socket) {\n    socket.emit('recover-game', (err, result) => {\n      if (err) {\n        this._removeGameFromState();\n\n        const errorMsgMap = {\n          notFound: 'recover-game: Does not exist',\n          // dontBelong: 'recover-game: You dont belong to:',\n          empty: 'recover-game: No games stored',\n          ups: `recover-game: Ups!', ${JSON.stringify(err)}`,\n        };\n\n        console.warn(errorMsgMap[err] || errorMsgMap.ups);\n        return;\n      }\n\n      console.log('recover-game success:', result.game.name);\n\n      this.setState({\n        game: result.game,\n      });\n    });\n  }\n\n  leaveGame(playerId) {\n    console.log('leaveGame()');\n    this.state.socket.emit(\n      'leave-game',\n      {\n        gameId: this.state.game.name,\n        playerId: this.state.profile.id,\n      },\n      err => {\n        if (err) return true;\n        this._removeGameFromState();\n      }\n    );\n  }\n\n  kickoutOfGame(playerId) {\n    this.state.socket.emit(\n      'kickout-of-game',\n      {\n        gameId: this.state.game.name,\n        playerId,\n      },\n      err => {\n        if (err) return true;\n      }\n    );\n  }\n\n  render() {\n    return (\n      <PapersContext.Provider\n        value={{\n          status: this.state.status,\n          state: {\n            profile: this.state.profile,\n            game: this.state.game,\n          },\n          ...this.PapersAPI,\n        }}\n      >\n        {this.props.children}\n      </PapersContext.Provider>\n    );\n  }\n}\n\nexport const PapersContextProvider = withRouter(PapersContextComp);\n\nexport default PapersContext;\n","import { css } from '@emotion/core';\n\nconst gutter = '1.6rem';\nconst fadeH = '4rem';\nconst headerH = '6.4rem';\n\n// [1] - REVIEW - How to handle headers. Discuss with @mmbotelho.\n\nexport const page = css`\n  position: relative;\n  width: 100vw;\n  max-width: 50rem;\n  margin: 0 auto;\n  height: 100vh;\n  overflow: hidden;\n  display: grid;\n  /* grid-template-areas: 'header' 'main' 'ctas'; [1] */\n  grid-template-areas: 'main' 'main' 'ctas';\n  grid-template-rows: ${headerH} 1fr auto;\n  justify-content: 'space-between';\n`;\n\nexport const header = ({ hasChildren }) => css`\n  /* grid-area: header; */\n  position: absolute;\n  top: 0;\n  width: 100%; /* [1] */\n\n  height: ${headerH};\n  padding: 0 0.4rem 0.8rem ${gutter}; /* 0.4 is for icon on the corner */\n  display: flex;\n  justify-content: ${hasChildren ? 'space-between' : 'flex-end'};\n  align-items: center;\n`;\n\nexport const main = css`\n  grid-area: main;\n  place-self: stretch;\n  overflow: scroll;\n  padding: ${headerH} ${gutter} 0;\n\n  /* space for fadeout */\n  &::after {\n    content: '';\n    display: block;\n    height: calc(${fadeH} + ${gutter});\n    flex-shrink: 0;\n  }\n`;\n\nexport const ctas = css`\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  grid-area: ctas;\n  align-self: end;\n  padding: 0 ${gutter} 5.6rem;\n\n  /* fadeout effect */\n  box-shadow: 0 -${fadeH} 3rem white;\n\n  &::before {\n    content: '';\n    display: block;\n    height: 1px;\n    width: calc(100% + (${gutter} * 2));\n    margin-left: -${gutter};\n    margin-top: -${fadeH};\n  }\n\n  & > button:not(:last-child),\n  & > a:not(:last-child) {\n    margin-bottom: 1.6rem;\n  }\n`;\n","import { css } from '@emotion/core';\nimport * as Theme from 'Theme.js';\n\nconst variants = {\n  primary: {\n    bg: Theme.colors.primary,\n    text: Theme.colors.bg,\n  },\n  success: {\n    bg: Theme.colors.success,\n    text: Theme.colors.bg,\n  },\n  danger: {\n    bg: Theme.colors.danger,\n    text: Theme.colors.bg,\n  },\n  light: {\n    bg: Theme.colors.bg,\n    text: Theme.colors.primary,\n  },\n  flat: {\n    bg: Theme.colors.bg,\n    text: Theme.colors.grayDark, // primary just on skip. @mmbotelho\n  },\n};\n\nexport const button = ({ variant, hasBlock, size }) => {\n  return variant === 'icon'\n    ? css`\n        width: 4.4rem;\n        height: 4.4rem;\n        border: none;\n        background: none;\n        border-radius: 50%;\n        font-size: 1.6rem;\n        display: flex;\n        align-items: center;\n        justify-items: center;\n\n        svg {\n          width: 2.4rem;\n        }\n      `\n    : css`\n    ${\n      variant === 'flat'\n        ? `\n      padding: 0;\n      `\n        : `\n        padding: 1.6rem 2.4rem;\n        ${variant !== 'success' ? 'box-shadow: 0px 4px 16px rgba(0, 56, 255, 0.3);' : ''}\n  `\n    }\n    ${\n      size === 'sm'\n        ? `\n      padding: 0.5rem 1.5rem;\n      font-size: 1.4rem;\n  `\n        : ''\n    }\n    box-shadow: ${variants[variant].boxShadow};\n    border: none;\n    border-radius: 4.2rem;\n    font-size: inherit;\n    background-color: ${variants[variant].bg};\n    color: ${variants[variant].text};\n    width: ${hasBlock ? '100%' : ''};\n    display: ${hasBlock ? 'block' : 'inline-block'};\n    flex-shrink: 0;\n    text-align: center;\n    text-decoration: none;\n\n    &:focus {\n      outline: 0;\n      box-shadow: 0px 4px 16px rgba(0, 56, 255, 0.1), 0 0px 5px rgba(72, 79, 93, 0.4); /* verify with maggie */\n    }\n  `;\n};\n","/** @jsx jsx */\nimport { jsx } from '@emotion/core';\nimport { memo } from 'react';\nimport * as Styles from './ButtonStyles.js';\n\nfunction Button({ as, variant, hasBlock, size, children, ...restProps }) {\n  const Tag = as || 'button';\n  return (\n    <Tag {...restProps} css={Styles.button({ variant, hasBlock, size })}>\n      {children}\n    </Tag>\n  );\n}\n\nButton.defaultProps = {\n  variant: 'primary', // primary | success | light | flat | icon\n};\n\nexport default memo(Button);\n","import React, { useState } from 'react';\n\nconst CoreContext = React.createContext({});\n\nexport const CoreContextProvider = ({ children }) => {\n  const [state, setState] = useState({\n    modal: {\n      component: null, // Component - a modal\n      props: null, // Object - to be passed to the modal\n    },\n  });\n\n  function setModal(modal) {\n    console.debug('Setting Modal:', modal.component.name);\n    setState(state => ({ ...state, modal }));\n  }\n\n  function closeModal() {\n    setState(state => ({ ...state, modal: {} }));\n  }\n\n  const methods = {\n    setModal,\n    closeModal,\n  };\n\n  return <CoreContext.Provider value={{ ...state, ...methods }}>{children}</CoreContext.Provider>;\n};\n\nexport default CoreContext;\n","import { css } from '@emotion/core';\nimport * as Theme from 'Theme.js';\n\nexport const modal = css`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 2;\n`;\n\nexport const backdrop = css`\n  position: absolute;\n  background: rgba(0, 0, 0, 0.7);\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n`;\n\nexport const box = css`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100%;\n  background-color: white;\n  padding: 1.6rem;\n`;\n\nexport const btnClose = css`\n  position: absolute;\n  top: 0.8rem;\n  right: 0.8rem;\n  z-index: 4;\n  height: 4.4rem;\n  width: 4.4rem;\n  border: none;\n  border-radius: 50%;\n  padding: 0;\n  cursor: pointer;\n  background-color: transparent;\n\n  &::before,\n  &::after {\n    content: '';\n    position: absolute;\n    display: block;\n    left: 50%;\n    top: 50%;\n    width: 1.2rem;\n    height: 0.2rem;\n    background-color: ${Theme.colors.grayDark};\n    transition: transform 0.15s ease-in;\n    transform: translate(-50%, -50%) rotate(45deg);\n    transform-origin: center center;\n    border-radius: 0.2rem;\n  }\n\n  &::after {\n    transform: translate(-50%, -50%) rotate(-45deg);\n  }\n\n  &:focus,\n  &:hover {\n    outline: none;\n\n    &::before {\n      transform: translate(-50%, -50%) rotate(0);\n    }\n\n    &::after {\n      transform: translate(-50%, -50%) rotate(0);\n    }\n  }\n`;\n","/** @jsx jsx */\nimport { jsx } from '@emotion/core';\nimport { useContext } from 'react';\n\nimport CoreContext from 'store/CoreContext.js';\n\nimport * as Styles from './ModalStyles.js';\n\nexport default function Modal({ children }) {\n  const { closeModal } = useContext(CoreContext);\n\n  return (\n    <section css={Styles.modal}>\n      <div css={Styles.backdrop} onClick={closeModal} role=\"none\"></div>\n      <div css={Styles.box}>\n        <button css={Styles.btnClose} aria-label=\"Close Modal\" onClick={closeModal}></button>\n        {children}\n      </div>\n    </section>\n  );\n}\n","/** @jsx jsx */\nimport { jsx, css } from '@emotion/core';\nimport { useContext } from 'react';\nimport { typography as Typography } from 'Theme.js';\n\nimport PapersContext from 'store/PapersContext.js';\n\nimport Button from 'components/Button';\nimport Modal from 'components/Modal';\n\nconst StylesGroup = css``;\n\nconst StylesInfo = css`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 0.8rem;\n`;\n\nexport default function SettingsModal(props) {\n  const Papers = useContext(PapersContext);\n  const { game } = Papers.state;\n  const gameId = game && game.name;\n\n  const handleLeaveGame = () => {\n    if (window.confirm('Are you sure you wanna leave the game?')) {\n      Papers.leaveGame();\n    }\n  };\n\n  return (\n    <Modal>\n      <h1 css={Typography.h2}>Game Settings</h1>\n      <br />\n      {gameId ? (\n        <div css={StylesGroup}>\n          <div css={StylesInfo}>\n            <h2 css={Typography.h3}>\n              <span aria-label=\"\" role=\"img\">\n                ðŸ”Œ{' '}\n              </span>\n              Leave Game\n            </h2>\n            <Button size=\"sm\" onClick={handleLeaveGame}>\n              Leave Game\n            </Button>\n          </div>\n          <p css={Typography.secondary}>\n            You'll leave the group. If the game starts meanwhile, you won't be able to join again.\n          </p>\n        </div>\n      ) : (\n        <p css={Typography.secondary}>Nothing here for now... come back later...</p>\n      )}\n\n      <br />\n\n      <h1 css={Typography.h2}>App Settings</h1>\n      <br />\n      <div css={StylesGroup}>\n        <div css={StylesInfo}>\n          <h2 css={Typography.h3}>\n            <span aria-label=\"\" role=\"img\">\n              â™»ï¸{' '}\n            </span>\n            Refresh Page\n          </h2>\n          <Button size=\"sm\" onClick={() => window.location.reload()}>\n            Refresh Page\n          </Button>\n        </div>\n        <p css={Typography.secondary}>This will simply refresh the page.</p>\n      </div>\n      <br />\n\n      <div css={StylesGroup}>\n        <div css={StylesInfo}>\n          <h2 css={Typography.h3}>\n            <span aria-label=\"\" role=\"img\">\n              âœ¨{' '}\n            </span>\n            Reset Profile\n          </h2>\n          <Button\n            size=\"sm\"\n            onClick={() => {\n              localStorage.clear();\n              window.location.reload();\n            }}\n          >\n            Reset Profile\n          </Button>\n        </div>\n        <p css={Typography.secondary}>\n          This will delete your local profile and you'll have a fresh start. If you are in the\n          middle of a game, you'll leave the game too.\n        </p>\n      </div>\n    </Modal>\n  );\n}\n","/** @jsx jsx */\nimport { jsx } from '@emotion/core';\nimport { useContext } from 'react';\nimport SettingsModal from './SettingsModal';\nimport Button from 'components/Button';\n\nimport CoreContext from 'store/CoreContext.js';\n\nexport default function SettingsToggle(props) {\n  const { setModal } = useContext(CoreContext);\n\n  function openSettingsModal() {\n    setModal({\n      component: SettingsModal,\n    });\n  }\n  return (\n    <Button variant=\"icon\" aria-label=\"Settings\" onClick={openSettingsModal}>\n      <span role=\"img\" aria-label=\"\">\n        âš™ï¸\n      </span>\n    </Button>\n  );\n}\n","/** @jsx jsx */\nimport { jsx } from '@emotion/core';\nimport * as Styles from './PageStyles.js';\nimport SettingsToggle from 'components/Settings';\n\nconst Page = ({ children, ...otherProps }) => {\n  return (\n    <div css={Styles.page} {...otherProps}>\n      {children}\n    </div>\n  );\n};\n\nconst Header = ({ children, ...otherProps }) => {\n  return (\n    <div css={Styles.header({ hasChildren: !!children })} {...otherProps}>\n      {children}\n      <SettingsToggle />\n    </div>\n  );\n};\n\nconst Main = ({ children, ...otherProps }) => {\n  return (\n    <div css={Styles.main} {...otherProps}>\n      {children}\n    </div>\n  );\n};\n\nconst CTAs = ({ children, ...otherProps }) => {\n  return (\n    <div css={Styles.ctas} {...otherProps}>\n      {children}\n    </div>\n  );\n};\n\nexport default Page;\n\nPage.Header = Header;\nPage.Main = Main;\nPage.CTAs = CTAs;\n","import { css } from '@emotion/core';\nimport * as Theme from 'Theme.js';\n\nexport const main = ({ centered }) => css`\n  display: flex;\n  flex-grow: 1;\n  text-align: center;\n  flex-direction: column;\n  justify-content: ${centered ? 'center' : 'flex-start'};\n`;\n\nexport const logo = css`\n  font-size: 8rem;\n`;\n\nexport const paragraph = css`\n  margin: 0.8rem auto;\n`;\n\nexport const input = css`\n  ${Theme.typography.h1}\n  border: none;\n  border-bottom: 1px solid ${Theme.colors.grayLight};\n  border-radius: 0;\n  width: 100%;\n  text-align: center;\n  margin-top: 4.8rem;\n  margin-bottom: 4.8rem;\n\n  ${Theme.bp.xs} {\n    margin-top: 1.6rem;\n    margin-bottom: 1.6rem;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: ${Theme.colors.primaryLight};\n  }\n`;\n\nexport const avatarPlace = css`\n  width: 80vw;\n  height: 80vw;\n  max-width: 28.4rem;\n  max-height: 28.4rem;\n  border-radius: 50%;\n  background-color: ${Theme.colors.primaryLight};\n  color: ${Theme.colors.primary};\n  margin: 2.4rem auto;\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  justify-content: center;\n\n  svg {\n    /* camera */\n    stroke: ${Theme.colors.primary};\n    display: inline-block;\n    margin-bottom: 1.6rem;\n  }\n`;\n\nexport const avatarImg = css`\n  ${avatarPlace}\n  border: none;\n  object-fit: cover;\n`;\n\n// -----\n\nexport const memeContainer = css`\n  position: relative;\n  margin-bottom: 4.8rem;\n\n  ${Theme.bp.xs} {\n    margin-bottom: 1.4rem;\n  }\n`;\n\nexport const memeFace = css`\n  ${avatarImg}\n  background: ${Theme.colors.grayDark};\n  margin: -0.6rem 0;\n  width: 7rem;\n  height: 7rem;\n  position: absolute;\n  top: 0;\n  left: 50%;\n  transform: translateX(-50%);\n  z-index: 1;\n`;\n\nexport const memeBody = css`\n  width: 20rem;\n  height: 20rem;\n  opacity: 0.8;\n`;\n","/** @jsx jsx */\nimport { jsx, css } from '@emotion/core';\nimport { Fragment, useContext, useState } from 'react';\nimport compressImg from 'browser-image-compression';\nimport Page from 'components/Page';\nimport * as Styles from './HomeStyles.js';\nimport * as Theme from 'Theme.js';\nimport Button from 'components/Button';\nimport PapersContext from 'store/PapersContext.js';\nimport { encodeImgToBase64 } from 'utils/index.js';\n\nexport default function HomeNewPlayer(props) {\n  const Papers = useContext(PapersContext);\n  const profile = Papers.state.profile;\n  const [state, setState] = useState({\n    name: profile.name,\n    avatar: profile.avatar,\n    step: 0,\n    avatarStatus: null, // loading || loaded || error?\n  });\n\n  const StepWelcome = () => (\n    <Fragment>\n      <span css={Styles.logo} role=\"img\" aria-label=\"logo\">\n        ðŸŽ²\n      </span>\n      <h1 css={Theme.typography.h1}>Welcome!</h1>\n      <p css={[Styles.paragraph, Theme.typography.secondary]}>\n        Papers is the perfect game for your{' '}\n        <span\n          css={css`\n            white-space: nowrap;\n          `}\n        >\n          dinner party\n        </span>\n        .\n        <br />\n        Made with love by Maggie and Sandy <span aria-hidden=\"true\">ðŸ˜Ž</span>\n      </p>\n    </Fragment>\n  );\n\n  const StepName = () => (\n    <Fragment>\n      <label>\n        <span>How should we call you?</span>\n        <input\n          css={Styles.input}\n          type=\"text\"\n          autoFocus\n          defaultValue={state.name}\n          onChange={e => updateTempProfile('name', e)}\n        ></input>\n      </label>\n\n      {state.name && <Button onClick={goNextStep}>Next</Button>}\n    </Fragment>\n  );\n\n  const StepAvatar = () => (\n    <label>\n      <span>Add your avatar</span>\n      <input\n        type=\"file\"\n        className=\"sr-only\"\n        accept=\"image/png, image/jpeg\"\n        onChange={e => updateTempProfile('avatar', e)}\n      />\n      {state.avatar ? (\n        <img css={Styles.avatarImg} src={state.avatar} alt=\"Your avatar\" />\n      ) : (\n        <div css={Styles.avatarPlace}>\n          {/* prettier-ignore */}\n          <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M23 19C23 19.5304 22.7893 20.0391 22.4142 20.4142C22.0391 20.7893 21.5304 21 21 21H3C2.46957 21 1.96086 20.7893 1.58579 20.4142C1.21071 20.0391 1 19.5304 1 19V8C1 7.46957 1.21071 6.96086 1.58579 6.58579C1.96086 6.21071 2.46957 6 3 6H7L9 3H15L17 6H21C21.5304 6 22.0391 6.21071 22.4142 6.58579C22.7893 6.96086 23 7.46957 23 8V19Z\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n            <path d=\"M12 17C14.2091 17 16 15.2091 16 13C16 10.7909 14.2091 9 12 9C9.79086 9 8 10.7909 8 13C8 15.2091 9.79086 17 12 17Z\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n          </svg>\n          <span>Upload or take a picture</span>\n        </div>\n      )}\n      <span>\n        {state.avatarStatus === 'loading' && 'Loading...'}\n        {state.avatarStatus === 'loaded' && 'Looking good!'}\n      </span>\n    </label>\n  );\n\n  function updateTempProfile(key, event) {\n    return {\n      name: () => {\n        const name = event.target.value;\n        setState(state => ({ ...state, name }));\n      },\n      avatar: async () => {\n        const file = event.target.files[0];\n        setState(state => ({ ...state, avatarStatus: 'loading' }));\n\n        if (!file) return;\n\n        const compressedFile = await compressImg(file, {\n          maxWidthOrHeight: 500,\n        });\n\n        encodeImgToBase64(compressedFile, avatar => {\n          console.log('Avatar compressed!');\n          setState(state => ({ ...state, avatar, avatarStatus: 'loaded' }));\n        });\n      },\n    }[key]();\n  }\n\n  function goNextStep() {\n    setState(state => ({\n      ...state,\n      step: state.step + 1,\n    }));\n  }\n\n  function goBackStep() {\n    setState(state => ({\n      ...state,\n      step: state.step - 1,\n    }));\n  }\n\n  function setProfile() {\n    Papers.updateProfile({\n      name: state.name,\n      avatar: state.avatar,\n    });\n  }\n\n  const CurrentStep = {\n    0: StepWelcome,\n    1: StepName,\n    2: StepAvatar,\n  }[state.step];\n\n  return (\n    <Page>\n      {state.step > 0 && (\n        <Page.Header>\n          <Button variant=\"flat\" onClick={goBackStep}>\n            Back\n          </Button>\n        </Page.Header>\n      )}\n      <Page.Main css={Styles.main({ centered: state.step === 0 })}>\n        <CurrentStep />\n      </Page.Main>\n      <Page.CTAs>\n        {state.step === 0 && <Button onClick={goNextStep}>Next</Button>}\n        {state.step === 2 && (\n          <Button onClick={setProfile} variant={state.avatar ? 'primary' : 'flat'}>\n            {state.avatar ? 'Finish' : 'Skip this step'}\n          </Button>\n        )}\n      </Page.CTAs>\n    </Page>\n  );\n}\n","import { css } from '@emotion/core';\nimport * as Theme from 'Theme.js';\n\nexport const modal = css``;\n\nexport const backdrop = css``;\n\nexport const box = css``;\n\nexport const btnClose = css``;\n\nexport const title = css`\n  text-align: center;\n  margin-top: 4rem;\n`;\n\nexport const tip = css`\n  text-align: center;\n  margin: 0.8rem 0 1.6rem;\n`;\n\n// TODO - component Input - same as HomeStyles.css\nexport const input = css`\n  border: none;\n  border-bottom: 1px solid ${Theme.colors.grayLight};\n  border-radius: 0;\n  width: 100%;\n  text-align: center;\n  ${Theme.typography.h1}\n  margin: 0 0 1.6rem;\n  margin-top: 6rem;\n\n  ${Theme.bp.xs} {\n    margin-top: 0.8rem;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: ${Theme.colors.grayMedium};\n  }\n`;\n\nexport const errorMsg = css`\n  ${Theme.typography.small}\n  color: #da4040;\n  margin-bottom: 1.6rem;\n  text-align: center;\n`;\n","/** @jsx jsx */\nimport { jsx } from '@emotion/core';\nimport { Fragment, useState, useContext } from 'react';\nimport { Redirect } from 'react-router-dom';\n\nimport * as Theme from 'Theme.js';\nimport CoreContext from 'store/CoreContext.js';\nimport PapersContext from 'store/PapersContext.js';\nimport Button from 'components/Button';\nimport Modal from 'components/Modal';\nimport * as Styles from './AccessGameModalStyles.js';\n\nexport default function AccessGameModal({ variant }) {\n  const Papers = useContext(PapersContext);\n  const { closeModal } = useContext(CoreContext);\n  const [isAccessing, setAccessing] = useState(false);\n  const [state, setState] = useState({\n    gameName: null,\n    gameToRedirect: null,\n    errorMsg: null,\n  });\n\n  const handleInputChange = e => {\n    const gameName = e.target.value;\n\n    setState(state => ({\n      ...state,\n      gameName,\n    }));\n  };\n\n  const handleBtnClick = () => {\n    setAccessing(true);\n    Papers.accessGame(variant, state.gameName, err => {\n      if (err) {\n        // TODO - Move this out of here - redux(mapstatetoprops?)/context/wtv...\n        const errorMsgMap = {\n          exists: () => 'Choose other name.',\n          notFound: () => 'This game does not exist.',\n          ups: () => `Ups, something went wrong! Error: ${JSON.stringify(err)}`,\n        };\n\n        const errorMsg = (errorMsgMap[err] || errorMsgMap.ups)();\n\n        console.warn('accessGame() err:', state.gameName, errorMsg);\n        setAccessing(false);\n        return setState(state => ({ ...state, errorMsg }));\n      }\n\n      closeModal();\n    });\n  };\n\n  const copy = {\n    join: {\n      title: \"What's the party name?\",\n      description: 'Ask your friend for it!',\n      cta: \"Let's go!\",\n    },\n    create: {\n      title: 'Give this party a name!',\n      description: 'Pick a short and sweet name.',\n      cta: 'Next: Add Players',\n    },\n  }[variant];\n\n  if (state.gameToRedirect) {\n    return <Redirect to={`/game/${state.gameToRedirect}`} />;\n  }\n\n  return (\n    <Modal>\n      <Fragment>\n        <h1 css={[Styles.title, Theme.typography.h3]}>{copy.title}</h1>\n        <label>\n          <p css={[Styles.tip, Theme.typography.secondary]}>{copy.description}</p>\n          <input onChange={handleInputChange} css={Styles.input} autoFocus type=\"text\"></input>\n          {state.errorMsg && <p css={Styles.errorMsg}>{state.errorMsg}</p>}\n        </label>\n        {state.gameName && state.gameName.length >= 3 && (\n          <Button hasBlock onClick={handleBtnClick}>\n            {copy.cta}\n            {isAccessing && 'â³'}\n          </Button>\n        )}\n      </Fragment>\n    </Modal>\n  );\n}\n\nAccessGameModal.defaultProps = {\n  /** String - 'join' || 'create' */\n  variant: 'join',\n};\n","/** @jsx jsx */\nimport { jsx } from '@emotion/core';\nimport { useContext } from 'react';\nimport compressImg from 'browser-image-compression';\n\nimport * as Styles from './HomeStyles.js';\nimport * as Theme from 'Theme.js';\nimport Page from 'components/Page';\nimport AccessGameModal from './AccessGameModal.js';\nimport Button from 'components/Button';\nimport CoreContext from 'store/CoreContext.js';\nimport PapersContext from 'store/PapersContext.js';\nimport { encodeImgToBase64 } from 'utils/index.js';\n\nexport default function Home(props) {\n  const Papers = useContext(PapersContext);\n  const { setModal } = useContext(CoreContext);\n  const profile = Papers.state.profile;\n\n  const AvatarMeme = () => (\n    <div css={Styles.memeContainer}>\n      <label>\n        <span className=\"sr-only\">Edit your avatar</span>\n        <input\n          type=\"file\"\n          className=\"sr-only\"\n          accept=\"image/png, image/jpeg\"\n          onChange={e => updateTempProfile('avatar', e)}\n        />\n        {profile.avatar ? (\n          <img css={Styles.memeFace} src={profile.avatar} alt=\"avatar preview\"></img>\n        ) : (\n          <span css={Styles.memeFace} />\n        )}\n      </label>\n      <img css={Styles.memeBody} src=\"images/dance.gif\" aria-hidden=\"true\" alt=\"\" />\n    </div>\n  );\n\n  function openAccessGameModal(variant) {\n    setModal({\n      component: AccessGameModal,\n      props: {\n        variant,\n      },\n    });\n  }\n\n  function updateTempProfile(key, event) {\n    return {\n      avatar: async () => {\n        const file = event.target.files[0];\n\n        if (!file) return;\n\n        const compressedFile = await compressImg(file, {\n          maxWidthOrHeight: 500,\n        });\n\n        encodeImgToBase64(compressedFile, avatar => {\n          console.log('Avatar compressed!');\n          Papers.updateProfile({ name: profile.name, avatar });\n        });\n      },\n    }[key]();\n  }\n\n  return (\n    <Page>\n      <Page.Header></Page.Header>\n      <Page.Main css={Styles.main}>\n        <AvatarMeme />\n        <h1>\n          Welcome\n          <span css={Theme.typography.h1}>{profile.name}</span>\n        </h1>\n      </Page.Main>\n      <Page.CTAs>\n        <Button onClick={() => openAccessGameModal('join')}>Join Game</Button>\n        <Button variant=\"light\" onClick={() => openAccessGameModal('create')}>\n          Create Game\n        </Button>\n      </Page.CTAs>\n    </Page>\n  );\n}\n","/** @jsx jsx */\nimport { jsx } from '@emotion/core';\nimport { useContext } from 'react';\nimport { Redirect } from 'react-router-dom';\n\nimport PapersContext from 'store/PapersContext.js';\n\nimport HomeNewPlayer from './HomeNewPlayer.js';\nimport HomeSigned from './HomeSigned.js';\n\nexport default function HomeEntry(props) {\n  const Papers = useContext(PapersContext);\n  const storedGameId = Papers.state.game && Papers.state.game.name;\n\n  if (storedGameId) {\n    return <Redirect push to={`/game/${storedGameId}`} />;\n  }\n\n  return Papers.state.profile.name ? <HomeSigned /> : <HomeNewPlayer />;\n}\n","import { css } from '@emotion/core';\nimport * as Theme from 'Theme.js';\n\nexport const avatar = ({ hasMargin }) => css`\n  width: 4.8rem;\n  height: 4.8rem;\n  object-fit: cover;\n  border-radius: 50%;\n  background: ${Theme.colors.primaryLight};\n  margin-right: ${hasMargin && '1.6rem'};\n`;\n","/** @jsx jsx */\nimport { jsx } from '@emotion/core';\nimport * as Styles from './AvatarStyles.js';\n\nexport default function Avatar({ src, alt, hasMargin, ...otherProps }) {\n  const Tag = src ? 'img' : 'span';\n  return <Tag src={src} alt={alt} css={Styles.avatar({ hasMargin })} {...otherProps} />;\n}\n","import { css } from '@emotion/core';\n// import * as Theme from 'Theme.js';\n\nexport const list = css`\n  margin-top: 1.6rem;\n`;\n\nexport const item = css`\n  display: flex;\n  align-items: center;\n  margin-bottom: 1.6rem; /* 2.4 too big */\n  justify-content: space-between;\n\n  span {\n    display: flex;\n    align-items: center;\n  }\n`;\n\nexport const itemStatus = css`\n  max-height: 5.6rem;\n`;\n","/** @jsx jsx */\nimport { jsx } from '@emotion/core';\nimport { useContext } from 'react';\n\nimport PapersContext from 'store/PapersContext.js';\nimport Button from 'components/Button';\nimport Avatar from 'components/Avatar';\nimport * as Styles from './ListPlayersStyles';\n\nfunction ListPlayers({ players, enableKickout = false, ...otherProps }) {\n  const Papers = useContext(PapersContext);\n  const { profile, game } = Papers.state;\n\n  const profileId = profile.id;\n  const profileIsAdmin = game.creatorId === profileId;\n\n  function handleKickOut(playerId) {\n    const playerName = game.players[playerId].name;\n    if (window.confirm(`You are about to kick ${playerName}. Are you sure?`)) {\n      Papers.kickoutOfGame(playerId);\n    }\n  }\n\n  return (\n    <ul css={Styles.list} {...otherProps}>\n      {players.map((playerId, i) => {\n        if (!game.players[playerId]) {\n          // TODO/UX - What should we do in this case?\n          const playerName = playerId.match('_(.*)_')[1];\n          return (\n            <li key={playerId} css={Styles.item}>\n              <span>\n                <Avatar hasMargin />\n                <span> {playerName} </span>\n                &nbsp;\n                <span>{' (Left) '}</span>\n              </span>\n            </li>\n          );\n        }\n\n        const { avatar, name, id, isAfk } = game.players[playerId];\n        const isAdmin = id === game.creatorId;\n        const wordsSubmitted = game.words[id];\n        const writtingStatus = game.teams && (!wordsSubmitted ? 'writting' : 'done');\n\n        return (\n          <li key={id} css={Styles.item}>\n            <span>\n              <Avatar src={avatar} hasMargin />\n              <span>{name}</span>\n              <span>\n                &nbsp;\n                {isAdmin ? ' (Admin) ' : id === profileId && ' (you) '}\n                {isAfk && ' âš ï¸ '}\n              </span>\n            </span>\n            <span>\n              {writtingStatus && (\n                <img\n                  css={Styles.itemStatus}\n                  src={`/images/${writtingStatus}.gif`}\n                  alt={`status: ${writtingStatus}`}\n                />\n              )}\n              {enableKickout && profileIsAdmin && id !== profileId && (\n                <Button variant=\"light\" size=\"sm\" onClick={() => handleKickOut(id)}>\n                  Kick out\n                </Button>\n              )}\n            </span>\n          </li>\n        );\n      })}\n    </ul>\n  );\n}\n\nexport default ListPlayers;\n","import { css } from '@emotion/core';\nimport * as Theme from 'Theme.js';\n\nexport const header = css`\n  margin: 1.6rem 2.4rem 0 0;\n  display: flex;\n  align-items: center;\n`;\n\nexport const headerSvg = css`\n  width: 2.4rem;\n  height: 2.4rem;\n  margin-right: 0.8rem;\n  flex-shrink: 0;\n`;\n\nexport const slides = css`\n  width: 100vw;\n  display: flex;\n  overflow-x: auto;\n  scroll-behavior: smooth;\n  scroll-snap-type: x mandatory;\n  padding: 1.6rem 0;\n  margin-left: -1.6rem; /* page padding */\n\n  &::after {\n    /* make margin work on last slide */\n    content: '';\n    width: 1px;\n    display: block;\n    flex-shrink: 0;\n  }\n  /* &::-webkit-scrollbar {\n    width: 10px;\n    height: 10px;\n  }\n  &::-webkit-scrollbar-thumb {\n    background: black;\n    border-radius: 10px;\n  }\n  &::-webkit-scrollbar-track {\n    background: transparent;\n  } */\n`;\n\nexport const slide = css`\n  width: calc(100vw - (1.6rem * 2));\n  min-height: 24.5rem;\n  ${Theme.bp.xs} {\n    min-height: 14.5rem; /* space for 2 lines */\n  }\n  margin: 0 0.4rem;\n  padding: 0.8rem 3.2rem 3.2rem;\n  display: flex;\n  align-items: center;\n  flex-shrink: 0;\n  scroll-snap-align: center;\n  background: ${Theme.colors.bg};\n  box-shadow: 0px 4px 16px rgba(0, 56, 255, 0.2);\n  opacity: 0.8;\n  transition: opacity 250ms;\n\n  &:first-child /* emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason */ {\n    margin-left: 1.6rem;\n  }\n\n  &:last-child {\n    margin-right: 1.6rem;\n  }\n`;\n\nexport const isActive = css`\n  opacity: 1;\n`;\n\nexport const slideTitle = css`\n  text-align: center;\n  ${Theme.typography.small}\n  ${Theme.typography.secondary}\n  opacity: 0.5;\n`;\n\nexport const textarea = css`\n  font-family: inherit;\n  font-size: inherit;\n  ${Theme.typography.h2}\n  color: ${Theme.typography.grayDark};\n  border: none;\n  border-radius: 0;\n  border-bottom: 1px solid ${Theme.colors.primaryLight};\n  width: 100%;\n  height: 4rem;\n  text-align: center;\n  resize: none;\n\n  &::-moz-placeholder,\n  &::-webkit-input-placeholder {\n    color: ${Theme.colors.grayMedium};\n  }\n\n  &:focus {\n    outline: none;\n    border-color: ${Theme.colors.primary};\n  }\n`;\n\nexport const sliderLabels = css`\n  display: flex;\n  justify-content: space-between;\n  ${Theme.typography.secondary}\n  ${Theme.typography.small}\n  margin-top: -0.8rem;\n  margin-bottom: 2.4rem;\n`;\n\nexport const sliderNav = css`\n  display: flex;\n`;\n/* Don't need button navigation */\n/* @supports (scroll-snap-type) {\n} */\n","/** @jsx jsx */\nimport { jsx } from '@emotion/core';\nimport { useState, useEffect, useRef, useContext } from 'react';\nimport debounce from 'lodash/debounce';\n\nimport * as Theme from 'Theme.js';\nimport CoreContext from 'store/CoreContext.js';\nimport PapersContext from 'store/PapersContext.js';\nimport Button from 'components/Button';\nimport Modal from 'components/Modal';\n\nimport * as Styles from './WritePapersModalStyles.js';\n\nexport default function WritePapersModal() {\n  const Papers = useContext(PapersContext);\n  const { game, profile } = Papers.state;\n  const refSlider = useRef(null);\n  // const setPapersWordsThrottled = useRef(throttle(q => Papers.setWords(q), 3000)).current;\n  const handleScrollDebounced = useRef(debounce(handleScroll, 250)).current;\n  const { closeModal } = useContext(CoreContext);\n  const [words, setLocalWords] = useState([]);\n  const [textareasHeight, setTextareasHeight] = useState({});\n\n  const [errorMsg, setErrorMsg] = useState(null);\n  const [slideIndex, setSlideIndex] = useState(0);\n\n  const wordsGoal = game.settings.words;\n  const wordsCount = words.filter(word => !!word).length;\n  const wordsAreStored = !!game.words[profile.id];\n\n  const focusTextareaAtSlide = index => {\n    const textarea = refSlider.current.childNodes[index].getElementsByTagName('textarea')[0];\n\n    if (textarea) {\n      textarea.focus(); // ðŸ› it doesnt work on IOS...\n    } else {\n      console.warn('textarea doesnt exist', refSlider.current, index, textarea);\n    }\n  };\n\n  useEffect(() => {\n    if (wordsAreStored) {\n      closeModal();\n    }\n  }, [wordsAreStored]); // eslint-disable-line\n\n  useEffect(() => {\n    refSlider.current.scrollTo(0, 0);\n    focusTextareaAtSlide(0);\n  }, [refSlider]);\n\n  useEffect(() => {\n    setTimeout(() => {\n      focusTextareaAtSlide(slideIndex);\n    }, 500); // give time to scroll finish\n  }, [slideIndex]);\n\n  const handleWordChange = (e, index) => {\n    const wordsToEdit = [...words];\n    wordsToEdit[slideIndex] = e.target.value;\n\n    setTextareasHeight({\n      // OPTIMIZE - recuce to 1 line when deleting chars\n      [index]: e.target.scrollHeight,\n    });\n\n    // OPTIMIZE - Maybe change state only on blur?\n    setLocalWords(wordsToEdit);\n  };\n\n  function handleClickNext() {\n    const nextEmpty = words.findIndex(word => !word);\n    const nextSlide = nextEmpty > -1 ? nextEmpty : slideIndex === 9 ? 0 : slideIndex + 1;\n    const gutter = 24; // page padding - TODO connect emotion here\n    refSlider.current.scrollTo((window.innerWidth - gutter) * nextSlide, 0);\n\n    setSlideIndex(nextSlide);\n  }\n\n  const handleSubmitClick = () => {\n    Papers.setWords(words, err => {\n      if (err) {\n        return setErrorMsg(`Something went wrong. ${JSON.stringify(err)}`);\n      }\n      closeModal();\n    });\n  };\n\n  function handleScroll(e, currentSlide) {\n    const el = refSlider.current;\n    const newSlide = Math.round((el.scrollLeft / el.scrollWidth) * 10);\n\n    if (currentSlide !== newSlide) {\n      setSlideIndex(newSlide);\n    }\n  }\n\n  function renderSliders() {\n    const papers = [];\n    for (let i = 0; i < wordsGoal; i++) {\n      const isActive = i === slideIndex;\n      const StylesIsActive = isActive && Styles.isActive;\n      const height = textareasHeight[i] || '4rem';\n\n      papers.push(\n        <div css={[Styles.slide, StylesIsActive]} data-slide={i + 1} key={i}>\n          <textarea\n            style={{ height }}\n            onChange={e => handleWordChange(e, i)}\n            placeholder=\"Write here...\"\n            {...(isActive ? { autoFocus: 'autofocus' } : {})}\n            css={Styles.textarea}\n          ></textarea>\n        </div>\n      );\n    }\n\n    return papers;\n  }\n\n  const color = Theme.colors.primary;\n\n  return (\n    <Modal>\n      <p css={[Theme.typography.small, Theme.typography.secondary, Styles.header]}>\n        {/* prettier-ignore */}\n        <svg css={Styles.headerSvg} viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n          <rect width=\"24\" height=\"24\" fill=\"white\"/>\n          <path d=\"M7.34851 10.3703C7.26855 11.8112 7.81518 13.2126 8.84837 14.2148C9.66244 15.0045 10.1293 16.0919 10.1293 17.1982V17.8361C10.1293 18.5135 10.6803 19.0645 11.3577 19.0645H13.2522C13.9296 19.0645 14.4805 18.5135 14.4805 17.8361V17.1987C14.4805 16.0783 14.9357 15.002 15.7294 14.2457C16.7224 13.2995 17.2692 12.0233 17.2692 10.6522C17.2692 7.91472 15.0423 5.68775 12.3048 5.68775C12.118 5.68775 11.9283 5.69814 11.741 5.71892C9.36948 5.98117 7.4811 7.9809 7.34851 10.3703ZM11.8404 6.61703C11.9949 6.59986 12.1512 6.59128 12.305 6.59128C14.5442 6.59128 16.3659 8.41279 16.3659 10.6522C16.3659 11.7737 15.9187 12.8175 15.1064 13.5916C14.1347 14.5175 13.5772 15.8321 13.5772 17.1987V17.8361C13.5772 18.0153 13.4313 18.1609 13.2524 18.1609H11.3579C11.1788 18.1609 11.0331 18.015 11.0331 17.8361V17.1982C11.0331 15.849 10.4661 14.5254 9.47767 13.5663C8.63265 12.7466 8.1854 11.5998 8.25091 10.4204C8.35911 8.46632 9.90233 6.83139 11.8404 6.61703Z\" fill={color}/>\n          <path d=\"M12.3051 7.82685C12.9814 7.82685 13.6363 8.07058 14.149 8.51331C14.2132 8.56865 14.2918 8.59576 14.3704 8.59576C14.4655 8.59576 14.5599 8.556 14.627 8.4783C14.7494 8.33667 14.7336 8.12276 14.592 8.00033C13.9561 7.45144 13.1441 7.14898 12.3051 7.14898C12.1179 7.14898 11.9663 7.30055 11.9663 7.48781C11.9663 7.67506 12.1179 7.82685 12.3051 7.82685Z\" fill={color}/>\n          <path d=\"M15.1305 10.6522C15.1305 10.8394 15.2821 10.991 15.4693 10.991C15.6566 10.991 15.8082 10.8394 15.8082 10.6522C15.8082 10.2192 15.7295 9.79608 15.5746 9.39447C15.5073 9.22008 15.3114 9.13335 15.1366 9.20043C14.962 9.26775 14.875 9.46404 14.9426 9.63842C15.0673 9.96188 15.1305 10.303 15.1305 10.6522Z\" fill={color}/>\n          <path d=\"M13.7752 19.5106H10.8347C10.6474 19.5106 10.4958 19.6622 10.4958 19.8494C10.4958 20.0367 10.6474 20.1882 10.8347 20.1882H13.7754C13.9627 20.1882 14.1143 20.0367 14.1143 19.8494C14.1143 19.6622 13.9625 19.5106 13.7752 19.5106Z\" fill={color}/>\n          <path d=\"M14.114 20.9201C14.114 20.7328 13.9625 20.5813 13.7752 20.5813H10.8347C10.6474 20.5813 10.4958 20.7328 10.4958 20.9201C10.4958 21.1073 10.6474 21.2589 10.8347 21.2589H13.7754C13.9625 21.2589 14.114 21.1071 14.114 20.9201Z\" fill={color}/>\n          <path d=\"M4.33882 9.96618C4.15157 9.96618 4 10.1177 4 10.305C4 10.4923 4.15157 10.6438 4.33882 10.6438H6.29112C6.47838 10.6438 6.62994 10.4923 6.62994 10.305C6.62994 10.1177 6.47838 9.96618 6.29112 9.96618H4.33882Z\" fill={color}/>\n          <path d=\"M20.2713 10.6438C20.4586 10.6438 20.6102 10.4923 20.6102 10.305C20.6102 10.1177 20.4586 9.96618 20.2713 9.96618H18.319C18.1318 9.96618 17.9802 10.1177 17.9802 10.305C17.9802 10.4923 18.1318 10.6438 18.319 10.6438H20.2713Z\" fill={color}/>\n          <path d=\"M11.9663 2.33882V4.29112C11.9663 4.47838 12.1179 4.62994 12.3051 4.62994C12.4924 4.62994 12.644 4.47838 12.644 4.29112V2.33882C12.644 2.15157 12.4924 2 12.3051 2C12.1179 2 11.9663 2.15157 11.9663 2.33882Z\" fill={color}/>\n          <path d=\"M16.7971 6.29198L18.1775 4.91161C18.3099 4.77947 18.3099 4.56466 18.1775 4.43252C18.0451 4.30015 17.8308 4.30015 17.6984 4.43252L16.318 5.81288C16.1857 5.94502 16.1857 6.15984 16.318 6.29198C16.3842 6.35816 16.4709 6.39114 16.5577 6.39114C16.6444 6.39114 16.7309 6.35816 16.7971 6.29198Z\" fill={color}/>\n          <path d=\"M7.81289 14.318L6.43253 15.6984C6.30016 15.8305 6.30016 16.0451 6.43253 16.1775C6.49871 16.2437 6.58545 16.2766 6.67219 16.2766C6.75893 16.2766 6.84567 16.2437 6.91185 16.1775L8.29221 14.7971C8.42458 14.665 8.42458 14.4504 8.29221 14.318C8.15985 14.1857 7.94526 14.1857 7.81289 14.318Z\" fill={color}/>\n          <path d=\"M6.91162 4.43252C6.77926 4.30015 6.56489 4.30015 6.43253 4.43252C6.30016 4.56466 6.30016 4.77947 6.43253 4.91161L7.81289 6.29198C7.87907 6.35816 7.96581 6.39114 8.05255 6.39114C8.13929 6.39114 8.22603 6.35816 8.29221 6.29198C8.42458 6.15984 8.42458 5.94502 8.29221 5.81288L6.91162 4.43252Z\" fill={color}/>\n          <path d=\"M16.318 14.318C16.1857 14.4504 16.1857 14.665 16.318 14.7971L17.6984 16.1775C17.7646 16.2437 17.8513 16.2766 17.9381 16.2766C18.0248 16.2766 18.1115 16.2437 18.1777 16.1775C18.3101 16.0451 18.3101 15.8305 18.1777 15.6984L16.7973 14.318C16.6648 14.1857 16.4504 14.1857 16.318 14.318Z\" fill={color}/>\n          <path d=\"M13.3789 21.9905C13.3789 21.8033 13.2273 21.6517 13.04 21.6517H11.5698C11.3825 21.6517 11.231 21.8033 11.231 21.9905C11.231 22.1778 11.3825 22.3294 11.5698 22.3294H13.04C13.2273 22.3294 13.3789 22.1778 13.3789 21.9905Z\" fill={color}/>\n        </svg>\n        <span>\n          Write down words or expressions. Make sure everyone knows what youâ€™re talking about!\n        </span>\n      </p>\n      <div css={Styles.slides} onScroll={e => handleScrollDebounced(e, slideIndex)} ref={refSlider}>\n        {renderSliders()}\n      </div>\n      {errorMsg && <p css={Styles.sliderLabels}>{errorMsg}</p>}\n      <div css={Styles.sliderLabels} aria-label=\"Papers status\">\n        <p>\n          {slideIndex + 1} of {wordsGoal}\n        </p>\n        <p>{wordsCount} papers filled</p>\n      </div>\n      <div css={Styles.sliderNav}>\n        {wordsCount !== 10 ? (\n          <Button hasBlock variant=\"light\" onClick={handleClickNext}>\n            Next paper\n          </Button>\n        ) : (\n          <Button hasBlock onClick={handleSubmitClick}>\n            All done!! Eheheheh\n          </Button>\n        )}\n      </div>\n    </Modal>\n  );\n}\n","import { css } from '@emotion/core';\nimport * as Theme from 'Theme.js';\n\nexport const header = css`\n  text-align: center;\n  margin-bottom: 4rem;\n\n  ${Theme.bp.xs} {\n    margin-bottom: 2rem;\n  }\n`;\n\nexport const headerImg = css`\n  margin-top: 0.8rem;\n  max-height: 14.7rem;\n`;\n\nexport const cap = css`\n  padding-bottom: 0.8rem;\n`;\n\nexport const title = profileIsAdmin => css`\n  display: flex;\n  justify-content: center;\n  align-items: baseline;\n  ${profileIsAdmin && `padding-left: 3rem;`} /* svg space */\n`;\n\n// same as TeamsStyles\nexport const headerTeam = css`\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-end;\n  margin-bottom: 1.6rem;\n`;\n\n// same as TeamsStyles\nexport const team = css`\n  margin-top: 0.8rem;\n  margin-bottom: 4rem;\n`;\n","/** @jsx jsx */\nimport { jsx, css } from '@emotion/core';\nimport { Fragment, useContext, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { typography as Typography, colors as Colors } from 'Theme.js';\nimport { usePrevious } from 'utils';\nimport CoreContext from 'store/CoreContext.js';\nimport PapersContext from 'store/PapersContext.js';\n\nimport Button from 'components/Button';\nimport ListPlayers from 'components/ListPlayers';\nimport Page from 'components/Page';\n\nimport WritePapersModal from './WritePapersModal.js';\nimport * as Styles from './LobbyStyles.js';\n\nexport default function GameRoom(props) {\n  const Papers = useContext(PapersContext);\n  const { setModal } = useContext(CoreContext);\n  const { profile, game } = Papers.state;\n  const profileId = profile.id;\n  const profileIsAdmin = game.creatorId === profileId;\n  const hasTeams = !!game.teams;\n  const prevHasTeams = usePrevious(!!game.teams);\n\n  const didSubmitAllWords = plId => {\n    return game.words[plId] && game.words[plId].length === game.settings.words;\n  };\n\n  useEffect(() => {\n    if (!prevHasTeams && hasTeams) {\n      // Teams were submited, force words!\n      !didSubmitAllWords(profileId) && openWords();\n    }\n  });\n\n  function openWords() {\n    setModal({\n      component: WritePapersModal,\n    });\n  }\n\n  function setWordsForEveyone() {\n    Papers.setWordsForEveyone();\n  }\n\n  function handleStartClick() {\n    Papers.startGame();\n  }\n\n  function renderToTeamsCTA() {\n    if (Object.keys(game.players).length >= 4) {\n      return profileIsAdmin ? (\n        <Button as={Link} hasBlock to=\"teams\">\n          Create teams!\n        </Button>\n      ) : (\n        <p>Wait for {game.players[game.creatorId].name} to create the teams.</p>\n      );\n    } else {\n      return <p css={Typography.italic}>Waiting for your friends to join the game (Minimum 4).</p>;\n    }\n  }\n\n  function renderLobbyStarting() {\n    return (\n      <Page>\n        <Page.Header />\n        <Page.Main>\n          <div css={Styles.header}>\n            {profileIsAdmin && (\n              <p css={[Typography.small, Styles.cap]}>Ask your friends to join!</p>\n            )}\n            <span css={Styles.title(profileIsAdmin)}>\n              <h1 css={Typography.h1}>{game.name}</h1>\n              {profileIsAdmin && (\n                <Button\n                  variant=\"icon\"\n                  onClick={() =>\n                    // TODO - share group link\n                    alert(`Ask your friends to click \"Join Game\" and write \"${game.name}\"`)\n                  }\n                >\n                  {/* prettier-ignore */}\n                  <svg viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path d=\"M4 12V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V12\" stroke={Colors.primary} strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                    <path d=\"M16 6L12 2L8 6\" stroke={Colors.primary} strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                    <path d=\"M12 2V15\" stroke={Colors.primary} strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                  </svg>\n                </Button>\n              )}\n            </span>\n          </div>\n          <div>\n            <h2 css={Typography.h3}>Lobby</h2>\n            <ListPlayers players={Object.keys(game.players)} enableKickout />\n          </div>\n        </Page.Main>\n        <Page.CTAs>{renderToTeamsCTA()}</Page.CTAs>\n      </Page>\n    );\n  }\n\n  function renderLobbyWritting() {\n    const didEveryoneSubmittedTheirWords = Object.keys(game.players).every(didSubmitAllWords);\n    const didSubmitWords = didSubmitAllWords(profileId);\n    const writeAllShortCut = profileIsAdmin && !didEveryoneSubmittedTheirWords;\n\n    return (\n      <Page>\n        <Page.Header />\n        <Page.Main>\n          <div css={Styles.header}>\n            <h1 css={Typography.secondary}>\n              {!didEveryoneSubmittedTheirWords ? 'Waiting for other players' : 'Everyone finished!'}\n            </h1>\n            <img\n              css={Styles.headerImg}\n              src={`/images/${!didEveryoneSubmittedTheirWords ? 'waiting' : 'done'}.gif`}\n              alt=\"\"\n            />\n          </div>\n          <ul>\n            {Object.keys(game.teams).map(teamId => {\n              const { id, name, players } = game.teams[teamId];\n              return (\n                <li key={id} css={Styles.team}>\n                  <h1 css={Typography.h3}>{name}</h1>\n                  <ListPlayers players={players} />\n                </li>\n              );\n            })}\n          </ul>\n        </Page.Main>\n        <Page.CTAs>\n          {!didSubmitWords && (\n            <Button hasBlock onClick={openWords}>\n              Write your papers\n            </Button>\n          )}\n          {didEveryoneSubmittedTheirWords && profileIsAdmin && (\n            <Button onClick={handleStartClick}>Start Game!</Button>\n          )}\n          {writeAllShortCut && (\n            <Button variant=\"danger\" hasBlock onClick={setWordsForEveyone}>\n              {/* eslint-disable-next-line */}\n              Write everyone's papers ðŸ’¥\n            </Button>\n          )}\n        </Page.CTAs>\n      </Page>\n    );\n  }\n\n  /* REVIEW - Hum... maybe create 2 routes? */\n  return !game.teams ? renderLobbyStarting() : renderLobbyWritting();\n}\n","import { css } from '@emotion/core';\nimport * as Theme from 'Theme.js';\n\nexport const page = css`\n  padding: 1.6rem;\n`;\n\nexport const backBtn = css``;\n\nexport const title = css`\n  text-align: center;\n  margin: 2.4rem auto 0;\n`;\n\nexport const cta = css`\n  width: 100%;\n  background: ${Theme.colors.primaryLight};\n  border: none;\n  border-radius: 10px;\n  margin-top: 3.2rem;\n  padding: 6.4rem 1.6rem;\n  text-align: center;\n  font-size: inherit;\n  color: ${Theme.colors.primary};\n\n  svg {\n    width: 100%;\n    margin-bottom: 4.8rem;\n  }\n`;\n\nexport const team = css`\n  margin-top: 0.8rem;\n  margin-bottom: 4rem;\n`;\n\nexport const headerTeam = css`\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-end;\n  margin-bottom: 1.6rem;\n\n  button {\n    color: ${Theme.colors.primary}; /* TODO DS */\n  }\n`;\n\nexport const main = css`\n  padding-bottom: 10rem; /* space for footer */\n`;\n\nexport const footer = css`\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  background: ${Theme.colors.bg};\n  padding: 0 1.6rem 1.6rem;\n  box-shadow: 0 -2rem 2rem white; /* fadeout effect */\n\n  /* REVIEW THIS first-child emotion error */\n  > button:first-of-type {\n    margin-top: -1rem; /* to appear above the fadeout */\n  }\n\n  > *:not(:last-child) {\n    margin-bottom: 1.6rem;\n  }\n`;\n","/** @jsx jsx */\nimport { jsx } from '@emotion/core';\nimport { Fragment, useState, useContext } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { typography as Typography } from 'Theme.js';\nimport PapersContext from 'store/PapersContext.js';\nimport { getRandomInt } from 'utils';\nimport Button from 'components/Button';\nimport Page from 'components/Page';\nimport ListPlayers from 'components/ListPlayers';\nimport * as Styles from './TeamsStyles.js';\n\nconst Title = () => <h1 css={[Typography.small, Styles.title]}>Create teams</h1>;\n\nexport default function GameRoom(props) {\n  const Papers = useContext(PapersContext);\n  const PaperTeams = Papers.teams;\n  const { game } = Papers.state;\n  const [tempTeams, setTeams] = useState(PaperTeams);\n\n  function generateTeams() {\n    const players = Object.keys(game.players);\n    const teamsNr = 2; // TODO option\n    const teams = Array.from(Array(teamsNr), () => []);\n    const limit = Math.round(players.length / teamsNr);\n    const newTempTeams = {};\n\n    function alocateTo(teamIndex, playerId) {\n      if (teams[teamIndex].length === limit) {\n        const newIndex = teamIndex === teamsNr - 1 ? 0 : teamIndex + 1;\n        alocateTo(newIndex, playerId);\n      } else {\n        teams[teamIndex].push(playerId);\n      }\n    }\n\n    for (let playerId of players) {\n      const teamIndex = getRandomInt(teamsNr - 1);\n      alocateTo(teamIndex, playerId);\n    }\n\n    teams.forEach((team, index) => {\n      newTempTeams[index] = {\n        id: index,\n        name: `Team ${String.fromCharCode(index + 65)}`, // 65 = A\n        players: team,\n      };\n    });\n\n    setTeams(newTempTeams);\n  }\n\n  function handleRenameOf(teamId) {\n    var name = prompt('Choose a sweet name.', tempTeams[teamId].name);\n\n    if (name !== null) {\n      setTeams(teams => ({\n        ...teams,\n        [teamId]: {\n          ...teams[teamId],\n          name,\n        },\n      }));\n    }\n  }\n\n  function submitTeamsAndGoNext() {\n    Papers.setTeams(tempTeams);\n  }\n\n  function renderCTAs() {\n    return (\n      <Page.Main>\n        <Title />\n        <button css={Styles.cta} onClick={generateTeams}>\n          {/* prettier-ignore */}\n          <svg width=\"72\" height=\"67\" viewBox=\"0 0 72 67\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M39.8323 28.9923C45.7163 32.0128 44.6576 32.296 44.6576 43.7262V44.0548L44.7226 44.06C46.8679 44.247 48.4499 44.4165 49.7872 44.5581C51.0854 44.6965 52.1132 44.8061 52.9119 44.8702L46.2581 29.5079C44.8103 29.5585 42.86 29.3043 39.8323 28.9923ZM17.0651 2.52221L18.7998 12.0159C19.0124 13.1753 20.1248 13.9431 21.2805 13.7292C22.4394 13.5184 23.2071 12.4065 22.9945 11.245L21.2568 1.75234C21.0442 0.590822 19.9298 -0.175946 18.774 0.0348633C17.6162 0.24774 16.8505 1.36172 17.0651 2.52221ZM8.40118 18.6419C9.35673 19.3291 10.6941 19.11 11.3793 18.1469C12.0665 17.189 11.8457 15.8508 10.8912 15.1656L5.58508 11.3721C4.62642 10.6849 3.29112 10.905 2.6018 11.8629C1.91661 12.825 2.13331 14.1591 3.09506 14.8504L8.40118 18.6419ZM46.3644 40.0949C45.869 40.0949 45.4676 40.5031 45.4676 41.0084C45.4676 41.5117 45.869 41.9198 46.3644 41.9198C46.8607 41.9198 47.2621 41.5117 47.2621 41.0084C47.2621 40.5031 46.8607 40.0949 46.3644 40.0949ZM46.6316 34.2191C46.1342 34.2191 45.7328 34.6273 45.7328 35.1305C45.7328 35.6359 46.1342 36.044 46.6316 36.044C47.128 36.044 47.5284 35.6359 47.5284 35.1305C47.5284 34.6273 47.128 34.2191 46.6316 34.2191ZM47.7967 37.4742C47.3003 37.4742 46.8989 37.8824 46.8989 38.3857C46.8989 38.89 47.3003 39.2971 47.7967 39.2971C48.292 39.2971 48.6944 38.89 48.6944 38.3857C48.6944 37.8824 48.292 37.4742 47.7967 37.4742ZM49.2166 41.2585C48.7213 41.2585 48.3178 41.6667 48.3178 42.171C48.3178 42.6742 48.7213 43.0834 49.2166 43.0834C49.7109 43.0834 50.1143 42.6742 50.1143 42.171C50.1143 41.6667 49.7109 41.2585 49.2166 41.2585ZM60.7482 18.8589C60.062 18.7029 59.3428 19.727 59.1385 21.1458C58.9362 22.5667 59.3283 23.844 60.0135 24.001C60.6987 24.156 61.42 23.132 61.6233 21.7121C61.8245 20.2922 61.4334 19.0139 60.7482 18.8589ZM58.1396 33.4058C57.4451 33.3077 56.7196 34.3772 56.5164 35.7981C56.3131 37.218 56.7114 38.4508 57.4059 38.5469C58.1003 38.6471 58.8248 37.5765 59.028 36.1577C59.2303 34.7379 58.833 33.5061 58.1396 33.4058ZM46.1115 15.5407C46.8411 16.1194 46.1301 17.4577 44.5224 18.5324C42.9147 19.6071 41.018 20.0091 40.2874 19.4304C39.5568 18.8538 40.2688 17.5124 41.8776 16.4387C43.4853 15.3651 45.3809 14.962 46.1115 15.5407ZM34.1795 47.1798C33.582 46.8139 32.4913 47.5073 31.7442 48.7319C30.995 49.9544 30.8732 51.244 31.4717 51.6088C32.0703 51.9757 33.16 51.2812 33.9071 50.0577C34.6562 48.8352 34.779 47.5466 34.1795 47.1798ZM38.1214 41.0022C37.5539 40.5868 36.4858 41.242 35.7387 42.4655C34.9916 43.688 34.8451 45.0169 35.4126 45.4302C35.9791 45.8477 37.0472 45.1926 37.7953 43.9701C38.5424 42.7476 38.689 41.4176 38.1214 41.0022ZM29.9693 53.3242C29.3718 52.9584 28.2811 53.6539 27.5319 54.8764C26.7848 56.0989 26.663 57.3885 27.2605 57.7543C27.859 58.1202 28.9497 57.4257 29.6968 56.2022C30.446 54.9807 30.5678 53.6911 29.9693 53.3242ZM6.61699 41.0022C7.18661 40.5868 8.25155 41.242 8.99969 42.4655C9.74679 43.688 9.8923 45.0169 9.32577 45.4302C8.75719 45.8477 7.69122 45.1926 6.94308 43.9701C6.19494 42.7476 6.04944 41.4176 6.61699 41.0022ZM14.7681 45.4385C15.3656 45.0727 16.4573 45.7661 17.2045 46.9886C17.9516 48.2131 18.0754 49.5007 17.4759 49.8676C16.8773 50.2344 15.7887 49.539 15.0405 48.3165C14.2934 47.094 14.1706 45.8043 14.7681 45.4385ZM6.61699 48.89C7.18661 48.4746 8.25155 49.1277 8.99969 50.3533C9.74679 51.5758 9.8923 52.9036 9.32577 53.3191C8.75719 53.7355 7.69122 53.0793 6.94308 51.8568C6.19494 50.6333 6.04944 49.3034 6.61699 48.89ZM14.7681 53.3242C15.3656 52.9584 16.4573 53.6539 17.2045 54.8764C17.9516 56.0989 18.0754 57.3885 17.4759 57.7543C16.8773 58.1202 15.7887 57.4257 15.0405 56.2022C14.2934 54.9807 14.1706 53.6911 14.7681 53.3242ZM24.9934 28.4156C25.0512 29.1173 23.9346 29.6857 22.5023 29.6857C21.0711 29.6857 19.8637 29.1173 19.807 28.4156C19.7502 27.714 20.8647 27.1446 22.297 27.1446C23.7293 27.1446 24.9366 27.714 24.9934 28.4156ZM16.9589 33.0596C16.9589 33.7623 15.798 34.3307 14.3657 34.3307C12.9344 34.3307 11.7735 33.7623 11.7735 33.0596C11.7735 32.36 12.9344 31.7907 14.3657 31.7907C15.798 31.7907 16.9589 32.36 16.9589 33.0596ZM33.6996 33.2498C33.6996 33.9515 32.5408 34.5198 31.1085 34.5198C29.6752 34.5198 28.5143 33.9515 28.5143 33.2498C28.5143 32.5481 29.6752 31.9798 31.1085 31.9798C32.5408 31.9798 33.6996 32.5481 33.6996 33.2498ZM25.142 33.1289C25.2266 33.8285 24.1338 34.4392 22.7025 34.494C21.2712 34.5477 20.0412 34.0269 19.9586 33.3273C19.8751 32.6267 20.9668 32.017 22.3991 31.9622C23.8294 31.9074 25.0584 32.4303 25.142 33.1289ZM25.1316 37.5621C25.1884 38.2627 24.0729 38.8321 22.6396 38.8321C21.2073 38.8321 20.002 38.2627 19.9452 37.5621C19.8874 36.8594 21.0019 36.29 22.4342 36.29C23.8665 36.29 25.0728 36.8594 25.1316 37.5621ZM44.703 48.2431C44.8547 57.5249 44.8031 55.638 33.5108 61.7143C20.4096 68.7619 24.3216 68.7619 11.2193 61.7143C-1.62699 54.802 0.07464 58.1987 0.07464 43.7262C0.07464 29.2547 -1.62699 32.6515 11.2193 25.7381C20.2393 20.8875 21.1959 19.3746 25.1905 21.2037C26.3483 19.7693 27.9859 17.9061 30.154 15.1698C39.4041 3.50805 35.8099 5.05916 50.6272 6.34159C65.1587 7.60128 62.2528 5.15733 67.9686 18.4497C73.6823 31.741 73.9052 27.9485 64.8357 39.3839C55.6568 50.9557 59.1189 49.5214 44.703 48.2431ZM28.926 23.1971C29.539 23.5432 30.2107 23.9235 30.9496 24.3348L40.9344 25.1233L46.7173 25.5449C46.7358 25.5377 46.7565 25.5263 46.7761 25.5191L58.7732 11.0693C58.0529 11.0083 57.0757 10.9505 55.8177 10.875C54.1584 10.7769 52.1606 10.658 50.2671 10.4958C48.1207 10.3077 46.5398 10.1393 45.2014 9.99665C42.0737 9.6639 40.5103 9.4965 39.9531 9.73727C39.3958 9.97702 38.4434 11.2295 36.5354 13.7334C35.7181 14.806 34.7543 16.0729 33.4138 17.7615C32.2323 19.2516 30.9455 20.7872 29.8764 22.0603C29.5255 22.4789 29.2067 22.8591 28.926 23.1971ZM50.0535 27.8194L56.6835 43.1206C57.1592 42.5223 57.7392 41.7607 58.4533 40.8224C59.2716 39.7487 60.2354 38.4828 61.5748 36.7943C62.7564 35.3031 64.0421 33.7696 65.1122 32.4954C66.8861 30.3791 67.7931 29.2971 67.8478 28.9313C67.9097 28.5221 67.2782 27.1187 65.9842 24.2428C65.2784 22.6711 64.458 20.8482 64.1381 20.1021C63.8161 19.3539 63.0577 17.5042 62.4024 15.9107C62.0299 15.0044 61.7172 14.2418 61.452 13.6135C60.4686 15.0364 58.6824 16.9389 55.924 20.4173C52.9387 24.1798 51.3815 26.476 50.0535 27.8194ZM22.3372 41.8279C22.3578 41.8279 22.3785 41.8268 22.3991 41.8258L39.1255 33.3066C38.4877 32.9666 37.6137 32.5254 36.4858 31.9591C35.0019 31.2099 33.2126 30.3109 31.5398 29.4108C29.6411 28.3888 28.2573 27.6075 27.084 26.9472C24.3422 25.4013 22.9729 24.6293 22.3661 24.6293C21.7583 24.6293 20.3879 25.4013 17.6492 26.9472C16.4749 27.6075 15.089 28.3888 13.1913 29.4108C11.5176 30.3109 9.73028 31.2099 8.24329 31.9591C7.26297 32.452 6.47252 32.8499 5.86576 33.1681L17.191 39.1494L22.3372 41.8279ZM24.5022 45.237L24.5486 61.9168C25.2235 61.5561 26.0573 61.0849 27.084 60.5073C28.2573 59.8469 29.6411 59.0647 31.5398 58.0437C33.2126 57.1426 35.0019 56.2415 36.4858 55.4954C38.948 54.2563 40.21 53.6198 40.4061 53.3046C40.6238 52.9533 40.6001 51.4156 40.5464 48.2617C40.5186 46.5391 40.4855 44.5384 40.4855 43.7262C40.4855 42.914 40.5186 40.9133 40.5464 39.1917C40.5619 38.211 40.5784 37.3864 40.5815 36.7044C39.1151 37.622 36.7242 38.6626 32.8184 40.7635C28.5906 43.038 26.2523 44.5291 24.5022 45.237ZM20.3951 62.0294L20.3477 45.2856C18.5862 44.5963 16.2386 43.0907 11.9138 40.7635C7.9265 38.6192 5.55721 37.6024 4.14968 36.7013C4.15484 37.3823 4.16825 38.21 4.18373 39.1917C4.21263 40.9133 4.24565 42.914 4.24565 43.7262C4.24565 44.5384 4.21263 46.5391 4.18373 48.2617C4.13214 51.4156 4.10737 52.9533 4.3251 53.3046C4.5191 53.6198 5.78217 54.2563 8.24329 55.4954C9.73028 56.2415 11.5176 57.1426 13.1913 58.0437C15.089 59.0647 16.4749 59.8469 17.6492 60.5073C18.7843 61.148 19.6862 61.6554 20.3951 62.0294Z\" fill=\"#0038FF\"/>\n          </svg>\n          Click to create a random team!\n        </button>\n      </Page.Main>\n    );\n  }\n\n  function renderTeams() {\n    return (\n      <Fragment>\n        <Page.Main>\n          <Title />\n          {Object.keys(tempTeams).map(teamId => {\n            const { id, name, players } = tempTeams[teamId];\n\n            return (\n              <div key={id} css={Styles.team}>\n                <header css={Styles.headerTeam}>\n                  <h1 css={Typography.h1}>{name}</h1>\n                  <Button onClick={() => handleRenameOf(id)} variant=\"flat\">\n                    Rename\n                  </Button>\n                </header>\n                <ListPlayers players={players} />\n              </div>\n            );\n          })}\n        </Page.Main>\n        <Page.CTAs>\n          <Button variant=\"light\" onClick={generateTeams}>\n            Create a different random team\n          </Button>\n          <Button onClick={submitTeamsAndGoNext}>Next: Write your 10 words!</Button>\n        </Page.CTAs>\n      </Fragment>\n    );\n  }\n\n  return (\n    <Page>\n      <Page.Header>\n        <Button css={Styles.backBtn} variant=\"flat\" as={Link} to={`/game/${game.name}`}>\n          Back to lobby\n        </Button>\n      </Page.Header>\n      {!tempTeams ? renderCTAs() : renderTeams()}\n    </Page>\n  );\n}\n","import { css } from '@emotion/core';\n// import * as Theme from 'Theme.js';\n\nexport const page = css`\n  padding: 1.6rem;\n`;\n","/** @jsx jsx */\nimport { jsx, css } from '@emotion/core';\nimport { Fragment, useState, useEffect, useContext } from 'react';\n// import { Link } from 'react-router-dom';\n\nimport { typography as Typography } from 'Theme.js';\nimport * as Styles from './PlayingStyles.js';\nimport Button from 'components/Button';\nimport Page from 'components/Page';\nimport PapersContext from 'store/PapersContext.js';\nimport { useCountdown, usePrevious, getRandomInt } from 'utils';\n\nexport default function Playing(props) {\n  const Papers = useContext(PapersContext);\n  const { profile, game } = Papers.state;\n  const round = game.round;\n  // const hasStatusGetReady = round.status === 'getReady';\n  const hasStatusFinished = round.status === 'finished';\n  const hasCountdownStarted = !['getReady', 'finished'].includes(round.status);\n  const prevHasCountdownStarted = usePrevious(hasCountdownStarted);\n  const profileIsAdmin = game.creatorId === profile.id;\n  const initialTimer = 10000; // TODO - from Papers.settings?\n  const timerReady = 3400;\n  const [countdown, startCountdown] = useCountdown(hasCountdownStarted ? round.status : null, {\n    timer: initialTimer + timerReady, // 400 - threshold for io connection.\n  }); // 3,2,1... go!\n  const initialTimerSec = Math.round(initialTimer / 1000);\n  const countdownSec = Math.round(countdown / 1000);\n  // const prevCountdownSec = usePrevious(countdownSec);\n  // const [timesUp, setTimesup] = useState(false);\n\n  const roundIndex = round.current;\n  const [turnTeamIndex, turnPlayerIndex, isOdd] = round.turnWho;\n  const turnPlayerId = game.teams[turnTeamIndex].players[isOdd ? 0 : turnPlayerIndex];\n  const isMyTurn = turnPlayerId === profile.id;\n\n  const [papersTurn, setPapersTurn] = useState(\n    JSON.parse(window.localStorage.getItem('turn')) || {\n      current: null, // String - current paper on the screen\n      passed: [], // [String] - papers passed\n      guessed: [], // [String] - papers guessed\n      wordsLeft: round.wordsLeft, // [String] - words left\n    }\n  );\n  const [isFinalScore, setFinalScore] = useState(null);\n\n  useEffect(() => {\n    // use false to avoid undefined on first render.\n    if (prevHasCountdownStarted === false && hasCountdownStarted) {\n      console.log('useEffect:: hasCountdownStarted');\n      pickFirstPaper();\n      startCountdown(round.status);\n    }\n  }, [startCountdown, round.status, prevHasCountdownStarted, hasCountdownStarted]); // eslint-disable-line\n\n  // TODO/NOTE: pickFirstPaper, pickNextPaper and togglePaper should be on PapersContext\n  function pickFirstPaper() {\n    setPapersTurn(() => {\n      const state = {\n        current: null,\n        passed: [],\n        guessed: [],\n        wordsLeft: round.wordsLeft,\n      };\n\n      if (round.wordsLeft.length === 0) {\n        // words ended\n        window.localStorage.setItem('turn', JSON.stringify(state));\n        return state;\n      }\n\n      const wordsToPick = [...state.wordsLeft];\n\n      const wordIndex = getRandomInt(wordsToPick.length - 1);\n      const nextPaper = wordsToPick[wordIndex];\n\n      wordsToPick.splice(wordIndex, 1);\n\n      state.current = nextPaper;\n      state.wordsLeft = wordsToPick;\n\n      window.localStorage.setItem('turn', JSON.stringify(state));\n      return state;\n    });\n  }\n\n  function pickNextPaper(hasGuessed = false) {\n    // OPTIMIZE/NOTE : paper & word mean the same.\n    const currentPaper = papersTurn.current;\n    let wordsToPick = [];\n    let pickingFrom = null; // 'left' || 'passed'\n    let wordsEnded = false;\n\n    if (papersTurn.wordsLeft.length > 0) {\n      pickingFrom = 'left';\n      wordsToPick = [...papersTurn.wordsLeft];\n    } else if (papersTurn.passed.length > 0) {\n      pickingFrom = 'passed';\n      wordsToPick = [...papersTurn.passed];\n    } else {\n      wordsEnded = true;\n    }\n\n    setPapersTurn(state => {\n      const wordsModified = {};\n      const wordIndex = !wordsEnded && getRandomInt(wordsToPick.length - 1);\n      let nextPaper = wordsEnded ? null : wordsToPick[wordIndex];\n\n      if (!wordsEnded) {\n        wordsToPick.splice(wordIndex, 1);\n      }\n\n      if (hasGuessed) {\n        wordsModified.guessed = [...state.guessed, currentPaper];\n\n        if (pickingFrom === 'left') {\n          wordsModified.wordsLeft = wordsToPick;\n        } else if (pickingFrom === 'passed') {\n          wordsModified.passed = wordsToPick;\n        }\n      } else {\n        if (pickingFrom === 'left') {\n          wordsModified.wordsLeft = wordsToPick;\n          wordsModified.passed = [...state.passed, currentPaper];\n        } else if (pickingFrom === 'passed') {\n          if (wordsToPick.length > 0) {\n            wordsModified.passed = [...wordsToPick, currentPaper];\n          } else {\n            // When it's the last word,\n            // but no stress because \"next paper\" button is disable\n            nextPaper = currentPaper;\n            wordsModified.passed = [];\n          }\n        }\n      }\n\n      const newState = {\n        ...state,\n        ...wordsModified,\n        current: nextPaper,\n      };\n\n      window.localStorage.setItem('turn', JSON.stringify(newState));\n      return newState;\n    });\n  }\n\n  function togglePaper(paper, hasGuessed) {\n    setPapersTurn(state => {\n      const wordsModified = {};\n      if (hasGuessed) {\n        const wordsToPick = [...state.passed];\n        const wordIndex = wordsToPick.indexOf(paper);\n        wordsToPick.splice(wordIndex, 1);\n\n        wordsModified.guessed = [...state.guessed, paper];\n        wordsModified.passed = wordsToPick;\n      } else {\n        const wordsToPick = [...state.guessed];\n        const wordIndex = wordsToPick.indexOf(paper);\n        wordsToPick.splice(wordIndex, 1);\n\n        wordsModified.guessed = wordsToPick;\n        wordsModified.passed = [...state.passed, paper];\n      }\n\n      const newState = {\n        ...state,\n        ...wordsModified,\n      };\n\n      window.localStorage.setItem('turn', JSON.stringify(newState));\n      return newState;\n    });\n  }\n\n  function handleStartClick() {\n    Papers.startTurn();\n    // pickNextPaper();\n    // setFakeHasCountdownStarted(true);\n    // startCountdown(Date.now());\n  }\n\n  function handleFinishTurnClick() {\n    // setPapersTurn({}); should it be done here?\n    Papers.finishTurn(papersTurn);\n  }\n\n  function handleStartNextRoundClick() {\n    Papers.startNextRound();\n  }\n\n  function handleFinalWinnerClick() {\n    setFinalScore(true);\n  }\n\n  // ----------------\n\n  const renderMyTurnGetReady = () => {\n    return (\n      <Fragment>\n        <h2>It's your turn!</h2>\n        [IMG EXPLAINING]\n        {isOdd && <p>Your team has one player less, so it's you again.</p>}\n        <p>You ready?</p>\n        <br />\n        <Button hasBlock onClick={handleStartClick}>\n          Start now!\n        </Button>\n      </Fragment>\n    );\n  };\n\n  const renderTurnScore = type => {\n    const StyleLi = css`\n      display: flex;\n      justify-content: space-between;\n      padding: 0.8rem 0;\n      border-bottom: 1px solid #eee;\n    `;\n    return (\n      <Fragment>\n        <h1>{type === 'timesup' ? \"Time's Up!\" : 'No more words'}</h1>\n        <p>\n          Your team got <strong>{papersTurn.guessed.length}</strong> papers!\n        </p>\n        <p>Guessed:</p>\n        <ul>\n          {papersTurn.guessed.map((paper, i) => (\n            <li css={StyleLi} key={`${i}_${paper}`}>\n              - {paper}\n              <Button\n                variant=\"flat\"\n                aria-label=\"mark as not guessed\"\n                onClick={() => togglePaper(paper, false)}\n              >\n                {/* eslint-disable-next-line */}âœ…\n              </Button>{' '}\n            </li>\n          ))}\n        </ul>\n        <p>Passed:</p>\n        <ul>\n          {papersTurn.passed.map((paper, i) => (\n            <li css={StyleLi} key={`${i}_${paper}`}>\n              - {paper}\n              <Button\n                variant=\"flat\"\n                aria-label=\"mark as guessed\"\n                onClick={() => togglePaper(paper, true)}\n              >\n                {/* eslint-disable-next-line */}âŒ\n              </Button>\n            </li>\n          ))}\n        </ul>\n        <Button hasBlock onClick={handleFinishTurnClick}>\n          Finish my turn\n        </Button>\n      </Fragment>\n    );\n  };\n\n  const renderRoundScore = () => {\n    const teamsScore = {};\n    const scorePlayers = game.score[round.current];\n\n    Object.keys(game.teams).forEach(teamId => {\n      game.teams[teamId].players.forEach(playerId => {\n        const playerScore = scorePlayers[playerId] ? scorePlayers[playerId].length : 0;\n        teamsScore[teamId] = (teamsScore[teamId] || 0) + playerScore;\n      });\n    });\n\n    const arrayOfScores = Object.values(teamsScore);\n    const arrayOfTeamsId = Object.keys(teamsScore);\n    const winnerIndex = arrayOfScores.indexOf(Math.max(...arrayOfScores));\n    const winnerId = arrayOfTeamsId[winnerIndex];\n\n    return (\n      <Fragment>\n        <h1>Round finished!</h1>\n        <div>Winner: {game.teams[winnerId].name}</div>\n        <ul>\n          Scores:\n          {Object.keys(teamsScore).map(teamId => (\n            <li key={teamId}>\n              {game.teams[teamId].name}: {teamsScore[teamId]}\n            </li>\n          ))}\n        </ul>\n        <br />\n        {round.current + 1 === game.settings.rounds.length ? (\n          <Button hasBlock onClick={handleFinalWinnerClick}>\n            Show final winner!\n          </Button>\n        ) : profileIsAdmin ? (\n          <Button hasBlock onClick={handleStartNextRoundClick}>\n            Start Round {round.current + 1 + 1} of {game.settings.rounds.length}\n          </Button>\n        ) : (\n          <p>Wait for admin ({game.players[game.creatorId].name}) to start next round.</p>\n        )}\n      </Fragment>\n    );\n  };\n\n  const renderGo = () => {\n    const stillHasWords =\n      papersTurn.current || papersTurn.passed.length > 0 || papersTurn.wordsLeft.length > 0;\n\n    if (!stillHasWords) {\n      return renderTurnScore('nowords');\n    }\n\n    if (countdownSec === 0) {\n      return renderTurnScore('timesup');\n    }\n\n    return (\n      <Fragment>\n        <br />\n        {countdownSec > initialTimerSec ? (\n          // 3, 2, 1...\n          <p>{countdownSec - initialTimerSec}...</p>\n        ) : (\n          <Fragment>\n            <Button hasBlock variant=\"success\" onClick={() => pickNextPaper(true)}>\n              Got it!\n            </Button>\n            <br />\n            {countdownSec}\n            <br /> - current: {papersTurn.current}\n            <br /> - passed: {papersTurn.passed.join(', ')}\n            <br /> - guessed: {papersTurn.guessed.join(', ')}\n            <br /> - wordsLeft:{' '}\n            <span css={Typography.small}>{papersTurn.wordsLeft.join(', ')}</span>\n            <br />\n            <br />\n            {papersTurn.current && !papersTurn.wordsLeft.length && !papersTurn.passed.length ? (\n              <p>----- Last paper!! -----</p>\n            ) : (\n              <Button hasBlock variant=\"light\" onClick={() => pickNextPaper(false)}>\n                Next paper\n              </Button>\n            )}\n          </Fragment>\n        )}\n      </Fragment>\n    );\n  };\n\n  const renderOtherTurnGetReady = () => {\n    const teamName = game.teams[turnTeamIndex].name;\n    const playerName = game.players[turnPlayerId].name;\n    return (\n      <Fragment>\n        Wait for your turn...\n        <br />\n        Timer:{' '}\n        {countdownSec ? (\n          countdownSec > initialTimerSec ? (\n            // 3, 2, 1...\n            <p>{countdownSec - initialTimerSec}...</p>\n          ) : (\n            countdown + '(ms)'\n          )\n        ) : (\n          0\n        )}\n        <br />\n        <p>Turn: {Number(round.turnCount).toString()}</p>\n        <p>Team: {teamName}</p>\n        <p>Player: {playerName}</p>\n      </Fragment>\n    );\n  };\n\n  if (isFinalScore) {\n    const teamsTotalScore = {};\n\n    const getRoundScore = roundIndex => {\n      const scorePlayers = game.score[roundIndex];\n      let teamsScore = {};\n      let bestPlayer = {};\n\n      Object.keys(game.teams).forEach(teamId => {\n        game.teams[teamId].players.forEach(playerId => {\n          const playerScore = scorePlayers[playerId] ? scorePlayers[playerId].length : 0;\n          if (playerScore > (bestPlayer.score || 0)) {\n            bestPlayer = { score: playerScore, id: playerId };\n          }\n          teamsScore[teamId] = (teamsScore[teamId] || 0) + playerScore;\n        });\n\n        teamsTotalScore[teamId] = (teamsTotalScore[teamId] || 0) + teamsScore[teamId];\n      });\n\n      const arrayOfScores = Object.values(teamsScore);\n      const arrayOfTeamsId = Object.keys(teamsScore);\n      // const winnerIndex = arrayOfScores.indexOf(Math.max(...arrayOfScores));\n      // const winnerId = arrayOfTeamsId[winnerIndex];\n\n      return {\n        arrayOfScores,\n        arrayOfTeamsId,\n        bestPlayer,\n      };\n    };\n\n    const scores = game.settings.rounds.map((round, index) => getRoundScore(index));\n\n    const getFinalWinner = () => {\n      const arrayOfScores = Object.values(teamsTotalScore);\n      const arrayOfTeamsId = Object.keys(teamsTotalScore);\n      const winnerScore = Math.max(...arrayOfScores);\n      const winnerIndex = arrayOfScores.indexOf(winnerScore);\n      const winnerId = arrayOfTeamsId[winnerIndex];\n\n      return `${game.teams[winnerId].name}: (${winnerScore})`;\n    };\n\n    console.log('final scores:', scores);\n    return (\n      <div css={Styles.page}>\n        {scores.map((round, index) => {\n          return (\n            <Fragment key={index}>\n              <p>Round {index}:</p>\n              <ul>\n                {Object.keys(round.arrayOfTeamsId).map((teamId, index) => (\n                  <li key={teamId}>\n                    {game.teams[teamId].name}: {round.arrayOfScores[index]}\n                  </li>\n                ))}\n              </ul>\n              <p>\n                Best Player: {game.players[round.bestPlayer.id].name} ({round.bestPlayer.score})\n              </p>\n              <br />\n            </Fragment>\n          );\n        })}\n        <br />\n        <p>**Final Team Winner** {getFinalWinner()}</p>\n        <br />\n        <Button onClick={Papers.leaveGame}>Leave game</Button>\n      </div>\n    );\n  }\n\n  return (\n    <Page>\n      <Page.Header>\n        <strong css={Typography.h3}>[ ðŸš§ ðŸ™ˆ It works, but it's ugly!]</strong>\n      </Page.Header>\n      <Page.Main>\n        {!hasCountdownStarted && (\n          <header>\n            <h1>Round {roundIndex + 1}</h1>\n            <p>\n              Try to guess as many papers as possible in 1 minute. <br />\n              {game.settings.rounds[roundIndex].description}\n            </p>\n            <br />\n          </header>\n        )}\n        <div>\n          {isMyTurn\n            ? hasStatusFinished\n              ? renderRoundScore()\n              : !hasCountdownStarted\n              ? renderMyTurnGetReady()\n              : renderGo()\n            : hasStatusFinished\n            ? renderRoundScore()\n            : renderOtherTurnGetReady()}\n        </div>\n      </Page.Main>\n    </Page>\n  );\n}\n","/** @jsx jsx */\nimport { jsx } from '@emotion/core';\nimport { useState, useContext, useEffect } from 'react';\nimport { Switch, Route, Redirect, Link, useParams } from 'react-router-dom';\n\nimport PapersContext from 'store/PapersContext.js';\nimport Page from 'components/Page';\nimport Button from 'components/Button';\nimport GameLobby from './Lobby.js';\nimport GameTeams from './Teams.js';\nimport { usePrevious } from 'utils';\n// import GameWords from './Words.js'; // TODO/OPTIMIZE - Turn Modal into route.\nimport GamePlaying from './Playing.js';\n\nexport default function(props) {\n  const { id: urlGameId } = useParams();\n  const Papers = useContext(PapersContext);\n  const { profile, game } = Papers.state;\n  const gameId = game && game.name;\n  const profileId = profile && profile.id;\n  const profileIsAfk = game && game.players[profileId].isAfk;\n  const [status, setStatus] = useState('loading'); // needProfile || ready  || notFound\n  const prevGameId = usePrevious(gameId);\n\n  useEffect(() => {\n    if (!profileId) {\n      // TODO - do this validation on App.js?\n      return setStatus('noProfile');\n    }\n\n    if (prevGameId && !gameId) {\n      // REVIEW - This shoudn't be here... Global Status\n      return setStatus('leftGame');\n    }\n\n    if (urlGameId === gameId) {\n      if (profileIsAfk) {\n        Papers.recoverPlayer();\n      } else {\n        setStatus('ready');\n      }\n    } else {\n      Papers.accessGame('join', urlGameId, err => {\n        if (err) {\n          const errorMsgMap = {\n            notFound: () => 'This game does not exist.',\n            alreadyStarted: () => 'This game had already started.',\n            ups: () => `Ups, something went wrong! Error: ${JSON.stringify(err)}`,\n          };\n\n          const errrorType = errorMsgMap[err] ? err : 'ups';\n          const errorMsg = errorMsgMap[errrorType]();\n\n          console.warn('/game/:id - accessGame failed:', gameId, errorMsg, err);\n\n          return setStatus(errrorType);\n        }\n      });\n    }\n    // Papers doesnt need to be a dep - its a method.\n  }, [profileId, gameId, profileIsAfk]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const Template = ({ children }) => (\n    <Page>\n      <Page.Header />\n      <Page.Main>{children}</Page.Main>\n    </Page>\n  );\n\n  if (!profileId) {\n    return (\n      <Template>\n        <h1>To join {gameId} you need to create a profile before!</h1>\n        {/* TODO - @mmbotelho - improve this flow  */}\n        <br />\n        <Button as={Link} to=\"/\">\n          Create profile\n        </Button>\n      </Template>\n    );\n  }\n\n  if (status === 'loading') {\n    return (\n      <Template>\n        <h1>Loading...</h1>\n      </Template>\n    );\n  }\n\n  if (status === 'notFound') {\n    return (\n      <Template>\n        <h1>Ups, the game \"{urlGameId}\" doesn't seem to exist!</h1>\n        <br />\n        <Button as={Link} to=\"/\">\n          Go Home\n        </Button>\n      </Template>\n    );\n  }\n\n  if (status === 'leftGame' || !game) {\n    return <Redirect push to=\"/\" />;\n  }\n\n  if (status === 'ups') {\n    return (\n      <Template>\n        <h1>Ups, something went wrong while loading {gameId}.</h1>\n        <br />\n        <Button as={Link} to=\"/\">\n          Go Home\n        </Button>\n      </Template>\n    );\n  }\n\n  const gamePath = `/game/${gameId}`;\n\n  return (\n    <Switch>\n      <Route exact path=\"/game/:id\">\n        <Redirect to={`${gamePath}/lobby`} />\n      </Route>\n      <Route path=\"/game/:id/lobby\">\n        {!game.hasStarted ? <GameLobby /> : <Redirect to={`${gamePath}/playing`} />}\n      </Route>\n      <Route path=\"/game/:id/teams\">\n        {!game.teams ? <GameTeams /> : <Redirect to={`${gamePath}/lobby`} />}\n      </Route>\n\n      <Route path=\"/game/:id/playing\">\n        {game.hasStarted ? <GamePlaying /> : <Redirect to={`${gamePath}/lobby`} />}\n      </Route>\n      {/* <Route path=\"/game/:id/words\">\n        <GameWords />\n      </Route> */}\n      <Route path=\"*\">\n        <Redirect to={`${gamePath}/lobby`} />\n      </Route>\n    </Switch>\n  );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n\nserviceWorker.unregister();\n","/** @jsx jsx */\nimport { jsx } from '@emotion/core';\nimport { Fragment } from 'react';\nimport { Redirect, Switch, Route } from 'react-router-dom';\nimport { ThemeGlobal } from 'Theme.js';\nimport { Home, GameRoom } from 'pages';\nimport CoreContext, { CoreContextProvider } from 'store/CoreContext.js';\nimport { PapersContextProvider } from 'store/PapersContext.js';\n\nexport default function App(props) {\n  return (\n    <CoreContextProvider>\n      <PapersContextProvider>\n        <ThemeGlobal />\n        <Switch>\n          <Route path=\"/game/:id\">\n            <GameRoom />\n          </Route>\n          <Route exact path=\"/\">\n            <Home />\n          </Route>\n          <Route path=\"*\">\n            {/* TODO - a 404 in the future? */}\n            <Redirect to=\"/\" />\n          </Route>\n        </Switch>\n        <CoreContext.Consumer>\n          {({ room, modal }) => {\n            const ModalComponent = modal.component;\n            const props = modal.props || {};\n            return <Fragment>{ModalComponent && <ModalComponent {...props} />}</Fragment>;\n          }}\n        </CoreContext.Consumer>\n      </PapersContextProvider>\n    </CoreContextProvider>\n  );\n}\n"],"sourceRoot":""}