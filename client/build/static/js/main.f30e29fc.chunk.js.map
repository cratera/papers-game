{"version":3,"sources":["Theme.js","views/HomeStyles.js","components/ButtonStyles.js","components/Button.js","store/CoreContext.js","utils/index.js","store/PapersContext.js","views/ModalStyles.js","views/ModalAccessGame.js","views/Home.js","views/GameRoom.js","serviceWorker.js","index.js","App.js"],"names":["colors","typography","h1","css","h2","h3","default","secondary","small","base","container","body","logo","paragraph","step","input","Theme","avatarPlace","avatarImg","memeContainer","memeFace","memeBody","btnBack","ctas","reconnect","variants","primary","bg","theme","text","light","flat","button","variant","hasBlock","Button","as","children","restProps","Tag","Styles","defaultProps","memo","CoreContext","React","createContext","CoreContextProvider","useState","modal","component","props","state","setState","methods","setModal","closeModal","Provider","value","encodeImgToBase64","fileToLoad","callback","fileReader","FileReader","onload","fileLoadedEvent","target","result","readAsDataURL","PapersContext","PapersContextProvider","URL","window","location","host","socket","status","profile","id","localStorage","getItem","name","avatar","gameId","game","undefined","PapersAPI","open","bind","close","pausePlayer","recoverPlayer","updateProfile","accessGame","recoverGame","this","console","log","passedGameId","playerId","gameIdStored","connected","warn","io","query","transports","on","gameName","cb","emit","player","setItem","actionType","payload","reaction","players","isAfk","ups","newGame","Math","random","toString","substr","Date","getTime","err","removeItem","errorMsgMap","notFound","dontBelong","empty","JSON","stringify","Component","backdrop","box","btnClose","title","tip","errorMsg","ModalaccessGame","Papers","useContext","gameToRedirect","copy","join","description","create","to","ModalStyles","onClick","role","aria-label","onChange","e","autoFocus","type","length","exists","Home","AvatarMeme","aria-hidden","src","alt","version","xmlns","width","height","viewBox","d","updateTempProfile","key","event","a","async","file","files","compressImg","maxWidthOrHeight","openModalAccessGame","ModalAccessGame","CurrentStep","0","1","defaultValue","2","className","accept","3","4","Link","GameRoom","gameRoomId","useParams","setStatus","prevgameIdStored","ref","useRef","useEffect","current","usePrevious","reactions","creator","Object","keys","map","confirm","Boolean","hostname","match","ReactDOM","render","path","Consumer","room","ModalComponent","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.f30e29fc.chunk.js","sourcesContent":["import { css } from '@emotion/core';\n\nexport const colors = {\n  grayDark: '#484F5D',\n  grayMedium: '#7F848E',\n  grayLight: '#E5E6E8',\n  primary: '#0038FF',\n  bg: '#fff',\n};\n\nexport const typography = {\n  h1: css`\n    font-size: 4rem;\n    font-weight: 700;\n    line-height: 4.8rem;\n    display: block;\n  `,\n  h2: css`\n    font-size: 3.2rem;\n    font-weight: 700;\n  `,\n  h3: css`\n    font-size: 1.6rem;\n    font-weight: 700;\n  `,\n  default: css`\n    font-size: 1.6rem;\n  `,\n  secondary: css`\n    font-size: 1.6rem;\n    color: ${colors.grayMedium};\n  `,\n  small: css`\n    font-size: 1.4rem;\n  `,\n};\n\nexport const base = css`\n  background-color: white;\n  color: ${colors.grayDark};\n  ${typography.default};\n  line-height: 1.4;\n`;\n","import { css } from '@emotion/core';\nimport * as Theme from 'Theme.js';\n\nexport const container = css`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  padding: 1.6rem 1.6rem 6rem;\n  height: 100vh;\n  overflow: hidden;\n`;\n\nexport const body = css`\n  text-align: center;\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`;\n\nexport const logo = css`\n  font-size: 8rem;\n`;\n\nexport const paragraph = css`\n  text-align: center;\n  margin: 0.8rem auto;\n`;\n\nexport const step = css`\n  margin-top: 5vh;\n  display: block;\n  text-align: center;\n`;\n\nexport const input = css`\n  border: none;\n  border-bottom: 1px solid ${Theme.colors.grayLight};\n  border-radius: 0;\n  width: 100%;\n  text-align: center;\n  ${Theme.typography.h1}\n  margin-top: 4rem;\n\n  &:focus {\n    outline: none;\n    border-color: ${Theme.colors.grayMedium};\n  }\n`;\n\nexport const avatarPlace = css`\n  width: 80vw;\n  height: 80vw;\n  border-radius: 50%;\n  border: 3px solid ${Theme.colors.grayLight};\n  margin: 1.6rem auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nexport const avatarImg = css`\n  ${avatarPlace}\n  border: none;\n  object-fit: cover;\n`;\n\nexport const memeContainer = css`\n  position: relative;\n  margin-bottom: 1rem;\n`;\n\nexport const memeFace = css`\n  ${avatarImg}\n  width: 7rem;\n  height: 7rem;\n  position: absolute;\n  top: 0;\n  left: 50%;\n  transform: translateX(-50%);\n`;\n\nexport const memeBody = css`\n  width: 20rem;\n  height: 20rem;\n  fill: ${Theme.colors.grayDark};\n  margin-top: 2rem;\n`;\n\nexport const btnBack = css`\n  text-align: left;\n  position: absolute;\n  top: 0;\n  left: 0;\n`;\n\nexport const ctas = css`\n  & > button:not(:last-child),\n  & > a:not(:last-child) {\n    margin-right: 1.6rem;\n  }\n`;\n\nexport const reconnect = css`\n  border-bottom: 1px solid ${Theme.colors.grayLight};\n  padding-bottom: 1.6rem;\n  margin-bottom: 1.6rem;\n`;\n","import { css } from '@emotion/core';\nimport * as theme from '../Theme.js';\n\nconst variants = {\n  primary: {\n    bg: theme.colors.grayDark,\n    text: theme.colors.bg,\n  },\n  light: {\n    bg: theme.colors.bg,\n    text: theme.colors.grayDark,\n  },\n  flat: {\n    bg: theme.colors.bg,\n    text: theme.colors.grayDark,\n  },\n};\n\nexport const button = ({ variant, hasBlock }) => {\n  return css`\n    ${variant === 'flat'\n      ? `\n    padding: 1.6rem;\n  `\n      : `\n    box-shadow: 0px 0.4rem 1.6rem rgba(72, 79, 93, 0.3);\n    padding: 1.6rem 2.4rem;\n  `}\n    border: none;\n    border-radius: 4.2rem;\n    font-size: inherit;\n    background-color: ${variants[variant].bg};\n    color: ${variants[variant].text};\n    width: ${hasBlock ? '100%' : ''};\n    display: ${hasBlock ? 'block' : 'inline-block'};\n    flex-shrink: 0;\n    text-align: center;\n    text-decoration: none;\n\n    &:hover,\n    &:focus {\n      outline: 0;\n      box-shadow: 0px 0.4rem 1.6rem rgba(72, 79, 93, 0.3),\n        0 0px 5px rgba(72, 79, 93, 0.8); /* verify with maggie */\n    }\n  `;\n};\n","/** @jsx jsx */\nimport { jsx } from '@emotion/core';\nimport { memo } from 'react';\nimport * as Styles from './ButtonStyles.js';\n\nfunction Button({ as, variant, hasBlock, children, ...restProps }) {\n  const Tag = as || 'button';\n  return (\n    <Tag {...restProps} css={Styles.button({ variant, hasBlock })}>\n      {children}\n    </Tag>\n  );\n}\n\nButton.defaultProps = {\n  variant: 'primary',\n};\n\nexport default memo(Button);\n","import React, { useState } from 'react';\n\nconst CoreContext = React.createContext({});\n\nexport const CoreContextProvider = ({ children }) => {\n  const [state, setState] = useState({\n    modal: {\n      component: null, // Component - a modal\n      props: null, // Object - to be passed to the modal\n    },\n  });\n\n  function setModal(modal) {\n    setState(state => ({ ...state, modal }));\n  }\n\n  function closeModal() {\n    setState(state => ({ ...state, modal: {} }));\n  }\n\n  const methods = {\n    setModal,\n    closeModal,\n  };\n\n  return (\n    <CoreContext.Provider value={{ ...state, ...methods }}>\n      {children}\n    </CoreContext.Provider>\n  );\n};\n\nexport default CoreContext;\n","import { useEffect, useRef } from 'react';\n\n// based on https://stackoverflow.com/a/23669825/4737729\nexport function encodeImgToBase64(fileToLoad, callback) {\n  const fileReader = new FileReader();\n\n  fileReader.onload = function(fileLoadedEvent) {\n    return callback(fileLoadedEvent.target.result);\n  };\n\n  fileReader.readAsDataURL(fileToLoad);\n}\n\nexport function createUniqueId(name) {\n  // Q: maybe this should be created on server instead.\n  // prettier-ignore\n  return `${name}_${Math.random().toString(36).substr(2, 9)}_${new Date().getTime()}`;\n}\n\n// React Hook\nexport function usePrevious(value) {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n}\n","import React, { Component } from 'react';\nimport io from 'socket.io-client';\nimport { createUniqueId } from 'utils/index.js';\n\nconst PapersContext = React.createContext({});\n\n// TODO - split into 2 Contexts: methods (mutations) and state (lookups)\nexport class PapersContextProvider extends Component {\n  constructor(props) {\n    super(props);\n    const isDev = process.env.NODE_ENV !== 'production';\n    // TIL: 🤯🐛🤬 (AFTER 2 HOURS trying to make this work on dev)\n    // Opening a github issue about it... (window.location.host)\n    this.URL = isDev ? `${window.location.hostname}:5000` : window.location.host;\n\n    this.state = {\n      socket: null,\n      status: 'LOADING', // LOADING || READY || ???\n      profile: {\n        id: window.localStorage.getItem('profile_id') || null,\n        name: window.localStorage.getItem('profile_name') || null,\n        avatar: window.localStorage.getItem('profile_avatar') || null,\n        // the current game this player belongs to\n        gameId: window.localStorage.getItem('profile_gameId') || null,\n      },\n      game: undefined,\n      /* {\n        players: {},\n        state: {},\n        settings: {},\n      } */\n    };\n\n    this.PapersAPI = {\n      open: this.open.bind(this),\n      close: this.close.bind(this),\n\n      pausePlayer: this.pausePlayer.bind(this),\n      recoverPlayer: this.recoverPlayer.bind(this),\n\n      updateProfile: this.updateProfile.bind(this),\n\n      accessGame: this.accessGame.bind(this),\n      recoverGame: this.recoverGame.bind(this),\n    };\n  }\n\n  // Maybe it should be a Route to ask for this,\n  // because it might want to retrieve different stuff...\n  // ex: on room/:id, i don't care about profile.gameId,\n  // instead I want the room/:id\n  componentDidMount() {\n    const { id, gameId } = this.state.profile;\n\n    console.log('Player status:', { id, gameId });\n\n    // Q: How I do this with useEffect?\n    if (id && gameId) {\n      const socket = this.PapersAPI.open();\n      this.PapersAPI.recoverGame(socket);\n    }\n  }\n\n  // =========== Papers API\n\n  open(passedGameId) {\n    let socket = this.state.socket;\n    const { id: playerId, gameId: gameIdStored } = this.state.profile;\n    const gameId = passedGameId || gameIdStored;\n\n    if (socket) {\n      if (socket.connected) {\n        console.warn('socket already opened!', playerId);\n      } else {\n        console.warn('reconnecting socket...', playerId);\n        socket.open();\n      }\n      return socket;\n    }\n    console.log('creating a socket!', playerId);\n\n    socket = io(this.URL, {\n      query: { playerId, gameId },\n      // TIL: https://stackoverflow.com/a/57459569/4737729\n      transports: ['websocket'],\n    });\n\n    socket.on('connect', () => {\n      console.log('connected!', playerId);\n      // Q: Maybe all socket.on() should be added here ?\n    });\n\n    this.setState({ socket });\n\n    return socket;\n  }\n\n  close() {\n    console.log('TODO Papers.close...');\n    // this.state.socket.open();\n    // this.state.socket.emit('close');\n\n    // const game = this.state.game;\n    // const playerId = this.state.profile.id;\n\n    // this.setState({\n    //   ...game,\n    //   players: {\n    //     ...game.players,\n    //     [playerId]: {\n    //       ...game.players[playerId],\n    //       isAfk: true,\n    //     },\n    //   },\n    // });\n  }\n\n  accessGame(variant, gameName, cb) {\n    let socket = this.state.socket;\n\n    if (!socket) {\n      socket = this.PapersAPI.open(gameName);\n    }\n\n    // This can happen when the user left the chat.\n    // Maybe\n    // if(!socket.opened) {\n    //   socket.open();\n    //   socket.on('reopen', () => {\n    //     accessGame(variant, gameName, cb)\n    //   });\n    // }\n\n    console.log('accessGame', variant, gameName);\n\n    socket.emit(\n      `${variant}-game`,\n      {\n        gameId: gameName,\n        player: this.state.profile,\n      },\n      cb\n    );\n\n    socket.on('set-game', game => {\n      console.log('set-game:', game.name);\n      window.localStorage.setItem('profile_gameId', game.name);\n\n      this.setState(state => ({\n        profile: {\n          ...state.profile,\n          gameId: game.name,\n        },\n        game,\n      }));\n    });\n\n    socket.on('game-update', (actionType, payload) => {\n      console.log('game-update:', actionType);\n      const game = this.state.game;\n      const reaction = {\n        'new-player': () => {\n          const player = payload;\n          return {\n            ...game,\n            players: {\n              ...game.players,\n              [player.id]: player,\n            },\n          };\n        },\n        'pause-player': () => {\n          const playerId = payload;\n          return {\n            ...game,\n            players: {\n              ...game.players,\n              [playerId]: {\n                ...game.players[playerId],\n                isAfk: true,\n              },\n            },\n          };\n        },\n        'recover-player': () => {\n          const playerId = payload;\n          return {\n            ...game,\n            players: {\n              ...game.players,\n              [playerId]: {\n                ...game.players[playerId],\n                isAfk: false,\n              },\n            },\n          };\n        },\n        ups: () => {\n          console.log('Ups! game-update', payload);\n          return game;\n        },\n      };\n\n      const newGame = reaction[actionType] ? reaction[actionType]() : reaction.ups();\n\n      this.setState({ game: newGame });\n    });\n  }\n\n  pausePlayer() {\n    console.log('pausePlayer');\n    this.state.socket.emit('pause-player');\n  }\n\n  recoverPlayer() {\n    this.state.socket.open();\n    this.state.socket.emit('recover-player');\n  }\n\n  updateProfile(profile) {\n    const id = profile.id || createUniqueId(profile.name);\n    window.localStorage.setItem('profile_name', profile.name);\n    window.localStorage.setItem('profile_avatar', profile.avatar);\n    window.localStorage.setItem('profile_id', id);\n\n    this.setState(state => ({\n      profile: {\n        ...state.profile,\n        ...profile,\n        id,\n      },\n    }));\n  }\n\n  recoverGame(socket = this.state.socket) {\n    console.log('recovering game...');\n    socket.emit('recover-game', (err, result) => {\n      if (err) {\n        window.localStorage.removeItem('profile_gameId');\n\n        this.setState(state => ({\n          status: 'READY',\n          profile: {\n            ...state.profile,\n            gameId: null,\n          },\n          game: null,\n        }));\n\n        const errorMsgMap = {\n          notFound: 'recover-game: Does not exist',\n          dontBelong: 'recover-game: You dont belong to:',\n          empty: 'recover-game: No games stored',\n          ups: `recover-game: Ups!', ${JSON.stringify(err)}`,\n        };\n\n        console.warn(errorMsgMap[err] || errorMsgMap.ups);\n        return;\n      }\n\n      console.log('recover-game success:', result.game.name);\n\n      this.setState({\n        status: 'READY',\n        game: result.game,\n      });\n    });\n  }\n\n  render() {\n    return (\n      <PapersContext.Provider\n        value={{\n          status: this.state.status,\n          state: {\n            profile: this.state.profile,\n            game: this.state.game,\n          },\n          ...this.PapersAPI,\n        }}\n      >\n        {this.props.children}\n      </PapersContext.Provider>\n    );\n  }\n}\n\nexport default PapersContext;\n","import { css } from '@emotion/core';\nimport * as Theme from 'Theme.js';\n\n// TODO: Create Modal component when design is finished.\nexport const modal = css`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 2;\n`;\n\nexport const backdrop = css`\n  position: absolute;\n  background: rgba(0, 0, 0, 0.7);\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n`;\n\nexport const box = css`\n  position: absolute;\n  top: 10vw;\n  width: 90vw;\n  height: auto;\n  left: 5vw;\n  background-color: white;\n  border-radius: 0.4rem;\n  padding: 1.6rem;\n`;\n\nexport const btnClose = css`\n  position: absolute;\n  top: 0;\n  right: 0;\n  z-index: 4;\n  height: 4.4rem;\n  width: 4.4rem;\n  border: none;\n  border-radius: 50%;\n  padding: 0;\n  cursor: pointer;\n  background-color: white;\n\n  &::before,\n  &::after {\n    content: '';\n    position: absolute;\n    display: block;\n    left: 50%;\n    top: 50%;\n    width: 1.2rem;\n    height: 0.2rem;\n    background-color: ${Theme.colors.grayDark};\n    transition: transform 0.15s ease-in;\n    transform: translate(-50%, -50%) rotate(45deg);\n    transform-origin: center center;\n    border-radius: 0.2rem;\n  }\n\n  &::after {\n    transform: translate(-50%, -50%) rotate(-45deg);\n  }\n\n  &:focus,\n  &:hover {\n    outline: none;\n\n    &::before {\n      transform: translate(-50%, -50%) rotate(0);\n    }\n\n    &::after {\n      transform: translate(-50%, -50%) rotate(0);\n    }\n  }\n`;\n\n// ---------------------\n\nexport const title = css`\n  margin-top: 0.8rem;\n`;\n\nexport const tip = css`\n  margin: 0.8rem 0 1.6rem;\n`;\n\n// TODO - dry same as HomeStyles.css\nexport const input = css`\n  border: none;\n  border-bottom: 1px solid ${Theme.colors.grayLight};\n  border-radius: 0;\n  width: 100%;\n  text-align: center;\n  ${Theme.typography.h1}\n  margin: 0 0 1.6rem;\n\n  &:focus {\n    outline: none;\n    border-color: ${Theme.colors.grayMedium};\n  }\n`;\n\nexport const errorMsg = css`\n  ${Theme.typography.small}\n  color: #da4040;\n  margin-bottom: 1.6rem;\n  text-align: center;\n`;\n","/** @jsx jsx */\nimport { jsx } from '@emotion/core';\nimport { useState, useContext } from 'react';\nimport { Redirect } from 'react-router-dom';\n\nimport * as ModalStyles from './ModalStyles.js';\nimport * as Theme from 'Theme.js';\nimport Button from 'components/Button.js';\nimport CoreContext from 'store/CoreContext.js';\nimport PapersContext from 'store/PapersContext.js';\n\n// TODO: Create Modal component when design is finished.\n\nexport default function ModalaccessGame({ variant }) {\n  const Papers = useContext(PapersContext);\n  const { closeModal } = useContext(CoreContext);\n  const [state, setState] = useState({\n    gameName: null,\n    gameToRedirect: null,\n    errorMsg: null,\n  });\n\n  const handleInputChange = e => {\n    const gameName = e.target.value;\n\n    setState(state => ({\n      ...state,\n      gameName,\n    }));\n  };\n\n  const handleBtnClick = () => {\n    Papers.accessGame(variant, state.gameName, (err, game) => {\n      if (err) {\n        // TODO - Move this out of here - redux(mapstatetoprops?)/context/wtv...\n        const errorMsgMap = {\n          exists: () => 'Choose other name.',\n          notFound: () => 'This game does not exist.',\n          ups: () => `Ups, something went wrong! Error: ${JSON.stringify(err)}`,\n        };\n\n        const errorMsg = (errorMsgMap[err] || errorMsgMap.ups)();\n\n        console.warn('accessGame() err:', errorMsg);\n\n        return setState(state => ({ ...state, errorMsg }));\n      }\n\n      setState(state => ({\n        ...state,\n        gameToRedirect: game.name,\n      }));\n\n      closeModal();\n    });\n  };\n\n  const copy = {\n    join: {\n      title: \"What's the game name?\",\n      description: 'Ask your friend for it!',\n    },\n    create: {\n      title: 'Name your game',\n      description: 'Pick a short and sweet name:',\n    },\n  }[variant];\n\n  if (state.gameToRedirect) {\n    return <Redirect to={`/game/${state.gameToRedirect}`} />;\n  }\n\n  return (\n    <section css={ModalStyles.modal}>\n      <div css={ModalStyles.backdrop} onClick={closeModal} role=\"none\"></div>\n      <div css={ModalStyles.box}>\n        <button css={ModalStyles.btnClose} aria-label=\"Close Modal\" onClick={closeModal}></button>\n        <label>\n          <h1 css={[ModalStyles.title, Theme.typography.h3]}>{copy.title}</h1>\n          <p css={[Theme.typography.secondary, ModalStyles.tip]}>{copy.description}</p>\n          <input onChange={handleInputChange} css={ModalStyles.input} autoFocus type=\"text\"></input>\n          {state.errorMsg && <p css={ModalStyles.errorMsg}>{state.errorMsg}</p>}\n        </label>\n        {state.gameName && state.gameName.length >= 3 && (\n          <Button hasBlock onClick={handleBtnClick}>\n            Let's go!\n          </Button>\n        )}\n      </div>\n    </section>\n  );\n}\n\nModalaccessGame.defaultProps = {\n  /** String - 'join' || 'create' */\n  variant: 'join',\n};\n","/** @jsx jsx */\nimport { jsx } from '@emotion/core';\nimport { Fragment, useContext, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport compressImg from 'browser-image-compression';\n\nimport * as Styles from './HomeStyles.js';\nimport * as Theme from 'Theme.js';\nimport Button from 'components/Button.js';\nimport CoreContext from 'store/CoreContext.js';\nimport PapersContext from 'store/PapersContext.js';\nimport { encodeImgToBase64 } from 'utils/index.js';\nimport ModalAccessGame from 'views/ModalAccessGame';\n\nexport default function Home(props) {\n  const Papers = useContext(PapersContext);\n  const { setModal } = useContext(CoreContext);\n  const profile = Papers.state.profile;\n  const game = Papers.state.game;\n  const [state, setState] = useState({\n    name: profile.name,\n    avatar: profile.avatar,\n    // If profile already exists, jump to WelcomeBack step\n    step: profile.name && profile.avatar ? 4 : 0,\n  });\n\n  const AvatarMeme = () => (\n    <div css={Styles.memeContainer} aria-hidden=\"true\">\n      <img css={Styles.memeFace} src={state.avatar} alt=\"\"></img>\n      {/* prettier-ignore */}\n      <svg css={Styles.memeBody} version='1.0' xmlns='http://www.w3.org/2000/svg' width='458.667' height='518.667' viewBox='0 0 344 389'>\n          <path d='M163.5 31.8c-5.2 2.5-11.9 9.4-15.3 15.7-2.5 4.7-2.7 5.8-2.7 18 0 10.7.4 14.5 2.4 21.5 1.3 4.7 2.8 8.9 3.3 9.4.4.6.8 1.7.8 2.5.1.9.9 3.4 2 5.6 1.1 2.2 1.9 4.3 2 4.7 0 1.1 5.3 12.2 6 12.8 1.1.8 2 15.2 1.2 18.9-.6 2.9-1.7 3.9-6.7 6.6-7 3.7-13.4 10.7-22.1 24.5-7.2 11.3-10.7 18.8-13.8 29.5-4.4 15.1-10 32.4-11.7 36-1 2.2-3.7 9.2-6 15.5-4.1 11.1-4.2 11.9-4 22.5.2 16.4 1.8 19.5 9.5 19.5 3.1 0 3.8-.5 5.6-4 1.3-2.6 2-5.9 2-9.9 0-5.1-.5-6.6-3.6-11.2-4.3-6.5-4.4-5.8 5.2-29.4 1.8-4.4 4.2-11.4 5.4-15.5 1.2-4.1 2.7-9.3 3.5-11.5.8-2.2 2.6-8 4-12.9 4.9-16.1 23.3-44 30.3-45.8 2.2-.6 2.2-.5 2.3 16 0 16.7.4 21.5 3.3 43.2 1.5 11.5 5.4 28.2 10.2 43.8 1.8 5.5 2.4 9.4 2 11.6-.7 3.5-8.2 15.1-14.4 22.1-6.1 6.9-21.5 32.2-27.2 44.5-2.9 6.3-5.7 12.1-6.2 12.7-.6.7-3.1 1.3-5.7 1.3-4.4 0-21.9 5.8-24.8 8.2-.7.6-1.3 2-1.3 3.2 0 4.4 4.1 5.8 9 3.3 5.2-2.7 14.7-5.5 20.5-6.2 8.6-.9 9.2-1.2 10.8-5.3 1.5-3.8 8-18.1 9.8-21.7.5-1.1 3.4-5.8 6.4-10.5 3-4.7 6.8-10.8 8.4-13.5 1.6-2.8 5.3-7.7 8.1-11s6.8-8.6 8.8-11.7c2-3.2 3.9-5.8 4.2-5.8 1.4 0 6.1 19.1 8 32.5.5 3.8 1.6 9.7 2.4 13 .8 3.3 2.2 11.2 3.1 17.5 2.2 14.8 2.6 15.6 8.5 16.9 6.7 1.4 15.3 4.8 17.6 6.9 7.9 7.1 15.6 9.1 16.2 4.3.3-1.9-.9-3.7-5.2-7.7-3-2.9-7.3-5.8-9.3-6.4-2.1-.7-4.2-1.6-4.8-2-.5-.4-3.6-1.5-6.7-2.4-5.2-1.5-5.8-1.9-6.3-4.9-.3-1.7-1.2-6.8-2-11.2-6.8-39.9-10.1-53.7-15.3-64.6-1.7-3.5-4.2-10.5-5.7-15.4-1.4-5-3-10.1-3.5-11.5-.5-1.4-1.2-4.3-1.6-6.5-.4-2.2-1-4.5-1.4-5-.9-1.2-4.6-23.6-6-36.7-.5-5.4-1-17.7-1-27.5v-17.8l11.8-2.9c25.3-6.2 42.8-13.2 48.3-19.4 3.6-4 9.5-12.6 11.9-17.2.7-1.4 1.6-2.7 2-3 .4-.3 1.9-2.8 3.5-5.5 1.6-2.8 3.3-5.6 3.9-6.4.6-.7 3.6-7 6.7-13.9l5.6-12.6 5.1.3c4.6.2 5.5-.1 8.2-2.7 2.5-2.5 3-3.9 3-7.6 0-3.6-.5-5-2.7-7.1-1.5-1.4-3.6-2.5-4.6-2.5-1.4 0-1.7-.5-1.3-1.7 1.5-3.9 1.8-10.3.6-11.8-1.8-2.1-5.3-1.9-7.4.6-3.1 3.7-6.5 12-7.1 17.8-.8 7.1-3 14.1-6.5 21.1-1.5 3-4 8.3-5.6 11.7-1.6 3.5-3.2 6.3-3.6 6.3-.5 0-.8.5-.8 1 0 1-4.8 8.9-6.1 10-.3.3-2 3.1-3.8 6.2-4.2 7.6-11.7 15-16.6 16.6-2.2.7-4.9 1.7-6 2.2-6.4 2.6-22.9 8.1-28 9.4-3.3.8-7 1.8-8.2 2.2-2.2.6-2.3.5-2.3-7.1 0-4.7.5-8.1 1.3-9 .6-.7 3.5-3.7 6.3-6.6 21.8-23.1 31.2-49.1 24.3-67.3-2.4-6.5-9.3-14.1-16.3-18.1-6.5-3.7-18.2-4.5-24.1-1.7zm18 9.1c5.4 2.4 10.8 7.6 13.5 12.9 2 3.8 2.2 5.4 1.7 13-.6 10.7-3.3 17.8-11 29.5-4.5 6.8-15.4 19.7-16.6 19.7-.5 0-1.6-1.7-2.6-3.8-.9-2-2-4.6-2.5-5.7-4.9-10.8-9.1-27.6-9.7-39-.5-8.7-.3-10.6 1.5-14.5 2-4.4 9.2-12.2 12.2-13.3 3.2-1.1 9.7-.6 13.5 1.2z' />\n        </svg>\n    </div>\n  );\n\n  const StepWelcome = () => (\n    <Fragment>\n      <span css={Styles.logo} role=\"img\" aria-label=\"logo\">\n        🎲\n      </span>\n      <h1 css={Theme.typography.h1}>Welcome!</h1>\n      <p css={[Styles.paragraph, Theme.typography.secondary]}>\n        Papers is the perfect game for your dinner party. Gather up to 10 friends and have fun!\n      </p>\n    </Fragment>\n  );\n\n  const StepName = () => (\n    <label css={Styles.step}>\n      <span>How should we call you?</span>\n      <input\n        css={Styles.input}\n        type=\"text\"\n        autoFocus\n        defaultValue={state.name}\n        onChange={e => updateTempProfile('name', e)}\n      ></input>\n    </label>\n  );\n\n  const StepAvatar = () => (\n    <label css={Styles.step}>\n      <span>Add your avatar</span>\n      <input\n        type=\"file\"\n        className=\"sr-only\"\n        accept=\"image/png, image/jpeg\"\n        onChange={e => updateTempProfile('avatar', e)}\n      />\n      {state.avatar ? (\n        <img css={Styles.avatarImg} src={state.avatar} alt=\"Your avatar\" />\n      ) : (\n        <div css={Styles.avatarPlace}>\n          <span role=\"img\" aria-hidden=\"true\">\n            📸\n          </span>{' '}\n          Upload a picture\n        </div>\n      )}\n    </label>\n  );\n\n  const StepReady = () => (\n    <div css={Styles.step}>\n      <h1>\n        You're ready!\n        <span css={Theme.typography.h1}>{state.name}</span>\n      </h1>\n      <AvatarMeme />\n    </div>\n  );\n\n  const StepWelcomeBack = () => (\n    <div css={Styles.step}>\n      <h1>\n        Welcome back\n        <span css={Theme.typography.h1}>{state.name}</span>\n      </h1>\n      <AvatarMeme />\n      {!!game && (\n        <div css={Styles.reconnect}>\n          <h2 css={Theme.typography.h3}>\n            Rejoin your last game:{' '}\n            {game.players[profile.id] && game.players[profile.id].isAfk && '⚠️'}\n          </h2>\n          <Button as={Link} to={`/game/${game.name}`}>\n            {game.name}\n          </Button>\n        </div>\n      )}\n    </div>\n  );\n\n  const stepMap = {\n    0: StepWelcome,\n    1: StepName,\n    2: StepAvatar,\n    3: StepReady,\n    4: StepWelcomeBack,\n  };\n\n  function updateTempProfile(key, event) {\n    return {\n      name: () => {\n        const name = event.target.value;\n        setState(state => ({ ...state, name }));\n      },\n      avatar: async () => {\n        const file = event.target.files[0];\n\n        if (!file) return;\n\n        const compressedFile = await compressImg(file, {\n          maxWidthOrHeight: 500,\n        });\n\n        encodeImgToBase64(compressedFile, avatar => {\n          console.log('Avatar compressed!');\n          setState(state => ({ ...state, avatar }));\n        });\n      },\n    }[key]();\n  }\n\n  function goNextStep() {\n    const { step, name, avatar } = state;\n    if (step === 2) {\n      Papers.updateProfile({ name, avatar });\n    }\n    setState(state => ({\n      ...state,\n      step: state.step + 1,\n    }));\n  }\n\n  function goBackStep() {\n    setState(state => ({\n      ...state,\n      step: state.step - 1,\n    }));\n  }\n\n  function goEditionStep() {\n    setState(state => ({\n      ...state,\n      step: 1,\n    }));\n  }\n\n  function openModalAccessGame(variant) {\n    setModal({\n      component: ModalAccessGame,\n      props: {\n        variant,\n      },\n    });\n  }\n\n  const CurrentStep = stepMap[state.step];\n\n  return (\n    <div css={Styles.container}>\n      {0 < state.step && state.step < 4 && (\n        <Button css={Styles.btnBack} variant=\"flat\" onClick={goBackStep}>\n          Go back\n        </Button>\n      )}\n      {state.step === 4 && (\n        <Button css={Styles.btnBack} variant=\"flat\" onClick={goEditionStep}>\n          Edit profile\n        </Button>\n      )}\n      <div css={Styles.body}>\n        <CurrentStep />\n      </div>\n      <div css={Styles.ctas}>\n        {state.step < 3 ? (\n          <Button hasBlock onClick={goNextStep}>\n            Next\n          </Button>\n        ) : (\n          <Fragment>\n            <Button variant=\"light\" onClick={() => openModalAccessGame('create')}>\n              Create Game\n            </Button>\n            <Button onClick={() => openModalAccessGame('join')}>Join Game</Button>\n          </Fragment>\n        )}\n      </div>\n    </div>\n  );\n}\n","/** @jsx jsx */\nimport { jsx, css } from '@emotion/core';\nimport { Fragment, useState, useContext, useEffect } from 'react';\nimport { Link, useParams } from 'react-router-dom';\n\nimport PapersContext from 'store/PapersContext.js';\nimport Button from 'components/Button.js';\nimport { usePrevious } from 'utils';\n\nexport default function GameRoom(props) {\n  const Papers = useContext(PapersContext);\n  let { id: gameRoomId } = useParams();\n  const [status, setStatus] = useState('loading');\n  const { profile, game } = Papers.state;\n  const gameIdStored = game && game.name;\n  const prevgameIdStored = usePrevious(gameIdStored);\n\n  useEffect(() => {\n    console.log('/game', { gameRoomId, gameIdStored });\n\n    if (gameRoomId === gameIdStored) {\n      console.log('Game is stored - came from other page');\n      Papers.recoverPlayer();\n      setStatus('go');\n      return;\n    }\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(() => {\n    if (prevgameIdStored === undefined && gameIdStored === undefined) {\n      console.log('/game joinining', gameRoomId);\n      Papers.accessGame('join', gameRoomId, (err, result) => {\n        console.log('accessGame result:', result);\n\n        if (err) {\n          const reactions = {\n            notFound: () => {\n              setStatus('notFound');\n            },\n            ups: result => {\n              setStatus('ups');\n            },\n          };\n\n          console.warn('accessGame', err);\n          return (reactions[err] || reactions.ups)();\n        }\n\n        setStatus('go');\n      });\n    }\n    // Disable rule because of Papers.accessGame - its always the same\n  }, [gameIdStored]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(() => {\n    return function onUnmount() {\n      if (game) {\n        Papers.pausePlayer();\n      }\n    };\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const handleLeaveGroup = () => {\n    if (game.creator === profile.name) {\n      if (\n        window.confirm(\n          'You are the admin of this game. Leaving, will kick out everyone. Are you sure?'\n        )\n      ) {\n        // Papers.killGame();\n        // socket.emit(\n        //   'kill-game',\n        //   {\n        //     gameId: game.name,\n        //     creatorId: profile.id,\n        //   },\n        //   () => setGame(null)\n        // );\n      }\n    } else {\n      if (window.confirm('Are you sure you wanna leave the game?')) {\n        // Papers.leaveGame();\n        // socket.emit(\n        //   'leave-game',\n        //   {\n        //     gameId: game.name,\n        //     playerId: profile.id,\n        //   },\n        //   () => setGame(null)\n        // );\n      }\n    }\n  };\n\n  if (status === 'loading') {\n    return <h1>Loading...</h1>;\n  }\n\n  if (status === 'notFound') {\n    return (\n      <div>\n        <h1>Ups, this group doesn't seem to exist!</h1>{' '}\n        <Button as={Link} to=\"/\">\n          Go Home\n        </Button>\n      </div>\n    );\n  }\n\n  return (\n    <Fragment>\n      <p>\n        A game \"{game.name}\" created by {game.creator} is starting here!\n      </p>\n      <h1>Players:</h1>\n      <ul>\n        {Object.keys(game.players).map(playerId => {\n          const { avatar, name, isAfk } = game.players[playerId];\n\n          return (\n            <li key={playerId}>\n              {/* TODO - avatar component!! */}-{' '}\n              <img\n                src={avatar}\n                alt=\"\"\n                css={css`\n                  width: 2.5rem;\n                  height: 2.5rem;\n                  object-fit: cover;\n                  border-radius: 50%;\n                  margin-right: 1rem;\n                `}\n              />\n              {name}\n              {isAfk && '⚠️'}\n            </li>\n          );\n        })}\n      </ul>\n      <Button as={Link} to=\"/\">\n        Go Home\n      </Button>\n      <Button onClick={handleLeaveGroup}>Leave Game</Button>\n    </Fragment>\n  );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n\nserviceWorker.unregister();\n","/** @jsx jsx */\nimport { jsx } from '@emotion/core';\nimport { Fragment } from 'react';\nimport { Redirect, Switch, Route } from 'react-router-dom';\nimport { base } from 'Theme.js';\nimport Home from 'views/Home.js';\nimport GameRoom from 'views/GameRoom.js';\nimport CoreContext, { CoreContextProvider } from 'store/CoreContext.js';\nimport { PapersContextProvider } from 'store/PapersContext.js';\n\nexport default function App(props) {\n  return (\n    <CoreContextProvider>\n      <PapersContextProvider>\n        <div css={base}>\n          <Switch>\n            <Route path=\"/game/:id\">\n              <GameRoom />\n            </Route>\n            <Route path=\"/game\">\n              <Redirect to=\"/\" />\n            </Route>\n            <Route path=\"/\">\n              <Home />\n            </Route>\n          </Switch>\n        </div>\n        <CoreContext.Consumer>\n          {({ room, modal }) => {\n            const ModalComponent = modal.component;\n            const props = modal.props || {};\n            return (\n              <Fragment>\n                {/* {room && room.name && (\n                  <Redirect push to={`/room/${room.name}`} />\n                )} */}\n                {ModalComponent && <ModalComponent {...props} />}\n              </Fragment>\n            );\n          }}\n        </CoreContext.Consumer>\n      </PapersContextProvider>\n    </CoreContextProvider>\n  );\n}\n"],"sourceRoot":""}